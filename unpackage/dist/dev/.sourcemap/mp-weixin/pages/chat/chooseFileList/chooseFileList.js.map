{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chooseFileList/chooseFileList.vue?c17a","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chooseFileList/chooseFileList.vue?fde9","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chooseFileList/chooseFileList.vue?813c","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chooseFileList/chooseFileList.vue?68fc","uni-app:///pages/chat/chooseFileList/chooseFileList.vue","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chooseFileList/chooseFileList.vue?f7cb","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chooseFileList/chooseFileList.vue?c5b4"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","chatGroupId","platFromType","pageNum","pageSize","winHeight","currentTab","subList","name","popCustomStyle","height","marginTop","textAlign","paddingRight","paddingLeft","backgroundColor","searchWords","sysFileList","chatFileList","chatSelectedFiles","sysSelectedFiles","scrollViewId","emptyMode","sendModalShowFlag","maxFileSize","onLoad","console","uni","that","onShow","methods","getServerFiles","sectionChange","selectedAndroidFile","plugin","count","fileObj","msg","searchChattingFiles","getChatFileList","prefixDir","nextMarker","param","chooseFile","index","j","chooseSysFile","sendFiles","i","setTimeout","item","sendSysFile","success","delta","animationType","animationDuration","fail","sendChattingFile","cancelSendFile","loadMore","downloadFile","urls","indicator","url","filePath","showMenu","error"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,uBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuI;AACvI;AACkE;AACL;AACsC;;;AAGnG;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,oQAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzFA;AAAA;AAAA;AAAA;AAAwmB,CAAgB,koBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCyI5nB;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MAEAC;MACAC;QACAC;MACA;QACAA;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACA;MACA;;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;IACA;IACA;MACA;MACAC;MACA;IACA;IACA;MACA;MACA;IACA;MACA;IACA;IACA;IACA;IACA;IACAC;IACAA;IACAA;IACAA;EACA;EACAC;IACA;IACAD;EACA;EACAE;IACA;IACAC;MAAA;MACA;QACA5B;QACAC;MACA;MACA;QACAsB;QACA;UACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAM;MACA;MACA;MACA;QACA;QACAJ;MACA;MACA;MAAA,KACA;QACAA;MACA;IACA;IAEA;IACAK;MAAA;MACA;MACAL;MACA;MACA;QACA;QACAM;UAAAC;QAAA;UACA;UACA;YACA;cACA;cACA;cACA;cACA;cACA;gBACA;gBACA;gBACA;cACA;cACA;cACA;gBACA;gBACAC;cACA;cACA;cACA;gBACAC;gBACAA;gBACAA;gBACAA;cACA,OACA;gBACAA;cACA,OACA;gBACAA;cACA;cACAA;cACA;cACA;cACA;cACA;cACA;cACAT;YACA;YACA;UACA;YACA;YACA;UACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAU;MACA;MACAV;MACA;MACA;IACA;IACA;IACAW;MAAA;MACA;MACAX;MACA;QACAY;QACAC;MACA;MACA;QACAC;MACA;MACAhB;MACA;QACAA;QACA;UACA;UACA;YACAE;YACAD;UACA;YACA;YACAA;UACA;UACAD;UACA;QACA;UACAC;QACA;MACA;QACAD;QACAC;MACA;IACA;IAEA;IACAgB;MACA;MACA;MACA;QACAC;UACA;QACA;MACA;MACA;QACA;QACA;MACA;MACAhB;MACA;MACA;QACA;UACAA;QACA;MACA;QACA;QACA;UACA;YACA;YACA;cACA;cACAiB;cACA;YACA;UACA;QACA;QACA;UACA;UACAjB;UACA;QACA;UACAA;QACA;MACA;IACA;IACA;IACAkB;MACA;MACA;MACA;QACAF;UACA;QACA;MACA;MACA;QACA;QACA;MACA;MACAhB;MACA;MACA;QACA;UACAA;QACA;MACA;QACA;QACA;UACA;YACA;YACA;cACA;cACAiB;cACA;YACA;UACA;QACA;QACA;UACA;UACAjB;UACA;QACA;UACAA;QACA;MACA;IACA;IACA;IACAmB;MAAA;MACA;MACA;MACA;MACA;QACAnB;QACA;MACA;MACA;MACA;QAAA;UACA;UACA;YACA;YACA;cAAA;YAAA;UACA;UACAF;UACA;UAAA,2BACAsB;YACAC;cACA;cACAC;cACAA;cACAtB;YACA;UAAA;UANA;YAAA;UAOA;QAAA;QAAA;MACA;IACA;IAEA;IACAuB;MACA;MACAvB;QACAc;QACAU;UACA;YACA;YACA;cACAL;cACA9C;YACA;YACA2B;cACA;gBACA;kBACA;oBACAD;sBACA0B;sBACAC;sBACAC;oBACA;kBACA,OACA;oBACA3B;kBACA;gBACA;cACA;gBACAA;gBACAF;cACA;YACA;UACA;UAAA;QACA;QACA8B;UACA5B;QACA;MACA;IACA;IAEA;IACA6B;MACA;MACA;MACA;QACA;UACAV;UACA9C;QACA;QACA2B;UACAD;UACA;YACA;cACAA;gBACA0B;gBACAC;gBACAC;cACA;YACA;UACA;YACA3B;YACA;UACA;QACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IAOA;IACA8B;MACA;MACA9B;IACA;IACA;IACA+B;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACA;MACA;MACA;QACA;QACAjC;UACAkC;UACAC;QACA;MACA;QACAnC;UACAoC;UACAX;YACA;YACAzB;cACAqC;cACAC;cACAb;gBACA1B;cACA;cACAwC;gBACAxC;gBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACvjBA;AAAA;AAAA;AAAA;AAA2qC,CAAgB,ipCAAG,EAAC,C;;;;;;;;;;;ACA/rC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chat/chooseFileList/chooseFileList.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chat/chooseFileList/chooseFileList.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chooseFileList.vue?vue&type=template&id=b10110de&scoped=true&\"\nvar renderjs\nimport script from \"./chooseFileList.vue?vue&type=script&lang=js&\"\nexport * from \"./chooseFileList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chooseFileList.vue?vue&type=style&index=0&id=b10110de&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b10110de\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/chooseFileList/chooseFileList.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chooseFileList.vue?vue&type=template&id=b10110de&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-navbar/u-navbar\" */ \"uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uSubsection: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-subsection/u-subsection\" */ \"uview-ui/components/u-subsection/u-subsection.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-empty/u-empty\" */ \"uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-modal/u-modal\" */ \"uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.currentTab === 0 ? _vm.chatSelectedFiles.length : null\n  var g1 = _vm.currentTab === 0 ? _vm.chatSelectedFiles.length : null\n  var g2 = _vm.currentTab === 1 ? _vm.sysSelectedFiles.length : null\n  var g3 = _vm.currentTab === 1 ? _vm.sysSelectedFiles.length : null\n  var g4 = _vm.currentTab === 0 && _vm.chatFileList.length > 0\n  var g5 = _vm.currentTab === 1 && _vm.sysFileList.length > 0\n  var g6 =\n    (_vm.chatFileList.length < 1 && _vm.currentTab === 0) ||\n    (_vm.currentTab === 1 && _vm.sysFileList.length < 1)\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.sendModalShowFlag = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.sendModalShowFlag = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chooseFileList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chooseFileList.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<u-navbar :is-back=\"true\" z-index=\"1001\">\r\n\t\t\t<view v-if=\"platFromType==1\" class=\"slot-content\" style=\"width: 100%;text-align: center;padding: 0rpx 40rpx;\">\r\n\t\t\t\t<u-subsection \r\n\t\t\t\t\t\t active-color=\"#2979ff\" \r\n\t\t\t\t\t\t:list=\"subList\" :current=\"currentTab\" @change=\"sectionChange\"></u-subsection>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"slot-content\" style=\"width: 100%;text-align: center;\">\r\n\t\t\t\t<text style=\"font-weight: bold; margin-right: 16rpx;font-size: 34rpx;color: #19be6b;\">聊天中的文件</text>\r\n\t\t\t</view>\r\n\t\t\t<view slot=\"right\" style=\"margin-right: 20rpx;\">\r\n\t\t\t\t<u-button v-if=\"currentTab===0\" @click=\"sendModalShowFlag=true\" size=\"mini\"\r\n\t\t\t\t\t:disabled=\"chatSelectedFiles.length<1\" type=\"success\"> 发送({{chatSelectedFiles.length}}/9)\r\n\t\t\t\t</u-button>\r\n\t\t\t\t<u-button v-if=\"currentTab===1\" @click=\"sendModalShowFlag=true\" size=\"mini\"\r\n\t\t\t\t\t:disabled=\"sysSelectedFiles.length<1\" type=\"success\"> 发送({{sysSelectedFiles.length}}/9) </u-button>\r\n\t\t\t</view>\r\n\t\t</u-navbar>\r\n\t\t\t<!-- 聊天中的文件 -->\r\n\t\t\t<scroll-view v-if=\"currentTab===0&&chatFileList.length > 0\" class=\"scrollList\" \r\n\t\t\t\t:scroll-y=\"true\" :scroll-x=\"false\" enable-back-to-top\r\n\t\t\t\t:scroll-into-view=\"scrollViewId\" @scrolltolower=\"loadMore()\" lower-threshold=\"10\"\r\n\t\t\t\t:style=\"'height:'+winHeight+'px'\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"flex_col\" v-for=\"(fileObj,key) in chatFileList\" :key=\"key\">\r\n\t\t\t\t\t\t<view style=\"text-align: center;\" @click=\"chooseFile(fileObj,key)\">\r\n\t\t\t\t\t\t\t<view v-show=\"fileObj.isChecked==true\">\r\n\t\t\t\t\t\t\t\t<image style=\"width: 40upx;height: 40upx;\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/radioCheck.png\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-show=\"fileObj.isChecked==false\">\r\n\t\t\t\t\t\t\t\t<image style=\"width: 40upx;height: 40upx;\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/radioNoCheck.png\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<image v-if=\"fileObj.fileSuffix === 'xls'\" src=\"@/static/image/fileType/xls.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='doc'\" src=\"@/static/image/fileType/docx.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='txt'\" src=\"@/static/image/fileType/txt.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='ppt'\" src=\"@/static/image/fileType/ppt.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='pdf'\" src=\"@/static/image/fileType/pdf.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='zip'\" src=\"@/static/image/fileType/zip.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='img'\" \r\n\t\t\t\t\t\t\t:src=\"fileObj.filePath?fileObj.filePath:fileObj.fileUrl\" \r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\t\r\n\t\t\t\t\t\t<image v-else src=\"@/static/image/fileType/unknowfile.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"flex_grow\"  @click=\"downloadFile(fileObj)\">\r\n\t\t\t\t\t\t\t<view class=\"flex_col\">\r\n\t\t\t\t\t\t\t\t<view class=\"flex_grow\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"info\" style=\"font-size: 32upx;color: rgba(74,74,74,1)\">\r\n\t\t\t\t\t\t\t\t\t\t{{fileObj.fileName==null?'未知':fileObj.fileName}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex_col\">\r\n\t\t\t\t\t\t\t\t<view class=\"fileSize\">{{fileObj.fileSize}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"uploadTime\">{{fileObj.createTime}}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view style=\"text-align: center;\" @click=\"downloadFile(fileObj)\">\r\n\t\t\t\t\t\t\t<u-icon name=\"eye-fill\" color=\"#19be6b\" size=\"44\"></u-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<!--系统中的文件列表-->\r\n\t\t\t<scroll-view v-if=\"currentTab===1&&sysFileList.length > 0\" class=\"scrollList\" \r\n\t\t\t\t:scroll-y=\"true\" :scroll-x=\"false\"\r\n\t\t\t\t:style=\"'height:'+winHeight+'px'\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"flex_col\" v-for=\"(fileObj,key) in sysFileList\" :key=\"key\">\r\n\t\t\t\t\t\t<view style=\"text-align: center;\" @click=\"chooseSysFile(fileObj,key)\">\r\n\t\t\t\t\t\t\t<view v-show=\"fileObj.isChecked===true\">\r\n\t\t\t\t\t\t\t\t<image style=\"width: 40upx;height: 40upx;\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/radioCheck.png\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-show=\"fileObj.isChecked===false\">\r\n\t\t\t\t\t\t\t\t<image style=\"width: 40upx;height: 40upx;\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/radioNoCheck.png\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<image v-if=\"fileObj.fileSuffix === 'xls'\" src=\"@/static/image/fileType/xls.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='doc'\" src=\"@/static/image/fileType/docx.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='txt'\" src=\"@/static/image/fileType/txt.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.type=='img'\" :src=\"fileObj.filePath\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix=='MP4'||fileObj.fileSuffix=='mp4'\"\r\n\t\t\t\t\t\t\tsrc=\"@/static/image/chat/bofang.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='ppt'\" src=\"@/static/image/fileType/ppt.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='pdf'\" src=\"@/static/image/fileType/pdf.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else-if=\"fileObj.fileSuffix==='zip'\" src=\"@/static/image/fileType/zip.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<image v-else src=\"@/static/image/fileType/unknowfile.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"flex_grow\">\r\n\t\t\t\t\t\t\t<view class=\"flex_col\">\r\n\t\t\t\t\t\t\t\t<view class=\"flex_grow\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"info\" style=\"font-size: 32upx;color: rgba(74,74,74,1)\">\r\n\t\t\t\t\t\t\t\t\t\t{{fileObj.fileName==null?'未知':fileObj.fileName}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex_col\">\r\n\t\t\t\t\t\t\t\t<view class=\"fileSize\">{{fileObj.fileSize}}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view style=\"text-align: center;\" @click=\"downloadFile(fileObj)\">\r\n\t\t\t\t\t\t\t<u-icon name=\"eye-fill\" color=\"#19be6b\" size=\"44\"></u-icon>\r\n\t\t\t\t\t\t\t<!--#19be6b-->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t<!--内容为空显示-->\r\n\t\t<view v-if=\"(chatFileList.length<1&&currentTab===0)||(currentTab===1&&sysFileList.length <1)\" class=\"data-empty\">\r\n\t\t\t<u-empty :mode=\"emptyMode\" icon-size=\"150\"></u-empty>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!--发送文件确认框-->\r\n\t\t<u-modal v-model=\"sendModalShowFlag\" content=\"是否确认发送文件到群聊天?\" :show-confirm-button=\"true\"\r\n\t\t\t:show-cancel-button=\"true\" @confirm=\"sendFiles\" @cancel=\"cancelSendFile\">\r\n\t\t</u-modal>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tchatGroupId:\"\",\r\n\t\t\t\tplatFromType:0, //0安卓以外其他 ,1安卓\r\n\t\t\t\tpageNum: 1,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\twinHeight: 0,\r\n\t\t\t\t\r\n\t\t\t\tcurrentTab:0,\r\n\t\t\t\tsubList: [{\r\n\t\t\t\t\tname: '聊天中的文件',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '手机系统文件',\r\n\t\t\t\t}],\r\n\t\t\t\tpopCustomStyle: {\r\n\t\t\t\t\theight: '210upx',\r\n\t\t\t\t\tmarginTop: '140upx',\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tpaddingRight: '20upx',\r\n\t\t\t\t\tpaddingLeft: '20upx',\r\n\t\t\t\t\tbackgroundColor: \"#f3f4f6\"\r\n\t\t\t\t\t//borderBottom:'1px solid red'\r\n\t\t\t\t},\r\n\t\t\t\t//搜索词\r\n\t\t\t\tsearchWords: '',\r\n\t\t\t\t//系统中的文件\r\n\t\t\t\tsysFileList: [],\r\n\t\t\t\t//文件列表\r\n\t\t\t\tchatFileList: [],\r\n\t\t\t\t//已经选择的聊天中的文件\r\n\t\t\t\tchatSelectedFiles: [],\r\n\t\t\t\t//已经选择的系统中的文件\r\n\t\t\t\tsysSelectedFiles: [],\r\n\t\t\t\t//列表锚点\r\n\t\t\t\tscrollViewId: '',\r\n\t\t\t\t//内容为空展示\r\n\t\t\t\temptyMode: 'list',\r\n\t\t\t\t//发送文件确认框标志\r\n\t\t\t\tsendModalShowFlag: false,\r\n\t\t\t\tmaxFileSize: 314572800,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tlet that = this;\r\n\t\t\tconsole.log(\"option==\", option);\r\n\t\t\tthis.chatGroupId= option.chatGroupId;\r\n\t\t\tif(this.chatGroupId==null||this.chatGroupId==undefined){\r\n\t\t\t\tthis.globalUtil.utilAlert(\"请选择群组!\");\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (uni.getSystemInfoSync().platform === \"android\") {\r\n\t\t\t\tthis.platFromType=1;\r\n\t\t\t\tthis.title=\"聊天中的文件\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.platFromType=0;\r\n\t\t\t}\t\r\n\t\t\tlet winHeight = uni.getSystemInfoSync().windowHeight;\r\n\t\t\tthis.winHeight = winHeight-90;\r\n\t\t\tlet currentUserId = that.vuex_userInfo.id;\r\n\t\t\tthat.sysFileList = [];\r\n\t\t\tthat.sysSelectedFiles = [];\r\n\t\t\tthat.chatFileList = [];\r\n\t\t\tthat.getServerFiles();\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.emptyMode = \"list\";\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/* 获取聊天中的文件 */\r\n\t\t\tgetServerFiles:function(){\r\n\t\t\t\tlet param={\r\n\t\t\t\t\tpageNum:1,\r\n\t\t\t\t\tpageSize:10\r\n\t\t\t\t};\r\n\t\t\t\tthis.$u.api.sys.getSysFiles(param).then(res => {\r\n\t\t\t\t\tconsole.log(\"获取文件列表结果\",res);\r\n\t\t\t\t\tif(res.code==200){\r\n\t\t\t\t\t\tlet list= res.data.records;\r\n\t\t\t\t\t\tif(list!=null&&list.length>0){\r\n\t\t\t\t\t\t\tthis.chatFileList=list;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\t\r\n\t\t\t},\r\n\t\t\t//切换方式\r\n\t\t\tsectionChange(index) {\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tthis.currentTab = index;\r\n\t\t\t\tif(this.currentTab==1){\r\n\t\t\t\t\t//系统文件\r\n\t\t\t\t\tthat.selectedAndroidFile();\r\n\t\t\t\t}\r\n\t\t\t\t//聊天中个文件\r\n\t\t\t\telse{\r\n\t\t\t\t\tthat.getServerFiles();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//选择文件类型\r\n\t\t\tselectedAndroidFile: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.sysFileList=[];\r\n\t\t\t\t//读取手机内存文件\r\n\t\t\t\tif (uni.getSystemInfoSync().platform === \"android\") {\r\n\t\t\t\t\tconst plugin = uni.requireNativePlugin('GuoWei-SelectFileModule');\r\n\t\t\t\t\tplugin.chooseFile({count: 10}, result => {\r\n\t\t\t\t\t\tlet filePathArr = result.files;\r\n\t\t\t\t\t\tif (filePathArr&&filePathArr.length > 0) {\r\n\t\t\t\t\t\t\tfor (let i = 0; i < filePathArr.length; i++) {\r\n\t\t\t\t\t\t\t\tlet fileObj = filePathArr[i];\r\n\t\t\t\t\t\t\t\tlet fileSuffix = fileObj.suffix.slice(1, fileObj.suffix.length);\r\n\t\t\t\t\t\t\t\tlet filePath = fileObj.url;\r\n\t\t\t\t\t\t\t\tlet name = fileObj.name;\r\n\t\t\t\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\t\t\t\t\"fileSuffix\": fileSuffix,\r\n\t\t\t\t\t\t\t\t\t\"fileName\": name,\r\n\t\t\t\t\t\t\t\t\t\"filePath\": filePath\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tlet size=fileObj.size;\r\n\t\t\t\t\t\t\t\tif(size){\r\n\t\t\t\t\t\t\t\t\tlet fileSize= this.globalUtil.byteConvert(size);\r\n\t\t\t\t\t\t\t\t\tfileObj.fileSize=fileSize;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlet suffix=fileSuffix.toString().toUpperCase();\r\n\t\t\t\t\t\t\t\tif (suffix == \"JPG\" || suffix ==\"JPEG\" ||suffix == \"PNG\" ||  suffix == \"GIF\") {\r\n\t\t\t\t\t\t\t\t\tmsg.type = \"img\";\r\n\t\t\t\t\t\t\t\t\tmsg.width = 350;\r\n\t\t\t\t\t\t\t\t\tmsg.height = 350;\r\n\t\t\t\t\t\t\t\t\tmsg.fileType=\"img\";\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\telse if(suffix==\"ZIP\"||fileSuffix==\"RAR\"){\r\n\t\t\t\t\t\t\t\t\tmsg.fileType=\"ZIP\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tmsg.type = \"file\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tmsg.isChecked=false;\r\n\t\t\t\t\t\t\t\tlet param=Object.assign(fileObj,msg);\r\n\t\t\t\t\t\t\t\tdelete param.url;\r\n\t\t\t\t\t\t\t\tdelete param.suffix;\r\n\t\t\t\t\t\t\t\tdelete param.name;\r\n\t\t\t\t\t\t\t\t//console.log(\"fileObj\",param);\r\n\t\t\t\t\t\t\t\tthat.sysFileList.push(param);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//console.log(\"sysFileList\",that.sysFileList)\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tthis.globalUtil.utilAlert(\"没有选中的文件!\", \"none\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"系统不支持!\", \"warning\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//搜索聊天中的文件\r\n\t\t\tsearchChattingFiles: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.emptyMode = \"search\";\r\n\t\t\t\tlet searchWords = that.searchWords;\r\n\t\t\t\tlet currentUserId = that.vuex_userInfo.id;\r\n\t\t\t},\r\n\t\t\t//获取聊天中的文件(阿里云)\r\n\t\t\tgetChatFileList:function(){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tthat.chatFileList = [];\r\n\t\t\t\tlet param={\r\n\t\t\t\t\tprefixDir:'chattingFiles/2022/05',\t\r\n\t\t\t\t\tnextMarker:'',\r\n\t\t\t\t};\r\n\t\t\t\tif(that.chatFileList.length>0){\r\n\t\t\t\t\tparam.nextMarker=that.chatFileList[that.chatFileList.length-1].id;\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"获取聊天中的文件的参数\",param);\r\n\t\t\t\tthis.$u.api.sys.getChatFileList(param).then(res => {\r\n\t\t\t\t\tconsole.log(\"聊天中的文件\",res);\r\n\t\t\t\t\tif (res != null && res.data != null && res.code === 200) {\r\n\t\t\t\t\t\tlet list = res.data;\r\n\t\t\t\t\t\tif (list.length > 0) {\r\n\t\t\t\t\t\t\tthat.chatFileList = that.chatFileList.concat(list);\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.globalUtil.utilAlert(\"暂无更多记录!\", \"warning\");\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(\"聊天中的文件列表\", that.chatFileList);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(res => {\r\n\t\t\t\t\tconsole.log(\"获取群聊文件出发异常\", res);\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//选择聊天中的文件\r\n\t\t\tchooseFile: function(fileObj, key) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet index;\r\n\t\t\t\tif (that.chatSelectedFiles.length >= 9) {\r\n\t\t\t\t\tindex = that.chatSelectedFiles.findIndex(function(obj) {\r\n\t\t\t\t\t\treturn obj.id === fileObj.id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"最多能勾选9个\", 'warning');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.chatFileList[key].isChecked = !this.chatFileList[key].isChecked;\r\n\t\t\t\t//如果选中的列表为空,并且当前点击的文件isChecked等于true,就放入已选择的列表中\r\n\t\t\t\tif (that.chatSelectedFiles.length === 0) {\r\n\t\t\t\t\tif (fileObj.isChecked === true) {\r\n\t\t\t\t\t\tthat.chatSelectedFiles.push(fileObj);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet j = -1;\r\n\t\t\t\t\tfor (let i = 0; i < that.chatSelectedFiles.length; i++) {\r\n\t\t\t\t\t\tif (fileObj.id === that.chatSelectedFiles[i].id) {\r\n\t\t\t\t\t\t\t//当存在，再次点击说明需要取消选中\r\n\t\t\t\t\t\t\tif (fileObj.isChecked === false) {\r\n\t\t\t\t\t\t\t\t//说明是选中的状态\r\n\t\t\t\t\t\t\t\tj = i;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (j !== -1) {\r\n\t\t\t\t\t\t//表示先获取这个元素的下标，然后从这个下标开始计算，删除长度为1的元素\r\n\t\t\t\t\t\tthat.chatSelectedFiles.splice(j, 1);\r\n\t\t\t\t\t\t// this.chatSelectedFiles.pop(j);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.chatSelectedFiles.push(fileObj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//选择系统中的文件\r\n\t\t\tchooseSysFile: function(fileObj, key) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet index;\r\n\t\t\t\tif (that.sysSelectedFiles.length >= 9) {\r\n\t\t\t\t\tindex = that.sysSelectedFiles.findIndex(function(obj) {\r\n\t\t\t\t\t\treturn obj.fileName === fileObj.fileName\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"最多能勾选9个\", 'warning');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.sysFileList[key].isChecked = !this.sysFileList[key].isChecked;\r\n\t\t\t\t//如果选中的列表为空,并且当前点击的文件isChecked等于true,就放入已选择的列表中\r\n\t\t\t\tif (that.sysSelectedFiles.length === 0) {\r\n\t\t\t\t\tif (fileObj.isChecked === true) {\r\n\t\t\t\t\t\tthat.sysSelectedFiles.push(fileObj);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet j = -1;\r\n\t\t\t\t\tfor (let i = 0; i < that.sysSelectedFiles.length; i++) {\r\n\t\t\t\t\t\tif (fileObj.fileName === that.sysSelectedFiles[i].fileName) {\r\n\t\t\t\t\t\t\t//当存在，再次点击说明需要取消选中\r\n\t\t\t\t\t\t\tif (fileObj.isChecked === false) {\r\n\t\t\t\t\t\t\t\t//说明是选中的状态\r\n\t\t\t\t\t\t\t\tj = i;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (j !== -1) {\r\n\t\t\t\t\t\t//表示先获取这个元素的下标，然后从这个下标开始计算，删除长度为1的元素\r\n\t\t\t\t\t\tthat.sysSelectedFiles.splice(j, 1);\r\n\t\t\t\t\t\t// this.chatSelectedFiles.pop(j);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.sysSelectedFiles.push(fileObj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//发送文件\r\n\t\t\tsendFiles: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet sendFiles = [];\r\n\t\t\t\t//发送聊天中的文件\r\n\t\t\t\tif (that.currentTab === 0) {\r\n\t\t\t\t\tthat.sendChattingFile();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//发送系统文件\r\n\t\t\t\tif (that.currentTab === 1) {\r\n\t\t\t\t\tlet\tsendFiles = that.sysFileList;\r\n\t\t\t\t\tif(sendFiles.length<1) {\r\n\t\t\t\t\t\tthis.globalUtil.utilAlert(\"发送文件为空!\", \"error\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(\"发送系统文件\",sendFiles);\r\n\t\t\t\t\tlet sum=sendFiles.length-1;\r\n\t\t\t\t\tfor (let i = 0; i < sendFiles.length; i++) {\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tlet item=sendFiles[i];\r\n\t\t\t\t\t\t\titem.type=\"file\";\r\n\t\t\t\t\t\t\titem.savePath=\"/chattingFiles\";\r\n\t\t\t\t\t\t\tthat.sendSysFile(item,i,sum);\r\n\t\t\t\t\t\t},500);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/*发送手机文件*/\r\n\t\t \tsendSysFile:function(item,index,max){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tthat.globalUtil.globalUpload(that,{\r\n\t\t\t\t\tparam:item,\r\n\t\t\t\t\tsuccess: (res1) => {\r\n\t\t\t\t\t\tif(res1.code==1){\r\n\t\t\t\t\t\t\t//console.log(\"上传文件结果\",res1);\r\n\t\t\t\t\t\t\tlet param={\r\n\t\t\t\t\t\t\t\tsendFiles:[res1.result],\r\n\t\t\t\t\t\t\t\tchatGroupId:that.chatGroupId\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthat.$u.api.chatGroup.sendGroupFile(param).then(res => {\r\n\t\t\t\t\t\t\t\tif(res.code==200){\r\n\t\t\t\t\t\t\t\t\tif(res.data>0){\r\n\t\t\t\t\t\t\t\t\t\tif(index==max){\r\n\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\tanimationType: 'pop-out',\r\n\t\t\t\t\t\t\t\t\t\t\t\tanimationDuration: 200\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"第\"+(index+1)+\"份文件发送完成\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"第\"+(index+1)+\"份文件发送失败\");\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"发送失败\",res.message);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:(res1) => {\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"第\"+(index+0)+\"份上传文件失败!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/*发送聊天中的文件*/\r\n\t\t\tsendChattingFile:function(){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet\tsendFiles = that.chatSelectedFiles;\r\n\t\t\t\tif (sendFiles.length > 0 && sendFiles.length < 10) {\r\n\t\t\t\t\tlet param={\r\n\t\t\t\t\t\tsendFiles:sendFiles,\r\n\t\t\t\t\t\tchatGroupId:that.chatGroupId\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthat.$u.api.chatGroup.sendGroupFile(param).then(res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif(res.code==200){\r\n\t\t\t\t\t\t\tif(res.data>0){\r\n\t\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\t\t\t\t\tanimationType: 'pop-out',\r\n\t\t\t\t\t\t\t\t\tanimationDuration: 200\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.globalUtil.utilAlert(res.message);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (sendFiles.length > 9) {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"最多能选择9个!\", \"warning\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"发送文件为空!\", \"error\");\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//取消发送\r\n\t\t\tcancelSendFile: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.sendModalShowFlag = false;\r\n\t\t\t},\r\n\t\t\t//下拉翻页加载列表\r\n\t\t\tloadMore: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t},\r\n\t\t\t//下载并打开文件\r\n\t\t\tdownloadFile: function(fileItem) {\r\n\t\t\t\tlet fileSuffix = fileItem.fileSuffix;\r\n\t\t\t\tlet fileType=fileItem.fileType;\r\n\t\t\t\tlet fileUrl = fileItem.fileUrl == null ? fileItem.url : fileItem.fileUrl;\r\n\t\t\t\tif (fileUrl.length < 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (fileSuffix === \"img\"||fileType==1) {\r\n\t\t\t\t\t// 预览图片\r\n\t\t\t\t\tuni.previewImage({\r\n\t\t\t\t\t\turls: [fileUrl],\r\n\t\t\t\t\t\tindicator: \"none\"\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t  url: fileUrl,\r\n\t\t\t\t\t  success: function (res) {\r\n\t\t\t\t\t    var filePath = res.tempFilePath;\r\n\t\t\t\t\t    uni.openDocument({\r\n\t\t\t\t\t      filePath: filePath,\r\n\t\t\t\t\t      showMenu: true,\r\n\t\t\t\t\t      success: function (res) {\r\n\t\t\t\t\t        console.log('打开文档成功');\r\n\t\t\t\t\t      },\r\n\t\t\t\t\t\t  error:function(error){\r\n\t\t\t\t\t\t\t  console.log(\"文件打开失败\",error);\r\n\t\t\t\t\t\t\t  this.globalUtil.utilAlert(\"暂不支持查看\");\r\n\t\t\t\t\t\t\t  return;\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t    });\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.container {\r\n\t\t.slot-wrap {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t}\r\n\r\n\t\t.scrollList {\r\n\t\t\t//border: 1px solid red;\r\n\t\t\t::-webkit-scrollbar{\r\n\t\t\t\tdisplay: none;\r\n\t\t\t\theight: 0;\r\n\t\t\t\twidth: 0;\r\n\t\t\t}\r\n\t\t\t/* 列表 */\r\n\t\t\t.list {\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tfont-size: 28upx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tuser-select: none;\r\n\t\t\t\ttouch-callout: none;\r\n\r\n\t\t\t\t&>view {\r\n\t\t\t\t\tpadding: 24upx 30upx;\r\n\t\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t\t&:active,\r\n\t\t\t\t\t&.active {\r\n\t\t\t\t\t\tbackground-color: #f3f3f3;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\theight: 80upx;\r\n\t\t\t\t\t\twidth: 80upx;\r\n\t\t\t\t\t\tborder-radius: 4px;\r\n\t\t\t\t\t\tmargin-right: 20upx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&>view {\r\n\t\t\t\t\t\tline-height: 50upx;\r\n\r\n\t\t\t\t\t\t.time,\r\n\t\t\t\t\t\t.info {\r\n\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\tfont-size: 24upx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.time {\r\n\t\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.info {\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&>view:not(:first-child) {\r\n\t\t\t\t\tmargin-top: 1px;\r\n\r\n\t\t\t\t\t&::after {\r\n\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\theight: 0;\r\n\t\t\t\t\t\tborder-top: #CCC solid 1px;\r\n\t\t\t\t\t\twidth: 620upx;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\ttop: -1px;\r\n\t\t\t\t\t\tright: 0;\r\n\t\t\t\t\t\ttransform: scaleY(0.5);\r\n\t\t\t\t\t\t/* 1px像素 */\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/* 列式弹性盒子 */\r\n\t\t\t.flex_col {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\tflex-wrap: nowrap;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\talign-content: center;\r\n\t\t\t}\r\n\r\n\t\t\t/* 弹性盒子弹性容器 */\r\n\t\t\t.flex_col .flex_grow {\r\n\t\t\t\twidth: 0;\r\n\t\t\t\t-webkit-box-flex: 1;\r\n\t\t\t\t-ms-flex-positive: 1;\r\n\t\t\t\tflex-grow: 1;\r\n\t\t\t}\r\n\r\n\t\t\t.flex_row .flex_grow {\r\n\t\t\t\t-webkit-box-flex: 1;\r\n\t\t\t\t-ms-flex-positive: 1;\r\n\t\t\t\tflex-grow: 1;\r\n\t\t\t}\r\n\r\n\t\t\t/* 弹性盒子允许换行 */\r\n\t\t\t.flex_col.flex_wrap {\r\n\t\t\t\t-ms-flex-wrap: wrap;\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t}\r\n\r\n\t\t\t.fileSize {\r\n\t\t\t\twidth: 30%;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\tmargin-right: 30upx;\r\n\t\t\t\tcolor: #D8D8D8;\r\n\t\t\t}\r\n\r\n\t\t\t.uploadTime {\r\n\t\t\t\twidth: 60%;\r\n\t\t\t\ttext-align: right;\r\n\t\t\t\tmargin-right: 10upx;\r\n\t\t\t\tcolor: #D8D8D8;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\t.data-empty{\r\n\t\t    min-height: 600rpx;\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chooseFileList.vue?vue&type=style&index=0&id=b10110de&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chooseFileList.vue?vue&type=style&index=0&id=b10110de&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682612669681\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}