{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?70d9","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?8516","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?a7a2","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?fc41","uni-app:///pages/chat/chatGroup/chatting.vue","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/uni_modules/ls-loading/components/ls-loading/ls-loading.vue?29e5","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/uni_modules/ls-loading/components/ls-loading/ls-loading.vue?05c0","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/uni_modules/ls-loading/components/ls-loading/ls-loading.vue?e92b","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/uni_modules/ls-loading/components/ls-loading/ls-loading.vue?9df4","uni-app:///uni_modules/ls-loading/components/ls-loading/ls-loading.vue","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/uni_modules/ls-loading/components/ls-loading/ls-loading.vue?bdcf","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/uni_modules/ls-loading/components/ls-loading/ls-loading.vue?0f2f","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?9838","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?072f","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?7cf1","webpack:///C:/Users/maxiaozha/Documents/HBuilderProjects/仿微信聊天app/pages/chat/chatGroup/chatting.vue?e92e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","chunLeiPopups","qrInfoPop","videoPlayer","data","timmer","reConnTips","reConntask","reconnFlag","noClick","platos","socketTask","currentChatGroup","id","chatGroupName","wsOnlion","forbidFlag","pageNum","pageSize","messageList","scrollAnimation","scrollIntoView","loadingmMore","loadingMsg","chatType","customSendBtnStyle","padding","sendStr","Recorder","Audio","recording","isStopVoice","voiceInterval","voiceTime","canSend","PointY","voiceIconText","voiceTitle","AudioExam","showFunBtn","showEmojiBox","funList","icon","title","uploadType","addressObj","chooseFlag","showFileRemark","sendLoading","fileRemarkObj","showFlag","tag","fileInfo","inputFocusFlag","windowHeight","scrollViewHeight","faceList","faceMap","connError","toolTipFlag","toolTipData","toolTipX","toolTipY","currentHandleMsg","delPopUpObj","isShow","param","currentRedBag","showRedPopFlag","receiveRedBagList","qrModelFlag","qrModelInfo","previewVideoFlag","previewVideoSrc","videoMsgFlag","autoBackToBottom","created","previewSrcArr","watch","that","setTimeout","onReady","uni","onLoad","clearInterval","onShow","onHide","onUnload","onBackPress","methods","customBack","url","type","toGroupDetail","chatGroupId","chatGroupType","params","getChatGroupInfo","console","closeWebScoket","success","fail","reconnect","initWebScoket","clearTimeout","sendPingPong","getHistoryMessage","length","loadMoreHistoryMsg","showToolTip","disabled","tapPopup","content","error","duration","msgList","sendType","fromChatGroupId","groupId","selectMsgId","revertMsg","delPopConfirm","delPopCancel","startVoice","format","beginVoice","moveVoice","endVoice","cancelVoice","handleRecorder","tempFilePath","filePath","uploadUrl","contentDuration","handleAudio","playAudio","item","stopAudio","closeAnmition","addEmoji","onBlur","confirmSendText","sendText","delSendStr","replaceEmoji","replaceReseverEmoji","sendMsg","messageType","fromUserId","platFrom","contentType","msgToScreen","msgFromServer","contentObj","delIndex","parseContent","parseVideoContent","formatComponetContent","showNotice","parseShowTime","transformContent","message","parseImgSize","height","width","switchChatType","permission","changeDrawer","changeEmojiBox","scrollViewScrolling","hideDrawer","clickGrid","animationType","currentChatGroupId","launchSingleCalling","remoteUserIds","onError","onCallReceived","onCallCancelled","onCallBegin","onCallEnd","result","callRole","roomID","totalTime","targetUserID","sendLocation","resetComponentInfo","chooseImage","count","sizeType","src","image","confirmText","cancelText","chooseVideo","sourceType","compressed","video","sendVideoMsg","savePath","mask","complete","obj","sendComponentMsg","textDesc","chooseFile","uploadFile","name","header","msg","isSuccess","confirmColor","cancelColor","uploadTask","sizeError","openLocation","latitude","longitude","address","showTimeJudge","openRedBag","openSingleGroupRedBag","isReceive","openGroupRedBag","userId","showRedPop","previewFile","urls","showMenu","showPic","longPressActions","itemList","current","loop","boFangVideo","stopPlayVideo","showPersonalInfo","groupUserId","friendId","newFriendInfo","fromPage","formatForwardUserInfo","parseChatRecordTitle","titleSet","parseChatRecord","text","str","openChatRecord","chatRecordContentObj","navbarTitle","showUserInfoFromForward","closeAdvFlag","hiddenFlag","loginOut","closeQRModel","saveLocal","combLoader","riseLoader","progressLoader","jumpLoader","props","nav","default","tab","embed","fontSize","animation","underColor","highlightColor","topSize","computed","bottomSize","defThouch","defMove"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;AACzB;;;AAGpE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,iPAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,6PAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,+IAEN;AACP,KAAK;AACL;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,YAAY,kBAAkB,WAAW;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,YAAY,kBAAkB,WAAW;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mBAAO,CAAC,6BAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mBAAO,CAAC,gCAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,6BAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,2BAAkB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACziBA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,4nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACmhBtnB;AACA;AAEA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AALA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAQA;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;QACAC;MACA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;QACA5B;QACA6B;QACAC;QACAC;MACA,GACA;QACA/B;QACA6B;QACAC;QACAC;MACA,GACA;QACA/B;QACA6B;QACAC;MACA,GACA;QACA9B;QACA6B;QACAC;MACA,GACA;QACA9B;QACA6B;QACAC;MACA,GACA;QACA9B;QACA6B;QACAC;MACA,GACA;QACA9B;QACA6B;QACAC;MACA,GACA;QACA9B;QACA6B;QACAC;QACAC;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aATA,CAUA;;MACAC;QACAC;MACA;MACAC;MACAC;MACA;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EACAC;IACA;IACA;IACA;IACA;MACA;IACA;MACA;IACA;IACAC;EACA;EACAC;IACAvB;MACA;MACA;QACAwB;QACA;QACAA;QACAC;UACAD;UACAA;UACA;QACA;MACA;IACA;IACA5D;MACA;MACA;MACA;IACA;EACA;EACA;EACA8D;IAAA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;MACA;MACA;MAAA,KACA;QACA;UACA;QACA;MACA;IACA;EACA;EAGA;EACAC;IAAA;IACAN;IACA;IACA;IACA;IACA;IACA;IACA;IACA;MAEA;IACA;IACA;IACA;MACAO;MACA;IACA;;IAEA;IACA;MACA;IACA;;IAEA;IACA;MACA;IACA;EACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAP;EACA;EACAQ;IACA;IACAR;IACAA;IACAA;IACAF;EACA;EACA;EACAW;IACA;IACA;EACA;EAEAC;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;MACA;MACA;QACA;UACAC;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAd;QACA;MACA;MACA;QACAe;QACAC;MACA;MACAhB;QACAY;QACAK;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACAH;MACA;MACAf;QACA;UACA;UACAA;UACA;YACA;UACA;YACA;UACA;UACA;UACA;YACAmB;YACAnB;UACA;QACA;UACAA;UACA;QACA;MACA;IACA;IACA;IACAoB;MACA;MACA;QACAD;QACAd;MACA;MAAA;MACAL;MACA;QACA;MACA;MACAA;QACAqB;UACArB;UACAmB;QACA;QACAG;UACAH;QACA;MACA;IACA;IACA;IACAI;MACA;MACA;QACAvB;QACA;MACA;MACAA;MACAA;QACAA;QACAA;QACAA;MACA;IACA;IACA;IACAwB;MACA;MACA;MACA;MACA;MACAxB;MACAmB;MACAnB;QACAY;QACAS;UACAF;QACA;MACA;MACAnB;QACAmB;QACAnB;QACAA;QACA;UACAA;UACAA;UACAA;UACAA;UACAA;UACAyB;QACA;QACAtB;QACAH;UACA;YACA;UAAA,CACA;YACA;YACA;YACAA;YACAA;UACA;QACA;MACA;MACAA;QACAmB;QACAnB;QACA;QACAG;QACAH;QACAC;UACAD;QACA;MACA;MACAA;QACAmB;QACAnB;MACA;IACA;IACA0B;MACA;MACA1B;QACA;UACAA;YACA3E;YACAgG;cACA;YAAA,CACA;YACAC;cACA;YAAA;UAEA;QACA;MACA;IACA;IACA;IACAK;MACA;MACA3B;MACAA;MACA;QACAe;QACA7E;QACAC;MACA;MACA6D;QACA;UACA;UACA;YACA;cACA;cACA;gBACA3E;cACA;YACA;YACA;YACA2E;YACA;YACAC;cACAD,iEACA4B,SACA;cACAzB;YACA;UACA;QACA;UACAH;UACAG;UACA;QACA;MACA;IACA;IACA;IACA0B;MACA;MACA;MACA;QACA7B;QACAmB;QACA;MACA;MACAnB;MACA;QACAe;QACA7E;QACAC;MACA;MACAgF;MACA;MACAnB;MACAA;QACA;UACA;UACA;YACA;cACA;cACA;gBACA3E;cACA;YACA;YACA;YACA2E;YACAC;cACAD;cACAC;gBACAD;cACA;YACA;UACA;YACAA;YACAA;YACA;UACA;QACA;UACAA;UACAA;UACA;UACA;QACA;MACA;IACA;IACA;IACA8B;MACA;QACA;MACA;MACA;MACA;MACA;MACA;MACAX;MACA;MACA;MACA;QACA;UACArF;UACA6B;UACAC;UACAmE;QACA,GACA;UACAjG;UACA6B;UACAC;UACAmE;QACA,GACA;UACAjG;UACA6B;UACAC;UACAmE;QACA,GACA;UACAjG;UACA6B;UACAC;UACAmE;QACA,EACA;QACA;MACA;QACA;QACA;QACA;QACAZ;QACA;QACA;QACA;UACAA;UACA;YACArF;YACA6B;YACAC;YACAmE;UACA,GACA;YACAjG;YACA6B;YACAC;YACAmE;UACA,GACA;YACAjG;YACA6B;YACAC;YACAmE;UACA,GACA;YACAjG;YACA6B;YACAC;YACAmE;UACA;UACA,8EACA;;UACA;QACA;UACA;YACAjG;YACA6B;YACAC;YACAmE;UACA,GACA;YACAjG;YACA6B;YACAC;YACAmE;UACA,GACA;YACAjG;YACA6B;YACAC;YACAmE;UACA,GACA;YACAjG;YACA6B;YACAC;YACAmE;UACA,GACA;YACAjG;YACA6B;YACAC;YACAmE;UACA,EACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACAb;MACA;MACA;QACAnB;MACA;MACA;QACA;QACA;UACA;UACAmB;UACA;UACAA;UACAnB;YACAiC;YACAZ;cACAlB;gBACAvC;gBACAD;cACA;YACA;YACAuE;cACA/B;gBACAvC;gBACAD;gBACAwE;cACA;YACA;UACA;QACA;QACAnC;QACA;MACA;MACA;QACAA;QACAA;UACAY;UACAK;YACAmB;YACAC;YAAA;YACAC;UACA;QACA;QACA;MACA;MACA;QACAtC;QACAA;UACAY;UACAK;YACAsB;YACArG;YACAsG;UACA;QACA;QACA;MACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACAzC;MACAA;MACAA;IACA;IAEA0C;MACA;MACAvB;MACAnB;QACAmB;QACA;UACAA;QACA;UACAnB;UACAG;UACA;QACA;MACA;MACAF;QACAD;MACA;IAEA;IAEA2C;MACA;MACA3C;MACAA;MACAA;MACAA;IACA;IAEA;IACA;IACA4C;MACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAC;MACA;IACA;IACA;IACAC;MACA;MACA;QACA9C;QACA;MACA;MACAA;MACAA;QACAmB;QACA;UACAnB;QACA;QAAA;QACA;UACAK;UACAL;QACA;QACAA;MACA;IACA;IACA;IACA+C;MACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA9B;MACA;MACA;MACA;MACA;IACA;IACA;IACA+B,8CAGA;MAAA;MAAA,IAFAC;QACAhB;MAEA;QACA;QACAlC;UACA;QACA;QACA;MACA;MACA;MACA;MACA;MACAI;MACA;MACA;MACA;MACA;MACA;QACAQ;QAAA;QACAuC;QACAC;QACAC;MACA;MACAnC;MACA;QACA;QACA;MACA;QACAA;QACA;MACA;IACA;IACA;IACAoC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACAC;IACA;IACA;IACAC;MACAD;MACA;MACA;IACA;IACA;IACAE;MACA;MACA;QAAA;MAAA;MACAF;IACA;IACA;IACA;IACAG;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA1C;MACA;QACAhB;UACAvC;UACAyD;YACA;cACArB;cACAA;YACA;cACAmB;YACA;UACA;QACA;MACA;IACA;IAGA2C;MACA;MACA9D;IACA;IAEA;IACA+D;MACA;MACA;QACA5D;QACAH;QACA;MACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;MACA;QAEAA;MACA;QACAA;MACA;IACA;IAGAgE;MACA;QACA;MACA;IACA;IAEAC;MAAA;MACA;QACA;UACA;UACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;cACA9C;cACA;YACA;UACA;QACA;MACA;MACA;MACA;IACA;IAEA+C;MACA;QACA;QACA;MACA;MACA/C;MACA;IACA;IAEA;IACAgD;MACA;MACAnE;MACAA;QACA;QACA;UACA;YACAoE;YAAA;YACAC;YAAA;YACAtD;YAAA;YACAuD;YAAA;YACAC;YAAA;YACAtC;UACA;UACA;YACAjC;cACA3E;cACAgG;gBACAF;gBACAnB;cACA;cACAsB;gBACAtB;gBACAA;cACA;YACA;UACA;YACAmB;YACA;cACAnB;cACAA;cACA;YACA;YACAA;YACAA;YACAA;YACA;UACA;QACA;UACAA;UACAA;UACA;QACA;MACA;IACA;IACA;IACA;IACAwE;MACA;MACA;QACA;QACArD;QACA;QACA;UACAnB;UACAA;UACAA;YACAY;YACAC;UACA;UACA;QACA;QACA;UACA4D;QACA;QACAA;QACA;QACA;UACAzE;QACA;QACA;QACA;QACA;QACA;UACA;UACA;UACAmB;UACA;YACAuD;YACAD;YACAzE;YACAA;YACAA;UACA;UACA;UACA;YACAmB;YACAnB;YACA;YACA;YACA;cACAA;gBACA;gBACA;kBACAmB;kBACAsC;gBACA;cACA;YACA;UACA;UACA;UACA;YACA;YACA;YACAtC;YACA;cACA;cACA;gBACAwD;cACA;YACA;YACA;cACA3E;YACA;YACA;YACAyE;YACAA;YACAzE;UACA;UACA;UACA;YACAmB;YACAnB;YACA;YACA;cACAA;YACA;UACA;UACA;YACAmB;YACAnB;YACAA;UACA;QACA;UACA;UACAyE;UACAzE;UACAA;QACA;QACA;QACA;QACA;UACAA;QACA;QACA;UACA;UACA;YACAe;UACA;UACAf;YACA;cACA;cACAA;cACA;gBACAA;cACA;gBACAA;cACA;YACA;cACAA;cACA;YACA;UACA;QACA;;QAEA;UACAA;YACAC;cACAD;cACAmB;YACA;UACA;QACA;;QAEA;AACA;AACA;AACA;AACA;AACA;MACA;IACA;;IACA;IACAyD;MACA;MACA;MACA;MACA;QACA;QACA;UACA;UACAnB;QACA;QACA;QACA;QACA;QACA;QACA;UACA;YACA;UACA;YACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;YACA;cACA;YACA;UACA;YACA;cACA;YACA;cACA;YACA;UACA;QACA;QACA;UACA;UACA;QACA,OACA;UACA;UACA;QACA;MACA;MACA;MAAA,KACA;QACA;QACA;QACA;UACA;QACA;QACA;QACA;UACA;YACA3D;UACA;UAAA;UACAE;QACA;QACA;MACA;QACA;QACA;QACA;UACA;QACA;QAAA;QACA;QACA;QACA;UACAA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;IACA;IAEA6E;MACA;MACA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;QACA;QACA;MACA;MACA;QACA;QACA;UACA;UACA;YACA;UACA;YACA;UACA;QACA;QACA;UACA;UACA;YACAhF;UACA;UAAA;UACA;QACA;MAEA;IACA;IAEAiF;MACA;MACA5D;IACA;IAEA6D;MACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;MACA;IAEA;;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAP;MACAQ;IACA;IAIAC;MACA;QACA;QACA;UACAC;UACA;QACA;;QACA;UACA;QACA;UACA;QACA;MACA;QACA;QACA;UACAC;UACA;QACA;;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAtF;QACA;MACA;MACA;MACA;MACA;QACA;QACAA;MACA;MACA;MACA;QACA;QACAA;MACA;MACA;QACA;MACA;QACA;UACAuF;QACA;UACAA;QACA;MACA;IACA;IACA;IACAC;MACA;MACAxF;MACAA;MACAG;MACA;QACAH;MACA;QACAA;MACA;IACA;IACA;IACAyF;MACA;MACAzF;MACAA;MACAG;MACA;QACA;QACAH;MACA;QACAA;MACA;IACA;IACA0F;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAxF;QACA;QACA;MACA;MACA;QACAA;QACA;QACA;MACA;IACA;IACA;IACAyF;MACA;MACA;QACA5F;QACA;MACA;MACA;MACAA;MACA;MACAA;MACAA;MACAA;MACA;QACA;MACA;QACA;MACA;QACA;QACA;UACAA;UACA;QACA;UACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;QACA;MACA;QACAmB;QACA;QACA;QACAhB;UACAkB;YACArB;YACAA;YACAA;UACA;UACAsB;YACAtB;YACAA;UACA;QACA;QACA;MACA;QACA;QACA;UACA;YACAY;YACAK;cACAF;YACA;YACA8E;UACA;QACA;UACA;YACAjF;YACAK;cACApF;YACA;YACAgK;UACA;QACA;QACA;MACA;QACA;QACA;QACA;UACAjF;UACAK;YACA6E;UACA;UACAD;QACA;QACA;MACA;QACA1E;QACA;QACA;UACAnB;UACA;QACA;UACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;QACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACA+F;MAAA;MACA;MACA;MACA;MACA;QACAhF;MACA;MACAf;QACA;UACA;UACA;YACA;cACA;cACAgG;YACA;UACA;UACA7E;UACA;UACAnB;YACAiG;cACA9E;YACA;YACA+E;cACA/E;YACA;YACAgF;cACAhF;YACA;YACAiF;cACAjF;YACA;YACAkF;cACAlF;YACA;UACA;QACA;UACAnB;UACA;QACA;MACA;IACA;IAEAqG;MACA;MACA;MACA;MACA;QACAC;QACAC;MACA;QACAD;QACAC;MACA;MACA;QACA;UACAC;UACA3F;UAAA;UACA4F;UAAA;UACAC;UAAA;UACArC;UACAkC;QACA;;QACA;UACApH;UACAA;UACAA;UACAA;UACAA;UACAA;QACA;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;QACA;QACAgC;QACAnB;QACA;UACAA;UACAyB;QACA;QACA;MACA;IACA;;IAGA;IACAkF;MACA;MACAxF;MACAnB;IACA;IACA;IACA4G;MACA;MACA5G;MACAA;MACAA;IAEA;IACA;IACA6G;MAAA;MACA;MACA1G;QACA2G;QACAC;QAAA;QACA1F;UACA;YACAlB;cACA6G;cACA3F;gBACA4F;gBACAA;gBACA;gBACA;gBACA;gBACA;gBACAA;gBACA;gBACA;gBACA;kBACA;kBACAA;kBACAA;gBACA;gBACA;gBACA;kBACAhH;oBACAD;kBACA;gBACA;kBACA;kBACA;kBACAG;oBACAvC;oBACAsJ;oBACAC;oBACA9F;sBACA;wBACAF;wBACAnB;sBACA;wBACAA;wBACAA;wBACAA;wBACAA;sBACA;oBACA;kBACA;gBACA;gBACA;cACA;YACA;UACA;QACA;QACAsB;UACAH;QACA;MACA;IACA;IACA;IACAiG;MACA;MACAjH;QACAkH;QACAC;QACAjG;UACA;UACA;UACA;UACAF;UACA;YACAnB;YACA;UACA;UACA;UACA;YACAA;cACAmD;cACA9B;gBACAF;gBACAoG;cACA;cACAjG;gBACAH;cACA;YACA;UACA;UACA;YACA;YACAnB;cACAmD;cACA9B;gBACAF;gBACAoG;cACA;cACAjG;gBACAH;cACA;YACA;UACA;UACAnB;QACA;MACA;IACA;IACA;IACAwH;MACA;MACA;MACA;MACA;MACA;QACA;QACAD;QACAA;MACA;MACA;MACA;QACA1G;QACAuC;QACAqE;MACA;;MACAtH;QACAvC;QACAsJ;QACAC;QACA9F;UACA;YACAF;YACAhB;cACAvC;cACA8J;YACA;YACA1H;cACAb;cACAkC;gBACA;gBACA;kBACAkG;kBACApG;kBACAnB;gBACA;gBAAA;gBACAG;cACA;cACAmB;gBACAnB;gBACAH;gBACAmB;cACA;cACAwG;gBACAxH;gBACAH;gBACAmB;cACA;YACA;UACA;YACAyG;YACA5H;YACAA;YACAA;YACAA;UACA;QACA;MACA;IACA;IAEA;IACA6H;MACA;MACA;MACA;MACA;MACA;QACA1G;QACAnB;QACA;MACA;MACAA;MACAA;MACAG;MACAA;QACAuH;QACA9J;MACA;MACA;QACA;QACA;QACA;MACA;MACA;QACAkK;QACAzJ;MACA;MACA;QACAwC;QACAuC;QACAqE;MACA;;MACAtG;MACAnB;QACAb;QACAkC;UACA;YACAuG;YACAzG;YACA;cACAnB;YACA;cACAA;YACA;;YACAA;UACA;UAAA;UACAG;QACA;QACAmB;UACAtB;UACAG;UACAH;UACAmB;QAEA;QACAwG;UACA3H;UACAG;UACAH;UACAmB;QAEA;MACA;IACA;IAEA;IACA4G;MACA;MACA/H;QACAY;QACAK;UACAF;QACA;MACA;IACA;IAGA;IACAiH;MAAA;MACA;MACA7G;MACA;QACAnB;QACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;UACAY;UACAwC;UACA6E;UACAC;YACA;YACA;UACA;UACA7G;YACA;cACA;cACAF;cACA;gBACA;gBACA;gBACA;gBACA;gBACAgH;gBACA,4EACA9M;gBACA8M;gBACAA;gBACA;kBACAA;kBACAA;gBACA;gBACA;kBACAA;gBACA;gBACAC;gBACAjI;gBAEAH;cACA;gBACAA;gBACA;cACA;YACA;cACAA;cACA;YACA;UACA;UACAsB;YACA;cACAnB;gBACAvC;gBACAsJ;gBACAC;gBACAkB;gBACAC;gBACArG;gBACAZ;kBACA;oBACAF;kBACA;oBACAA;kBACA;gBACA;cACA;YACA;cACAnB;YACA;YACAG;YACA;UACA;QACA;QACAoI;UACA;YACAC;YACAD;YACA;UACA;YACAJ;UACA;QACA;MACA;QACA;QACAhH;QACA;MACA;IACA;IACAsH;MACA;MACA;MACAtI;QACAuI;QACAC;QACAV;QACAW;QACAvH;UACAF;QACA;MACA;IACA;IACA0H;MACA;MACA;MACA;QACA;MACA;MACA;QACA;QACA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA3H;MACAA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACA4H;MAAA;MACA;MACA;QACA5H;QACAuD;QACA1E;QACAA;QACAA;QACA;MACA;QACA;UACAA;YACA;cACAmB;cACAuD;cACA;YACA;UACA;QACA;UACAvD;UACAuD;UACA;QACA;MACA;IACA;IACA;IACAsE;MACA;MACA;MACA;MACA;QACA;UACA;UACA;UACA;YACA;YACA;UACA;QACA;MACA;MAAA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACA;QACA;UACA;UACA;UACA;YACAvE;YACA;YACA;UACA;QACA;MACA;MACA;QACA1E;UACAmB;UACA;YACA;cACA;cACA;gBACAuD;kBACAwE;gBACA;cACA;gBACAxE;kBACAwE;gBACA;cACA;cACA;YACA;YACA;cACAlJ;cACA0E;cACA;cACA;YACA;YACA;cACA;gBACA1E;cACA;cACA0E;cACA;cACA;YACA;UACA;QACA;MACA;QACAvD;QACA;QACAuD;QACA;QACA;MACA;IACA;IAEAyE;MACA;MACA;MACAnJ;MACAA;MACAA;QACAmB;QACA;UACAnB;UACAA;UACAmB;UACAnB;QACA;MACA;IACA;IAEAoJ;MACA;MACA;MACA;QACAjI;QACA;UACAhB;YACAkJ;UACA;UACA;QACA;UACA;UACA;UACA;QACA;UACAlJ;YACAS;YACAS;cACA;cACAlB;gBACAiD;gBACAkG;gBACAjI;kBACAF;gBACA;gBACAe;kBACAf;kBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAEAoI;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACApJ;UACAkJ;UACAG;YACAC;YACApI;cACA;cACA;gBACAlB;kBACAS;kBAAA;kBACAS;oBACA;sBACAF;sBACA;sBACAhB;wBACAiD;wBACA/B;0BACArB,0BACA;wBACA;wBACA2H;0BACAxG;wBACA;sBACA;oBACA;kBACA;gBACA;cACA;cACA;gBACAA;gBACA;gBACA;kBACA;kBACA;kBACAA;kBACA;kBACA;oBACA;oBACAA;oBACA;oBACAhB;sBACAkB;wBACArB;wBACAA;sBACA;oBACA;kBACA;oBACAA;kBACA;gBACA;kBACAA;kBACA;gBACA;cACA;YAEA;YACAsB;cACAH;YACA;UACA;QACA;MACA;QACAhB;UACAkJ;UAAA;UACAK;UACAC;QACA;MACA;MACA;IACA;IAGA;IACAC;MACA;MACA;MACA;MACA;QACAzI;QACA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IAGA;IACA0I;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACA3I;MACA;QACA;MACA;MACA;MACA;QACA4I;MACA;MACA/J;QACA;UACA;UACAmB;UACA;YACAnB;cACAY;cACAK;gBACA+I;cACA;YACA;UACA;YACA7I;YACA;cACAP;cACAK;gBACAgJ;gBACAC;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;QACA;QACAC;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;QACA;UACA;UACAC;UACA;UACAC;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACA;MAAA;MAEA;IACA;IACA;IACAC;MACA;MACA;MACAtJ;MACAnB;QACAY;QACAK;UACAyJ;UACAC;QACA;QACA9E;MACA;IACA;IAGA+E;MAAA;MACA;MACAzJ;MACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;QACA4I;MACA;MACA;MACA/J;QACA;UACA;UACAmB;UACA;YACAnB;cACAY;cACAK;gBACA+I;cACA;YACA;UACA;YACA7I;YACA;cACAP;cACAK;gBACAgJ;gBACAC;cACA;YACA;UACA;QACA;MACA;IACA;IAEAW;MACA;MACA;QACA9J;QACA+J;MACA;MACA9K;QACA;UACAmB;UACAnB;QACA;UACAA;UACA;QACA;MACA;IACA;IAEA+K;MAAA;MACA;MACA/K;MACA;MACA;QACAG;QACA;UACA;UACAF;YACAD;cACAa;cACAD;cACAK;YACA;UACA;UACA;QACA;UACA;UACA;UACA;QACA;MACA;QACA;MACA;IACA;IAEA+J;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;QACA;UACA;UACAjL;UACA;QACA;UACA;UACA;YACA;YACAA;UACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MAAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACt7FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACqC;;;AAG9F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC2CxnB;EACAiI;EACAhN;IAAAiQ;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACA;IACAC;MACA1K;MACA2K;IACA;IACA;IACAC;MACA5K;MACA2K;IACA;IACA;IACAjB;MACA1J;MACA2K;IACA;IACA;IACAE;MACA7K;MACA2K;IACA;IACA;IACAG;MACA9K;MACA2K;IACA;IACA;IACAI;MACA/K;MACA2K;IACA;IACA;IACAK;MACAhL;MACA2K;IACA;IACA;IACAM;MACAjL;MACA2K;IACA;EACA;EACAnQ;IACA;MACA0Q;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACApM;IAAA;IACAI;MACA;MACA;IACA;EACA;EACAS;IACAwL;MACA;IAAA,CAIA;IACAC;MACA;IAAA;EAKA;AACA;AAAA,2B;;;;;;;;;;;;;ACtHA;AAAA;AAAA;AAAA;AAA84B,CAAgB,+4BAAG,EAAC,C;;;;;;;;;;;ACAl6B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAqqC,CAAgB,2oCAAG,EAAC,C;;;;;;;;;;;ACAzrC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAo3B,CAAgB,q3BAAG,EAAC,C;;;;;;;;;;;ACAx4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chat/chatGroup/chatting.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chat/chatGroup/chatting.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chatting.vue?vue&type=template&id=790d187c&scoped=true&\"\nvar renderjs\nimport script from \"./chatting.vue?vue&type=script&lang=js&\"\nexport * from \"./chatting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatting.vue?vue&type=style&index=0&id=790d187c&lang=scss&scoped=true&\"\nimport style1 from \"./chatting.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"790d187c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/chatGroup/chatting.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatting.vue?vue&type=template&id=790d187c&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-navbar/u-navbar\" */ \"uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uLoading: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-loading/u-loading\" */ \"uview-ui/components/u-loading/u-loading.vue\"\n      )\n    },\n    uNoticeBar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-notice-bar/u-notice-bar\" */ \"uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-image/u-image\" */ \"uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uParse: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-parse/u-parse\" */ \"uview-ui/components/u-parse/u-parse.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uGrid: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-grid/u-grid\" */ \"uview-ui/components/u-grid/u-grid.vue\"\n      )\n    },\n    uGridItem: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-grid-item/u-grid-item\" */ \"uview-ui/components/u-grid-item/u-grid-item.vue\"\n      )\n    },\n    chunLeiPopups: function () {\n      return import(\n        /* webpackChunkName: \"components/chunLei-popups/chunLei-popups\" */ \"@/components/chunLei-popups/chunLei-popups.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-popup/u-popup\" */ \"uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uLine: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-line/u-line\" */ \"uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n    lsLoading: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/ls-loading/components/ls-loading/ls-loading\" */ \"@/uni_modules/ls-loading/components/ls-loading/ls-loading.vue\"\n      )\n    },\n    qrInfoPop: function () {\n      return import(\n        /* webpackChunkName: \"components/qr-info-pop/qr-info-pop\" */ \"@/components/qr-info-pop/qr-info-pop.vue\"\n      )\n    },\n    videoPlayer: function () {\n      return import(\n        /* webpackChunkName: \"components/videoPlayer/videoPlayer\" */ \"@/components/videoPlayer/videoPlayer.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.loadingmMore == false &&\n    _vm.currentChatGroup.advShowFlag == 2 &&\n    _vm.currentChatGroup.chatNotice != null &&\n    _vm.currentChatGroup.chatNotice.length > 0\n  var g1 = g0 ? _vm.currentChatGroup.chatNotice.split(\",\") : null\n  var g2 = _vm.messageList.length\n  var l1 = _vm.__map(_vm.messageList, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g3 = item.msgType == 2 ? item.createTime.substring(10, 16) : null\n    var m0 = item.msgType == 2 ? _vm.parseContent(item) : null\n    var g4 = !(item.msgType == 2) ? item.createTime.substring(10, 16) : null\n    var a0 =\n      item.msgType == 1 && item.contentType == 1\n        ? {\n            img: \"width:26px;height:26px;position:relative;top: 10rpx;\",\n          }\n        : null\n    var m1 =\n      item.msgType == 1 && item.contentType == 1 ? _vm.parseContent(item) : null\n    var m2 =\n      item.msgType == 1 && item.contentType == 2\n        ? _vm.parseImgSize(item, \"w\")\n        : null\n    var m3 =\n      item.msgType == 1 && item.contentType == 2\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var m4 =\n      item.msgType == 1 && item.contentType == 2 ? _vm.parseContent(item) : null\n    var m5 =\n      item.msgType == 1 && item.contentType == 3 ? _vm.parseContent(item) : null\n    var m6 =\n      item.msgType == 1 && item.contentType == 3\n        ? _vm.parseImgSize(item, \"w\")\n        : null\n    var m7 =\n      item.msgType == 1 && item.contentType == 3\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var m8 =\n      item.msgType == 1 && item.contentType == 3 ? _vm.parseContent(item) : null\n    var m9 =\n      item.msgType == 1 && item.contentType == 3\n        ? _vm.parseImgSize(item, \"w\")\n        : null\n    var m10 =\n      item.msgType == 1 && item.contentType == 3\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var m11 =\n      item.msgType == 1 && item.contentType == 3\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var g5 =\n      item.msgType == 1 && item.contentType == 4\n        ? JSON.parse(item.content)\n        : null\n    var g6 =\n      item.msgType == 1 && item.contentType == 4\n        ? JSON.parse(item.content)\n        : null\n    var g7 =\n      item.msgType == 1 && item.contentType == 5\n        ? JSON.parse(item.content)\n        : null\n    var g8 =\n      item.msgType == 1 && item.contentType == 5\n        ? JSON.parse(item.content)\n        : null\n    var g9 =\n      item.msgType == 1 && item.contentType == 5\n        ? JSON.parse(item.content).fileSuffix.indexOf(\"xls\")\n        : null\n    var g10 =\n      item.msgType == 1 && item.contentType == 5 && !(g9 != -1)\n        ? JSON.parse(item.content)\n        : null\n    var g11 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\")\n        ? JSON.parse(item.content)\n        : null\n    var g12 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\")\n        ? JSON.parse(item.content)\n        : null\n    var g13 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\") &&\n      !(g12.fileSuffix === \"ppt\")\n        ? JSON.parse(item.content)\n        : null\n    var g14 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\") &&\n      !(g12.fileSuffix === \"ppt\") &&\n      !(g13.fileSuffix === \"pdf\")\n        ? JSON.parse(item.content)\n        : null\n    var g15 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\") &&\n      !(g12.fileSuffix === \"ppt\") &&\n      !(g13.fileSuffix === \"pdf\") &&\n      !(g14.fileSuffix === \"mp4\")\n        ? JSON.parse(item.content)\n        : null\n    var g16 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\") &&\n      !(g12.fileSuffix === \"ppt\") &&\n      !(g13.fileSuffix === \"pdf\") &&\n      !(g14.fileSuffix === \"mp4\") &&\n      !(g15.fileType == \"ZIP\")\n        ? JSON.parse(item.content)\n        : null\n    var g17 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\") &&\n      !(g12.fileSuffix === \"ppt\") &&\n      !(g13.fileSuffix === \"pdf\") &&\n      !(g14.fileSuffix === \"mp4\") &&\n      !(g15.fileType == \"ZIP\") &&\n      g16.fileSuffix === \"img\"\n        ? JSON.parse(item.content)\n        : null\n    var g18 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\") &&\n      !(g12.fileSuffix === \"ppt\") &&\n      !(g13.fileSuffix === \"pdf\") &&\n      !(g14.fileSuffix === \"mp4\") &&\n      !(g15.fileType == \"ZIP\") &&\n      !(g16.fileSuffix === \"img\")\n        ? JSON.parse(item.content)\n        : null\n    var g19 =\n      item.msgType == 1 &&\n      item.contentType == 5 &&\n      !(g9 != -1) &&\n      !(g10.fileSuffix === \"doc\") &&\n      !(g11.fileSuffix === \"txt\") &&\n      !(g12.fileSuffix === \"ppt\") &&\n      !(g13.fileSuffix === \"pdf\") &&\n      !(g14.fileSuffix === \"mp4\") &&\n      !(g15.fileType == \"ZIP\") &&\n      !(g16.fileSuffix === \"img\") &&\n      g18.fileType === \"img\"\n        ? JSON.parse(item.content)\n        : null\n    var m12 =\n      item.msgType == 1 && item.contentType == 8\n        ? _vm.formatForwardUserInfo(item)\n        : null\n    var g20 =\n      item.msgType == 1 && item.contentType == 8\n        ? JSON.parse(item.content)\n        : null\n    var g21 =\n      item.msgType == 1 && item.contentType == 8 && g20.avatar != null\n        ? JSON.parse(item.content)\n        : null\n    var g22 =\n      item.msgType == 1 && item.contentType == 9\n        ? JSON.parse(item.content)\n        : null\n    var g23 =\n      item.msgType == 1 && item.contentType == 9\n        ? JSON.parse(item.content)\n        : null\n    var g24 =\n      item.msgType == 1 && item.contentType == 7\n        ? JSON.parse(item.content).receiveAllFlag == true ||\n          _vm.isReceive(item) == true\n        : null\n    var g25 =\n      item.msgType == 1 && item.contentType == 7\n        ? JSON.parse(item.content)\n        : null\n    var g26 =\n      item.msgType == 1 && item.contentType == 7\n        ? JSON.parse(item.content)\n        : null\n    var g27 =\n      item.msgType == 1 && item.contentType == 7\n        ? JSON.parse(item.content)\n        : null\n    var m13 =\n      item.msgType == 1 &&\n      item.contentType == 7 &&\n      !(g27.receiveAllFlag == true)\n        ? _vm.isReceive(item) == true && _vm.currentChatGroup.chatGroupType != 0\n        : null\n    var m14 =\n      item.msgType == 1 && item.contentType == 10\n        ? _vm.parseChatRecordTitle(item)\n        : null\n    var l0 =\n      item.msgType == 1 && item.contentType == 10\n        ? _vm.__map(\n            JSON.parse(item.content).splice(0, 3),\n            function (contentItem, contentIndex) {\n              var $orig = _vm.__get_orig(contentItem)\n              var m15 = _vm.parseChatRecord(contentItem)\n              return {\n                $orig: $orig,\n                m15: m15,\n              }\n            }\n          )\n        : null\n    var g28 =\n      item.msgType == 1 && item.contentType == 10\n        ? JSON.parse(item.content).length\n        : null\n    var a1 =\n      item.msgType == 1 && (item.contentType == 11 || item.contentType == 12)\n        ? {\n            img: \"width:26px;height:26px;position:relative;top: 10rpx;\",\n          }\n        : null\n    var m16 =\n      item.msgType == 1 && (item.contentType == 11 || item.contentType == 12)\n        ? _vm.formatComponetContent(item, 1)\n        : null\n    var m17 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      item.contentType == 11\n        ? _vm.parseImgSize(item, \"w\")\n        : null\n    var m18 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      item.contentType == 11\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var m19 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      item.contentType == 11\n        ? _vm.formatComponetContent(item, 2)\n        : null\n    var m20 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      !(item.contentType == 11)\n        ? _vm.formatComponetContent(item, 2)\n        : null\n    var m21 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      !(item.contentType == 11)\n        ? _vm.parseImgSize(item, \"w\")\n        : null\n    var m22 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      !(item.contentType == 11)\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var m23 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      !(item.contentType == 11)\n        ? _vm.formatComponetContent(item, 2)\n        : null\n    var m24 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      !(item.contentType == 11)\n        ? _vm.parseImgSize(item, \"w\")\n        : null\n    var m25 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      !(item.contentType == 11)\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var m26 =\n      item.msgType == 1 &&\n      (item.contentType == 11 || item.contentType == 12) &&\n      !(item.contentType == 11)\n        ? _vm.parseImgSize(item, \"h\")\n        : null\n    var m27 =\n      item.msgType == 1 && item.contentType == 13\n        ? _vm.parseVideoContent(item)\n        : null\n    return {\n      $orig: $orig,\n      g3: g3,\n      m0: m0,\n      g4: g4,\n      a0: a0,\n      m1: m1,\n      m2: m2,\n      m3: m3,\n      m4: m4,\n      m5: m5,\n      m6: m6,\n      m7: m7,\n      m8: m8,\n      m9: m9,\n      m10: m10,\n      m11: m11,\n      g5: g5,\n      g6: g6,\n      g7: g7,\n      g8: g8,\n      g9: g9,\n      g10: g10,\n      g11: g11,\n      g12: g12,\n      g13: g13,\n      g14: g14,\n      g15: g15,\n      g16: g16,\n      g17: g17,\n      g18: g18,\n      g19: g19,\n      m12: m12,\n      g20: g20,\n      g21: g21,\n      g22: g22,\n      g23: g23,\n      g24: g24,\n      g25: g25,\n      g26: g26,\n      g27: g27,\n      m13: m13,\n      m14: m14,\n      l0: l0,\n      g28: g28,\n      a1: a1,\n      m16: m16,\n      m17: m17,\n      m18: m18,\n      m19: m19,\n      m20: m20,\n      m21: m21,\n      m22: m22,\n      m23: m23,\n      m24: m24,\n      m25: m25,\n      m26: m26,\n      m27: m27,\n    }\n  })\n  var m28 =\n    !(\n      _vm.forbidFlag == true ||\n      (_vm.currentChatGroup.chatGroupStatus == 2 &&\n        _vm.currentChatGroup.memberType == 0)\n    ) && _vm.chatType === \"voice\"\n      ? require(\"@/static/voice.png\")\n      : null\n  var m29 =\n    !(\n      _vm.forbidFlag == true ||\n      (_vm.currentChatGroup.chatGroupStatus == 2 &&\n        _vm.currentChatGroup.memberType == 0)\n    ) && _vm.chatType === \"keyboard\"\n      ? require(\"@/static/keyboard.png\")\n      : null\n  var g29 =\n    !(\n      _vm.forbidFlag == true ||\n      (_vm.currentChatGroup.chatGroupStatus == 2 &&\n        _vm.currentChatGroup.memberType == 0)\n    ) && _vm.chatType === \"voice\"\n      ? _vm.sendStr.length\n      : null\n  var m30 = !(\n    _vm.forbidFlag == true ||\n    (_vm.currentChatGroup.chatGroupStatus == 2 &&\n      _vm.currentChatGroup.memberType == 0)\n  )\n    ? require(\"@/static/emoji.png\")\n    : null\n  var m31 = !(\n    _vm.forbidFlag == true ||\n    (_vm.currentChatGroup.chatGroupStatus == 2 &&\n      _vm.currentChatGroup.memberType == 0)\n  )\n    ? require(\"@/static/add.png\")\n    : null\n  var g30 = _vm.receiveRedBagList.length\n  var l2 =\n    g30 > 0\n      ? _vm.__map(_vm.receiveRedBagList, function (record, index) {\n          var $orig = _vm.__get_orig(record)\n          var g31 = record.createTime.substring(5, 16)\n          return {\n            $orig: $orig,\n            g31: g31,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showRedPopFlag = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.showRedPopFlag = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l1: l1,\n        m28: m28,\n        m29: m29,\n        g29: g29,\n        m30: m30,\n        m31: m31,\n        g30: g30,\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatting.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"chatting-container\">\r\n\t\t<!-- 自定义导航栏 -->\r\n\t\t<view>\r\n\t\t\t<u-navbar :is-back=\"false\" title=\"\" :background=\"{backgroundColor:'#f1f1f1'}\">\r\n\t\t\t\t<view class=\"custom-navbar\">\r\n\t\t\t\t\t<view class=\"nav-left\" @click=\"customBack\">\r\n\t\t\t\t\t\t<u-icon name=\"arrow-left\" color=\"#000000\" size=\"34\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"nav-center u-flex u-row-center u-col-center\">\r\n\t\t\t\t\t\t<view>{{currentChatGroup.chatGroupName}}</view>\r\n\t\t\t\t\t\t<view v-if=\"currentChatGroup.memberCounts!=undefined&&currentChatGroup.chatGroupType!=0\">\r\n\t\t\t\t\t\t\t{{\"(\"+currentChatGroup.memberCounts+\")\"}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"currentChatGroup.memberTipStatus==1\">\r\n\t\t\t\t\t\t\t<u-icon v-show=\"currentChatGroup.memberTipStatus==1\" name=\"/static/image/chat/pinbi.png\"\r\n\t\t\t\t\t\t\t\tcolor=\"#c0c4cc\" size=\"28\"></u-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"nav-right\" @click=\"toGroupDetail\">\r\n\t\t\t\t\t\t<u-icon name=\"more-dot-fill\" color=\"#000000\" size=\"34\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</u-navbar>\r\n\t\t</view>\r\n\t\t<view style=\"width: 100%;\" class=\"u-flex u-row-center u-col-center\">\r\n\t\t\t<u-loading :show=\"loadingmMore\" mode=\"flower\" size=\"38\"></u-loading>\r\n\t\t</view>\r\n\t\t<!-- 公告 -->\r\n\t\t<view style=\"position: fixed;z-index: 1000;width: 100%;\"\r\n\t\t\tv-if=\"loadingmMore==false&&currentChatGroup.advShowFlag==2&&currentChatGroup.chatNotice!=null&&currentChatGroup.chatNotice.length>0\">\r\n\t\t\t<u-notice-bar @close=\"closeAdvFlag\" padding=\"20rpx 24rpx\" close-icon speed=\"180\" type=\"success\"\r\n\t\t\t\t:list=\"currentChatGroup.chatNotice.split(',')\"></u-notice-bar>\r\n\t\t</view>\r\n\t\t<!-- 信息盒子 -->\r\n\t\t<view class=\"msg-container\" v-show=\"messageList.length>0\">\r\n\t\t\t<scroll-view :scroll-y=\"true\" class=\"msg-box-scroller\" :style=\"'height:'+scrollViewHeight+'px'\"\r\n\t\t\t\t:scroll-into-view=\"scrollIntoView\" @scrolltoupper=\"loadMoreHistoryMsg\"\r\n\t\t\t\t:scroll-with-animation=\"scrollAnimation\" @scroll=\"scrollViewScrolling\" @touchstart=\"hideDrawer\">\r\n\t\t\t\t<view class=\"message\" v-for=\"(item, index) in messageList\" :key=\"index\" :id=\"'msg_'+item.id\">\r\n\t\t\t\t\t<!-- 系统信息 -->\r\n\t\t\t\t\t<!-- &&JSON.parse(item.content).optionType!=-2 加上这个判断以后撤回提醒信息就看不到了 -->\r\n\t\t\t\t\t<view v-if=\"item.msgType==2\" class=\"sys-msg-box\">\r\n\t\t\t\t\t\t<view style=\"text-align: center;color:#909399;\">{{item.createTime.substring(10,16)}}</view>\r\n\t\t\t\t\t\t<view style=\"text-align: center;color:#909399;\">{{parseContent(item)}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 信息时间展示 -->\r\n\t\t\t\t\t<view v-else class=\"sys-msg-box u-m-b-30\" v-show=\"index%10==0\">\r\n\t\t\t\t\t\t<view style=\"text-align: center;color:#909399;\">{{item.createTime.substring(10,16)}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 用户名 -->\r\n\t\t\t\t\t<view v-if=\"item.msgType==1\" class=\"message-item \" :class=\"item.meFlag ? 'right' : 'left'\"\r\n\t\t\t\t\t\tstyle=\"margin-bottom: 4rpx; color:#909399;font-size: 24rpx;\">\r\n\t\t\t\t\t\t<text v-if=\"currentChatGroup.chatGroupType!=0\"\r\n\t\t\t\t\t\t\t:class=\"item.meFlag?'marginLeft-100':'margentRight-100'\">{{item.userName}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"item.msgType==1\" class=\"message-item \" :class=\"item.meFlag ? 'right' : 'left'\">\r\n\t\t\t\t\t\t<!-- 用户头像 -->\r\n\t\t\t\t\t\t<u-image :style=\"currentChatGroup.chatGroupType!=0?'position: relative;top: -16rpx;':''\"\r\n\t\t\t\t\t\t\t:src=\"item.userAvatar\" :width=\"80\" :height=\"80\" :border-radius=\"5\" :lazy-load=\"true\"\r\n\t\t\t\t\t\t\t@click=\"showPersonalInfo(item)\">\r\n\t\t\t\t\t\t\t<view slot=\"error\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"chat-fill\" color=\"#19be6b\" size=\"64\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<u-loading slot=\"loading\"></u-loading>\r\n\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t<!-- contentType = 1 文本信息 -->\r\n\t\t\t\t\t\t<view class=\"content\" v-if=\"item.contentType == 1\" @longpress=\"showToolTip($event,index)\">\r\n\t\t\t\t\t\t\t<view class=\"richTextImg\">\r\n\t\t\t\t\t\t\t\t<!-- <rich-text :nodes=\"parseContent(item)\" :selectable=\"false\" preview=\"false\"></rich-text> -->\r\n\t\t\t\t\t\t\t\t<u-parse :html=\"parseContent(item)\"\r\n\t\t\t\t\t\t\t\t\t:tag-style=\"{'img':'width:26px;height:26px;position:relative;top: 10rpx;'}\">\r\n\t\t\t\t\t\t\t\t</u-parse>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!--  图片信息 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType == 2\" @tap=\"showPic(item)\" @longpress=\"showToolTip($event,index)\"\r\n\t\t\t\t\t\t\tclass=\"content contentType3\">\r\n\t\t\t\t\t\t\t<u-image :width=\"parseImgSize(item,'w')\" :height=\"parseImgSize(item,'h')\" :lazy-load=\"false\"\r\n\t\t\t\t\t\t\t\tmode=\"widthFix\" :src=\"parseContent(item)\">\r\n\t\t\t\t\t\t\t\t<u-loading slot=\"loading\"></u-loading>\r\n\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 视频信息 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType == 3\" @click=\"boFangVideo(item)\"\r\n\t\t\t\t\t\t\t@longpress=\"showToolTip($event,index)\" class=\"content contentType3\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<image :src=\"parseContent(item)\" :style=\"(parseContent(item)==''?'background-color:#000000;':'')+\r\n\t\t\t\t\t\t\t\t\t'width:'+parseImgSize(item,'w')+'rpx;height:'+parseImgSize(item,'h')+'rpx'\">\r\n\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-center u-col-center\"\r\n\t\t\t\t\t\t\t\t:style=\"'width:'+parseImgSize(item,'w')+'rpx;height:'+parseImgSize(item,'h')+'rpx;margin-top:-'+parseImgSize(item,'h')+'rpx;'\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"play-circle-fill\" color=\"#f0f0f0\" :size=\"80\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 语音信息   -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType == 4\" @tap=\"handleAudio(item)\"\r\n\t\t\t\t\t\t\t@longpress=\"showToolTip($event,index)\" class=\"content contentType2\"\r\n\t\t\t\t\t\t\t:class=\"[{ 'content-type-right': item.meFlag }]\" hover-class=\"contentType2-hover-class\"\r\n\t\t\t\t\t\t\t:style=\"{width:`${130+(JSON.parse(item.content).contentDuration*2)}rpx`}\">\r\n\t\t\t\t\t\t\t<view class=\"voice_icon\" :class=\"[\r\n\t\t\t\t\t\t\t\t\t\t{ voice_icon_right: item.meFlag },\r\n\t\t\t\t\t\t\t\t\t\t{ voice_icon_left: !item.meFlag },\r\n\t\t\t\t\t\t\t\t\t\t{ voice_icon_right_an: item.anmitionPlay && item.meFlag },\r\n\t\t\t\t\t\t\t\t\t\t{ voice_icon_left_an: item.anmitionPlay && !item.meFlag }\r\n\t\t\t\t\t\t\t\t\t]\"></view>\r\n\t\t\t\t\t\t\t<view class=\"\">{{JSON.parse(item.content).contentDuration}}''</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 文件信息 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType==5\" class=\"content contentType5\"\r\n\t\t\t\t\t\t\t@longpress=\"showToolTip($event,index)\" @click=\"previewFile(item)\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-between u-col-center\" style=\"padding: 20rpx 10rpx 5rpx 20rpx;\">\r\n\t\t\t\t\t\t\t\t<view style=\"width: 300rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-line-2  u-p-b-10\" style=\"width: 300rpx;font-size: 30rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t{{JSON.parse(item.content).fileName}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-m-t-10\" style=\"font-size: 24rpx;color: #909399;\">\r\n\t\t\t\t\t\t\t\t\t\t{{JSON.parse(item.content).fileSize}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<view style=\"width: 90rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-if=\"JSON.parse(item.content).fileSuffix.indexOf('xls')!=-1\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/xls.png\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\">\r\n\t\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileSuffix==='doc'\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/docx.png\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"></u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileSuffix==='txt'\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/txt.png\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"></u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileSuffix==='ppt'\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/ppt.png\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"></u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileSuffix==='pdf'\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/pdf.png\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"></u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileSuffix==='mp4'\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/chat/bofang.png\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"></u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileType=='ZIP'\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/zip.png\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"></u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileSuffix==='img'\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"JSON.parse(item.content).url\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\">\r\n\t\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else-if=\"JSON.parse(item.content).fileType==='img'\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"JSON.parse(item.content).url\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\">\r\n\t\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-else width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/image/fileType/unknowfile.png\" mode=\"aspectFill\"></u-image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view style=\"font-size: 12px;padding: 10rpx 20rpx;color: #909399;\" class=\"u-border-top\">聊呗\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 个人名片信息 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType==8\" class=\"content contentType5\"\r\n\t\t\t\t\t\t\t@click=\"showUserInfoFromForward(item)\" @longpress=\"showToolTip($event,index)\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-between u-col-center\" style=\"padding: 20rpx 10rpx 10rpx 20rpx;\">\r\n\t\t\t\t\t\t\t\t<view style=\"width: 300rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-line-2\" style=\"width: 300rpx;font-size: 32rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t{{formatForwardUserInfo(item)}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<view style=\"width: 90rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t<u-image v-if=\"JSON.parse(item.content).avatar!=null\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"JSON.parse(item.content).avatar\" width=\"80rpx\" height=\"80rpx\"\r\n\t\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view slot=\"error\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<u-image src=\"@/static/image/chat/defaultPhoto.png\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"80\" height=\"80\" border-radius=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view style=\"font-size: 12px;padding: 10rpx 20rpx;color: #909399;\" class=\"u-border-top\">个人名片\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 位置信息 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType==9\" class=\"content contentType9\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-between u-col-center\" @longpress=\"showToolTip($event,index)\"\r\n\t\t\t\t\t\t\t\t@click=\"openLocation(item)\">\r\n\t\t\t\t\t\t\t\t<view style=\"margin-left: -10rpx;\">\r\n\t\t\t\t\t\t\t\t\t<u-icon name=\"map-fill\" size=\"80\" color=\"#19be6b\"></u-icon>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view style=\"margin-top:16rpx;margin-bottom: 8rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-line-2\" style=\"max-height: 70rpx;\">{{JSON.parse(item.content).name}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-line-2\" style=\"font-size: 24rpx;color: #909399;margin-top: 10rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t{{JSON.parse(item.content).address}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 红包信息 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType == 7\"\r\n\t\t\t\t\t\t\t:style=\"(JSON.parse(item.content).receiveAllFlag==true||isReceive(item)==true)?'opacity: 0.5;':''\"\r\n\t\t\t\t\t\t\tclass=\"content contentType6\" @longpress=\"showToolTip($event,index)\"\r\n\t\t\t\t\t\t\t@click=\"openRedBag(item,index)\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-between u-col-center\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-m-r-20\">\r\n\t\t\t\t\t\t\t\t\t<u-image v-if=\"JSON.parse(item.content).receiveAllFlag==false\" mode=\"scaleToFill\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"/static/image/chat/redbag.png\" width=\"70rpx\" height=\"80rpx\"></u-image>\r\n\t\t\t\t\t\t\t\t\t<u-image v-else mode=\"scaleToFill\" src=\"/static/image/chat/redbag-open.png\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"70rpx\" height=\"80rpx\"></u-image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view style=\"font-size: 36rpx;min-width: 320rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-line-1\">{{JSON.parse(item.content).redBagRemark}}</view>\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"JSON.parse(item.content).receiveAllFlag==true\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 12px;margin-top: 10rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>已被领完</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view v-else>\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"isReceive(item)==true&&currentChatGroup.chatGroupType!=0\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 12px;margin-top: 10rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text>已经领取</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tstyle=\"font-size: 24rpx;border-top: 1rpx solid #ffffff;margin-top: 20rpx;padding-top: 10rpx;\">\r\n\t\t\t\t\t\t\t\t微信红包</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 折叠的聊天记录信息 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType==10\" class=\"content contentType5\"\r\n\t\t\t\t\t\t\t@click=\"openChatRecord(item,index)\" @longpress=\"showToolTip($event,index)\">\r\n\t\t\t\t\t\t\t<view style=\"padding: 20rpx 10rpx 10rpx 20rpx;\">\r\n\t\t\t\t\t\t\t\t<view style=\"width: 400rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-line-2\" style=\"font-size: 32rpx;\">{{parseChatRecordTitle(item)}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"u-m-t-10 u-m-b-10\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"font-size: 28rpx;color: #aaaaaa;\" class=\"u-line-1\"\r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(contentItem,contentIndex) in JSON.parse(item.content).splice(0,3)\"\r\n\t\t\t\t\t\t\t\t\t\t:key=\"contentIndex\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{parseChatRecord(contentItem)}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"JSON.parse(item.content).length>3\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 28rpx;color: #aaaaaa;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>......</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view style=\"font-size: 12px;padding: 10rpx 20rpx;color: #909399;\" class=\"u-border-top\">聊天记录\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 图文或者视频文字 -->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType==11||item.contentType==12\" class=\"content contentType-fixed\">\r\n\t\t\t\t\t\t\t<view @longpress=\"showToolTip($event,index)\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-m-b-10\">\r\n\t\t\t\t\t\t\t\t\t<u-parse :html=\"formatComponetContent(item,1)\"\r\n\t\t\t\t\t\t\t\t\t\t:tag-style=\"{'img':'width:26px;height:26px;position:relative;top: 10rpx;'}\">\r\n\t\t\t\t\t\t\t\t\t</u-parse>\r\n\t\t\t\t\t\t\t\t\t<!-- <rich-text :nodes=\"formatComponetContent(item,1)\" :selectable=\"false\" preview=\"false\"></rich-text> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 图片文字组合-->\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.contentType==11\" @tap=\"showPic(item)\"\r\n\t\t\t\t\t\t\t\t\tclass=\"u-flex u-row-center u-col-center\">\r\n\t\t\t\t\t\t\t\t\t<u-image :width=\"parseImgSize(item,'w')\" :height=\"parseImgSize(item,'h')\"\r\n\t\t\t\t\t\t\t\t\t\t:lazy-load=\"false\" :border-radius=\"10\" mode=\"widthFix\"\r\n\t\t\t\t\t\t\t\t\t\t:src=\"formatComponetContent(item,2)\">\r\n\t\t\t\t\t\t\t\t\t\t<u-loading slot=\"loading\"></u-loading>\r\n\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 视频文字组合-->\r\n\t\t\t\t\t\t\t\t<view v-else class=\"u-flex u-row-left u-col-center\">\r\n\t\t\t\t\t\t\t\t\t<view @click=\"boFangVideo(item)\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"formatComponetContent(item,2)\" :style=\"(formatComponetContent(item,2)==''?'background-color:#000000;':'')+\r\n\t\t\t\t\t\t\t\t\t\t\t\t'width:'+parseImgSize(item,'w')+'rpx;height:'+parseImgSize(item,'h')+'rpx'\">\r\n\t\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"u-flex u-row-center u-col-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t:style=\"'width:'+parseImgSize(item,'w')+'rpx;height:'+parseImgSize(item,'h')+'rpx;margin-top:-'+parseImgSize(item,'h')+'rpx;'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<u-icon name=\"play-circle-fill\" color=\"#f0f0f0\" :size=\"80\"></u-icon>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!--音视频通话结果-->\r\n\t\t\t\t\t\t<view v-if=\"item.contentType==13\" class=\"content\">\r\n\t\t\t\t\t\t\t<!-- @click=\"launchSingleCalling(1)\"-->\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-left u-col-center\"\r\n\t\t\t\t\t\t\t\t:style=\"item.meFlag?'flex-direction: row-reverse;':'flex-direction: row;'\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-m-l-16 u-m-r-16\">\r\n\t\t\t\t\t\t\t\t\t<u-image src=\"/static/image/chat/audio-call.png\" width=\"44rpx\" height=\"44rpx\">\r\n\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view>{{parseVideoContent(item)}}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 底部模块盒子 -->\r\n\t\t<view class=\"content\" v-show=\"wsOnlion\">\r\n\t\t\t<view v-if=\"forbidFlag==true||(currentChatGroup.chatGroupStatus==2&&currentChatGroup.memberType==0)\"  \r\n\t\t\t\tclass=\"input-box\">\r\n\t\t\t\t<view class=\"u-p-20\" style=\"height: 100%; text-align:center;font-size: 32rpx;font-weight: bold;\">\r\n\t\t\t\t\t<view>全员禁言中</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 底部聊天输入框 -->\r\n\t\t\t<view v-else class=\"input-box\">\r\n\t\t\t\t<view class=\"input-box-flex\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<image v-if=\"chatType === 'voice'\" class=\"icon_img\" :src=\"require('@/static/voice.png')\"\r\n\t\t\t\t\t\t\t@click=\"switchChatType('keyboard')\"></image>\r\n\t\t\t\t\t\t<image v-if=\"chatType === 'keyboard'\" class=\"icon_img\" :src=\"require('@/static/keyboard.png')\"\r\n\t\t\t\t\t\t\t@click=\"switchChatType('voice')\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"input-box-flex-grow\">\r\n\t\t\t\t\t\t<view class=\"textArea-box \" v-if=\"chatType === 'voice'\">\r\n\t\t\t\t\t\t\t<view v-if=\"fileRemarkObj.showFlag==true&&fileRemarkObj.fileInfo\"\r\n\t\t\t\t\t\t\t\tstyle=\"width:100rpx;font-size: 28rpx;color:#fa3534\">\r\n\t\t\t\t\t\t\t\t<text>[{{fileRemarkObj.tag}}]</text>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<scroll-view :scroll-y=\"true\" :scroll-x=\"false\" class=\"inputScroll\" :show-scrollbar=\"true\">\r\n\t\t\t\t\t\t\t\t<textarea :disabled=\"connError\" style=\"text-indent:5upx;\" auto-height=\"true\"\r\n\t\t\t\t\t\t\t\t\tplaceholder-style=\"color:#DDDDDD;\" :cursor-spacing=\"10\" :confirm-hold=\"true\"\r\n\t\t\t\t\t\t\t\t\tconfirm-type=\"send\" :show-confirm-bar=\"false\" :focus=\"inputFocusFlag\"\r\n\t\t\t\t\t\t\t\t\t:auto-focus=\"false\" :hold-keyboard=\"true\" @blur=\"onBlur\"\r\n\t\t\t\t\t\t\t\t\t@confirm=\"$noClicks(confirmSendText)\" v-model=\"sendStr\" :cursor=\"sendStr.length\"\r\n\t\t\t\t\t\t\t\t\t:maxlength=\"-1\" />\r\n\t\t\t\t\t\t\t</scroll-view>\r\n\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"voice_title\" v-if=\"chatType === 'keyboard'\" @touchstart.stop.prevent=\"startVoice\"\r\n\t\t\t\t\t\t\t@touchmove.stop.prevent=\"moveVoice\" @touchend.stop=\"endVoice\"\r\n\t\t\t\t\t\t\t@touchcancel.stop=\"cancelVoice\" :style=\"{ background: recording ? '#c7c6c6' : '#FFFFFF' }\">\r\n\t\t\t\t\t\t\t{{ voiceTitle }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 功能性按钮 -->\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<image class=\"icon_btn_add\" :src=\"require('@/static/emoji.png')\" @click=\"changeEmojiBox\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<image class=\"icon_btn_add\" :src=\"require('@/static/add.png')\" @click=\"changeDrawer\"></image>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view v-show=\"platos=='android'\" @touchend.prevent=\"$noClicks(sendText)\" class=\"send u-m-l-16\"\r\n\t\t\t\t\t\t:class=\"chatType === 'voice'?'hidden':''\">\r\n\t\t\t\t\t\t<u-button type=\"success\" @tap=\"$noClicks(sendText)\" :custom-style=\"customSendBtnStyle\">\r\n\t\t\t\t\t\t\t<text>发送</text>\r\n\t\t\t\t\t\t</u-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"fun-box u-border-top\" :class=\"{'show-fun-box':showFunBtn}\">\r\n\t\t\t\t\t<u-grid :col=\"4\" hover-class=\"contentType2-hover-class\" :border=\"false\" @click=\"clickGrid\">\r\n\t\t\t\t\t\t<u-grid-item v-for=\"(item, index) in funList\" :index=\"index\" :key=\"index\"\r\n\t\t\t\t\t\t\t:custom-style=\"{padding:'20rpx 0'}\" bg-color=\"#f8f8f8\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-center u-col-center\"\r\n\t\t\t\t\t\t\t\tstyle=\"background-color: #FFFFFF;width: 110rpx;height: 110rpx;border-radius: 30rpx;\">\r\n\t\t\t\t\t\t\t\t<u-icon :name=\"item.icon\" :size=\"60\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"grid-text\" style=\"font-size: 24rpx;\">{{ item.title }}</view>\r\n\t\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t</u-grid>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"fun-box u-border-top\" :class=\"{'show-fun-box':showEmojiBox}\">\r\n\t\t\t\t\t<!-- 表情 :class=\"{hidden:hideEmoji}\"-->\r\n\t\t\t\t\t<swiper class=\"emoji-swiper\" indicator-dots=\"true\" duration=\"150\">\r\n\t\t\t\t\t\t<swiper-item v-for=\"(page,pid) in faceList\" :key=\"pid\">\r\n\t\t\t\t\t\t\t<view v-for=\"(em,eid) in page\" :key=\"eid\" @tap=\"addEmoji(em)\">\r\n\t\t\t\t\t\t\t\t<image mode=\"widthFix\" :src=\"'/static/emoji/'+em.url\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t\t<view v-if=\"showEmojiBox\" style=\"padding:0rpx 20rpx;position: absolute;bottom: 1rpx;right: 10rpx;\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 250rpx;height: 150rpx;z-index: 1000;opacity: 0.9;\" class=\"u-flex u-row-right u-col-center\">\r\n\t\t\t\t\t\t<view class=\"u-flex u-row-center u-col-center\"\r\n\t\t\t\t\t\t\tstyle=\"border: 1px solid #f1f1f1;border-radius: 10rpx; background-color: #82848a;width: 100rpx;padding: 15rpx 20rpx;margin-right: 8rpx;\">\r\n\t\t\t\t\t\t\t<view @click=\"delSendStr()\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"backspace\" size=\"46\" color=\"#ffffff\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<u-button @click=\"$noClicks(sendText)\" type=\"success\" :custom-style=\"{padding:'20rpx'}\">发送\r\n\t\t\t\t\t\t\t</u-button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- //语音动画 -->\r\n\t\t\t<view class=\"voice_an\" v-if=\"recording\">\r\n\t\t\t\t<view class=\"voice_an_icon\">\r\n\t\t\t\t\t<view id=\"one\" class=\"wave\"></view>\r\n\t\t\t\t\t<view id=\"two\" class=\"wave\"></view>\r\n\t\t\t\t\t<view id=\"three\" class=\"wave\"></view>\r\n\t\t\t\t\t<view id=\"four\" class=\"wave\"></view>\r\n\t\t\t\t\t<view id=\"five\" class=\"wave\"></view>\r\n\t\t\t\t\t<view id=\"six\" class=\"wave\"></view>\r\n\t\t\t\t\t<view id=\"seven\" class=\"wave\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"text\">{{voiceIconText}}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 长按菜单 -->\r\n\t\t<chunLei-popups v-model=\"toolTipFlag\" :popData=\"toolTipData\" @tapPopup=\"tapPopup\" :x=\"toolTipX\" :y=\"toolTipY\"\r\n\t\t\tdirection=\"row\" theme=\"dark\" :dynamic=\"true\">\r\n\t\t</chunLei-popups>\r\n\r\n\t\t<!-- 是否撤回信息弹窗 -->\r\n\t\t<u-popup v-model=\"delPopUpObj.isShow\" ref=\"delPopup\" border-radius=\"10rpx\" mode=\"bottom\" :mask=\"true\">\r\n\t\t\t<view class=\"uni-tip-delMsg\">\r\n\t\t\t\t<view class=\"uni-tip-content u-border-bottom\"\r\n\t\t\t\t\tstyle=\"text-align: center;padding: 30rpx 0rpx;font-weight: bold;\">确认撤回该条信息?</view>\r\n\t\t\t\t<view class=\"u-flex-col u-row-around u-col-center u-margin-top-20\">\r\n\t\t\t\t\t<view class=\"uni-tip-button\" style=\"color: red;\" @click=\"delPopConfirm()\">确定</view>\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tstyle=\"width: 100%; height: 10rpx;line-height: 10rpx;background-color: #dcdfe6;margin: 20rpx 0rpx;\">\r\n\t\t\t\t\t\t<u-line color=\"#dcdfe6\" margin=\"1rpx\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"uni-tip-button\" @click=\"delPopCancel()\">取消</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t\t<!-- 红包领取情况 -->\r\n\t\t<u-popup mode=\"center\" v-model=\"showRedPopFlag\" :border-radius=\"20\" :mask-close-able=\"false\"\r\n\t\t\t@close=\"showRedPopFlag=false\" height=\"1000rpx\" width=\"90%\">\r\n\t\t\t<view>\r\n\t\t\t\t<view class=\"u-border-bottom\" style=\"text-align: center;color: #000000;padding: 20rpx;\">\r\n\t\t\t\t\t<view style=\"font-size: 40rpx;font-weight: bold;\" class=\"u-flex u-row-center u-col-center\">\r\n\t\t\t\t\t\t<view class=\"u-m-r-20\">\r\n\t\t\t\t\t\t\t<u-image :src=\"currentRedBag.avatar\" width=\"70rpx\" height=\"70rpx\" :border-radius=\"10\">\r\n\t\t\t\t\t\t\t\t<view slot=\"error\">\r\n\t\t\t\t\t\t\t\t\t<u-icon name=\"chat-fill\" color=\"#19be6b\" size=\"64\"></u-icon>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"u-flex u-row-left u-col-center\">\r\n\t\t\t\t\t\t\t<view class=\"u-line-1\" style=\"max-width:  300rpx;\">\r\n\t\t\t\t\t\t\t\t<text v-if=\"currentRedBag.currentUserId==vuex_userInfo.id\">我</text>\r\n\t\t\t\t\t\t\t\t<text v-else>{{currentRedBag.currentUserName}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-if=\"currentRedBag.redBagRule==1\"\r\n\t\t\t\t\t\t\t\tstyle=\"margin-left: 8rpx; font-size: 26rpx;color: #fa9100;\">拼</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"font-size: 32rpx;color: #909399;\" class=\"u-m-t-20\">{{currentRedBag.redBagRemark}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"currentChatGroup.chatGroupType!=0\"\r\n\t\t\t\t\t\tstyle=\"font-size: 32rpx;text-align: left;color: #909399;\">共{{currentRedBag.redBagNums}}个</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<scroll-view class=\"showRedPopScrollView u-m-b-20\" :scroll-y=\"true\" :scroll-x=\"false\"\r\n\t\t\t\t\tstyle=\"height: 650rpx;\">\r\n\t\t\t\t\t<view style=\"color: #000000;\" v-if=\"receiveRedBagList.length>0\">\r\n\t\t\t\t\t\t<view v-for=\"(record,index) in receiveRedBagList\" :key=\"index\"\r\n\t\t\t\t\t\t\t:style=\"record.userId==vuex_userInfo.id?'background-color:#f0f0f0;':''\"\r\n\t\t\t\t\t\t\tclass=\"u-flex u-row-between u-col-center u-p-20 u-border-bottom\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-left u-col-center\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<u-image :border-radius=\"10\" :src=\"record.avatar\" width=\"80rpx\" height=\"80rpx\">\r\n\t\t\t\t\t\t\t\t\t</u-image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"u-m-l-10\">\r\n\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t<text v-if=\"record.userId==vuex_userInfo.id\">我</text>\r\n\t\t\t\t\t\t\t\t\t\t<text v-else>{{record.userName}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #909399;margin-top: 6rpx;\">{{record.createTime.substring(5,16)}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view style=\"text-align: right;\">\r\n\t\t\t\t\t\t\t\t<view style=\"font-weight: bold;font-size: 32rpx;\">{{record.tradeValue}}元</view>\r\n\t\t\t\t\t\t\t\t<view style=\"color: #fa9100;margin-top: 6rpx;\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"currentRedBag.redBagRule==1&&record.maxFlag==true&&currentRedBag.receiveAllFlag==true\">\r\n\t\t\t\t\t\t\t\t\t<u-icon name=\"thumb-up-fill\" :size=\"32\" color=\"#fa9100\" label=\"手气最佳\"\r\n\t\t\t\t\t\t\t\t\t\tlabel-color=\"#fa9100\"></u-icon>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else style=\"text-align: center;color: #909399;font-size: 40rpx;margin-top: 200rpx;\">\r\n\t\t\t\t\t\t<view v-if=\"currentRedBag.receiveAllFlag\">\r\n\t\t\t\t\t\t\t<text>已领取~</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else>\r\n\t\t\t\t\t\t\t<text>待领取~</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view class=\"u-flex u-row-center u-col-center u-p-20\"\r\n\t\t\t\t\tstyle=\"width: 100%; position: absolute;bottom: 1rpx;\">\r\n\t\t\t\t\t<u-icon @click=\"showRedPopFlag=false\" name=\"close\" size=\"40\" label=\"关闭\" label-pos=\"bottom\"></u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t\t\r\n\r\n\t\t<!-- 断网重连 -->\r\n\t\t<ls-loading :text=\"reConnTips\" animation=\"twinkle\" v-if=\"reconnFlag\"></ls-loading>\r\n\r\n\t\t<!-- 二维码解析结果界面 -->\r\n\t\t<template v-if=\"qrModelFlag\">\r\n\t\t\t<qr-info-pop :qrModelFlag=\"qrModelFlag\" :windowHeight=\"windowHeight\" :qrModelInfo=\"qrModelInfo\"\r\n\t\t\t\t@closeQRModel=\"closeQRModel\"></qr-info-pop>\r\n\t\t</template>\r\n\t\t<!-- 视频预览 -->\r\n\t\t<view v-if=\"previewVideoFlag==true\">\r\n\t\t\t<videoPlayer :previewVideoFlag=\"previewVideoFlag\" :previewVideoSrc=\"previewVideoSrc\"\r\n\t\t\t\t@quitPlay=\"stopPlayVideo()\"></videoPlayer>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport config from '@/common/environment.js';\r\n\timport permission from '@/util/mobilePermission/permission.js';\r\n\tconst WEBSOCKET_SERVICE = config.WEBSOCKET_SERVICE;\r\n\timport {\r\n\t\tfaceUtils\r\n\t} from '@/util/util.js';\r\n\timport chunLeiPopups from \"@/components/chunLei-popups/chunLei-popups.vue\";\r\n\timport lsLoading from '@/uni_modules/ls-loading/components/ls-loading/ls-loading.vue';\r\n\timport qrInfoPop from '@/components/qr-info-pop/qr-info-pop.vue';\r\n\timport videoPlayer from '@/components/videoPlayer/videoPlayer.vue';\r\n\tvar previewSrcArr = [];\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tchunLeiPopups,\r\n\t\t\tqrInfoPop,\r\n\t\t\tvideoPlayer\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttimmer: null,\r\n\t\t\t\treConnTips: \"数据加载中...\",\r\n\t\t\t\treConntask: null,\r\n\t\t\t\treconnFlag: false,\r\n\t\t\t\tnoClick: true,\r\n\t\t\t\tplatos: 'ios',\r\n\t\t\t\tsocketTask: null,\r\n\t\t\t\t//当前群聊\r\n\t\t\t\tcurrentChatGroup: {\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t\tchatGroupName: '群聊',\r\n\t\t\t\t},\r\n\t\t\t\twsOnlion: false, //websocket是否在线,\r\n\t\t\t\tforbidFlag: false, //禁言\r\n\t\t\t\tpageNum: 1,\r\n\t\t\t\tpageSize: 15,\r\n\t\t\t\tmessageList: [],\r\n\t\t\t\tscrollAnimation: false,\r\n\t\t\t\tscrollIntoView: '',\r\n\t\t\t\tloadingmMore: false,\r\n\t\t\t\tloadingMsg: true, //标识是否正在获取数据\r\n\t\t\t\tchatType: 'voice', // 图标类型 'voice'语音 'keyboard'键盘\r\n\t\t\t\tcustomSendBtnStyle: {\r\n\t\t\t\t\tpadding: '10rpx 20rpx',\r\n\t\t\t\t},\r\n\t\t\t\tsendStr: '', //发送的文字信息\r\n\t\t\t\tRecorder: uni.getRecorderManager(),\r\n\t\t\t\tAudio: uni.createInnerAudioContext(),\r\n\t\t\t\trecording: false, //标识是否正在录音\r\n\t\t\t\tisStopVoice: false, //加锁 防止点击过快引起的当录音正在准备(还没有开始录音)的时候,却调用了stop方法但并不能阻止录音的问题\r\n\t\t\t\tvoiceInterval: null,\r\n\t\t\t\tvoiceTime: 0, //总共录音时长\r\n\t\t\t\tcanSend: true, //是否可以发送\r\n\t\t\t\tPointY: 0, //坐标位置\r\n\t\t\t\tvoiceIconText: \"正在录音...\",\r\n\t\t\t\tvoiceTitle: '按住 说话',\r\n\t\t\t\tAudioExam: null, //正在播放音频的实例\r\n\t\t\t\tshowFunBtn: false, //是否展示功能型按钮\r\n\t\t\t\tshowEmojiBox: false, //是否显示表情弹窗\r\n\t\t\t\tfunList: [{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\ticon: \"photo-fill\",\r\n\t\t\t\t\t\ttitle: \"照片\",\r\n\t\t\t\t\t\tuploadType: [\"album\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\ticon: \"camera-fill\",\r\n\t\t\t\t\t\ttitle: \"视频\",\r\n\t\t\t\t\t\tuploadType: [\"camera\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\ticon: \"/static/image/chat/video.png\",\r\n\t\t\t\t\t\ttitle: \"视频通话\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\ticon: \"map-fill\",\r\n\t\t\t\t\t\ttitle: \"位置\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\ticon: \"/static/image/chat/gird/redbag.png\",\r\n\t\t\t\t\t\ttitle: \"红包\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 6,\r\n\t\t\t\t\t\ticon: \"/static/image/chat/gird/zhuanzhang.png\",\r\n\t\t\t\t\t\ttitle: \"个人名片\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 7,\r\n\t\t\t\t\t\ticon: \"/static/image/chat/call.png\",\r\n\t\t\t\t\t\ttitle: \"语音通话\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 8,\r\n\t\t\t\t\t\ticon: \"/static/image/chat/dir.png\",\r\n\t\t\t\t\t\ttitle: \"文件\",\r\n\t\t\t\t\t\tuploadType: [\"camera\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/* \t\t{\r\n\t\t\t\t\t\t\t\tid:9,\r\n\t\t\t\t\t\t\t\ticon: \"/static/image/chat/gird/collcetion.png\",\r\n\t\t\t\t\t\t\t\ttitle: \"收藏\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid:10,\r\n\t\t\t\t\t\t\t\ticon: \"/static/image/chat/gird/voiceInput.png\",\r\n\t\t\t\t\t\t\t\ttitle: \"语音输入\",\r\n\t\t\t\t\t\t\t}, */\r\n\t\t\t\t],\r\n\t\t\t\taddressObj: {\r\n\t\t\t\t\tchooseFlag: false,\r\n\t\t\t\t},\r\n\t\t\t\tshowFileRemark: false,\r\n\t\t\t\tsendLoading: false,\r\n\t\t\t\t//发送视频,图片等信息的时候附带的备注信息\r\n\t\t\t\tfileRemarkObj: {\r\n\t\t\t\t\tshowFlag: false,\r\n\t\t\t\t\ttag: \"图片\",\r\n\t\t\t\t\tfileInfo: null,\r\n\t\t\t\t},\r\n\t\t\t\tinputFocusFlag: false,\r\n\t\t\t\twindowHeight: 0,\r\n\t\t\t\tscrollViewHeight: 600,\r\n\t\t\t\tfaceList: faceUtils.emojiList(),\r\n\t\t\t\tfaceMap: faceUtils.faces(),\r\n\t\t\t\tconnError: false,\r\n\t\t\t\ttoolTipFlag: false,\r\n\t\t\t\ttoolTipData: [],\r\n\t\t\t\ttoolTipX: 0,\r\n\t\t\t\ttoolTipY: 0,\r\n\t\t\t\tcurrentHandleMsg: {},\r\n\t\t\t\tdelPopUpObj: {\r\n\t\t\t\t\tisShow: false,\r\n\t\t\t\t\tparam: '',\r\n\t\t\t\t},\r\n\t\t\t\tcurrentRedBag: {},\r\n\t\t\t\tshowRedPopFlag: false,\r\n\t\t\t\treceiveRedBagList: [],\r\n\t\t\t\tqrModelFlag: false,\r\n\t\t\t\tqrModelInfo: {},\r\n\t\t\t\tpreviewVideoFlag: false,\r\n\t\t\t\tpreviewVideoSrc: '',\r\n\t\t\t\tvideoMsgFlag: true,\r\n\t\t\t\tautoBackToBottom:true, //有信息的时候是否回到底部位置\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated: function() {\r\n\t\t\tlet scrollViewHeight = this.$u.sys().windowHeight - 160;\r\n\t\t\tthis.windowHeight = this.$u.sys().windowHeight;\r\n\t\t\tthis.scrollViewHeight = scrollViewHeight;\r\n\t\t\tif (uni.getSystemInfoSync().platform == \"android\") {\r\n\t\t\t\tthis.platos = \"android\"\r\n\t\t\t} else {\r\n\t\t\t\tthis.platos = \"ios\"\r\n\t\t\t}\r\n\t\t\tpreviewSrcArr=[];\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tscrollViewHeight(newVal, oldVal) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.messageList.length > 0) {\r\n\t\t\t\t\tthat.scrollIntoView = \"msg_\" + that.messageList[that.messageList.length - 2].id;\r\n\t\t\t\t\t//console.log(\"当前位置\", that.scrollIntoView);\r\n\t\t\t\t\tthat.scrollAnimation = false;\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tthat.scrollAnimation = true;\r\n\t\t\t\t\t\tthat.scrollIntoView = \"msg_\" + that.messageList[that.messageList.length - 1].id;\r\n\t\t\t\t\t\t//console.log(\"最新位置\", that.scrollIntoView);\r\n\t\t\t\t\t}, 500);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmessageList(newValue, oldValue) {\r\n\t\t\t\t//console.log(\"监听信息记录有变化\", newValue.length);\r\n\t\t\t\t//多选的时候用vuex里面的信息记录\r\n\t\t\t\tthis.$u.vuex(\"vuex_messageList\", newValue);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//监听信息滚动\r\n\t\tonReady() {\r\n\t\t\tlet that = this;\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\t//如果键盘弹起\r\n\t\t\t\tif (res.height != 0) {\r\n\t\t\t\t\tthis.showFunBtn = false;\r\n\t\t\t\t\tthis.showEmojiBox = false;\r\n\t\t\t\t\tthis.scrollViewHeight = this.$u.sys().windowHeight - res.height - 130;\r\n\t\t\t\t}\r\n\t\t\t\t//键盘收起\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (!(this.showEmojiBox || this.showFunBtn)) {\r\n\t\t\t\t\t\tthis.scrollViewHeight = this.$u.sys().windowHeight - 150;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//页面加载获取群聊信息\r\n\t\tonLoad(option) {\r\n\t\t\tpreviewSrcArr=[];\r\n\t\t\t//console.log(\"聊天界面初始化参数\", option);\r\n\t\t\tthis.currentChatGroup.id = option.chatGroupId;\r\n\t\t\tthis.currentChatGroup.id = option.chatGroupId;\r\n\t\t\tthis.getChatGroupInfo(true);\r\n\t\t\tthis.initWebScoket();\r\n\t\t\t//录音开始事件\r\n\t\t\tthis.Recorder.onStart(e => {\r\n\r\n\t\t\t\tthis.beginVoice();\r\n\t\t\t});\r\n\t\t\t//录音结束事件\r\n\t\t\tthis.Recorder.onStop(res => {\r\n\t\t\t\tclearInterval(this.voiceInterval);\r\n\t\t\t\tthis.handleRecorder(res);\r\n\t\t\t});\r\n\r\n\t\t\t//音频停止事件\r\n\t\t\tthis.Audio.onStop(e => {\r\n\t\t\t\tthis.closeAnmition();\r\n\t\t\t});\r\n\r\n\t\t\t//音频播放结束事件\r\n\t\t\tthis.Audio.onEnded(e => {\r\n\t\t\t\tthis.closeAnmition();\r\n\t\t\t});\r\n\t\t},\r\n\t\t//页面显示初始化\r\n\t\tonShow: function() {\r\n\t\t\tthis.getChatGroupInfo(false);\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.Audio.stop();\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.scrollIntoView = \"\";\r\n\t\t\tthat.Audio.stop();\r\n\t\t\tthat.closeWebScoket();\r\n\t\t\tpreviewSrcArr=[];\r\n\t\t},\r\n\t\t//监听返回\r\n\t\tonBackPress(options) {\r\n\t\t\tthis.customBack();\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t//自定义返回\r\n\t\t\tcustomBack: function() {\r\n\t\t\t\tthis.Audio.stop();\r\n\t\t\t\t//退出聊天界面的时候也需要重置用户的未读信息为已读,因为存储的时候非发送者都是存的未读状态\r\n\t\t\t\tlet chatGroupId = this.currentChatGroup.id;\r\n\t\t\t\tlet currentUserId = this.vuex_userInfo.id;\r\n\t\t\t\tlet paramData = {\r\n\t\t\t\t\t\"chatGroupId\": chatGroupId,\r\n\t\t\t\t\t\"userId\": currentUserId\r\n\t\t\t\t};\r\n\t\t\t\tthis.$u.api.chatGroup.clearUnReadNum(paramData).then(res => {\r\n\t\t\t\t\tthis.$u.route({\r\n\t\t\t\t\t\turl: \"pages/chat/chatGroupList\",\r\n\t\t\t\t\t\ttype: 'switchTab'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//跳转群组详情\r\n\t\t\ttoGroupDetail: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.connError) {\r\n\t\t\t\t\tthat.globalUtil.utilAlert(\"您已被踢出群聊\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tchatGroupId: that.currentChatGroup.id,\r\n\t\t\t\t\tchatGroupType: that.currentChatGroup.chatGroupType,\r\n\t\t\t\t};\r\n\t\t\t\tthat.$u.route({\r\n\t\t\t\t\turl: 'pages/chat/chatGroup/chatDetail',\r\n\t\t\t\t\tparams: param\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\t//获取群组信息\r\n\t\t\tgetChatGroupInfo: function(historyMsgLoadFlag) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tchatGroupId: that.currentChatGroup.id\r\n\t\t\t\t};\r\n\t\t\t\tthat.$u.api.chatGroup.getChatGroupInfo(param).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tthat.currentChatGroup = data.imGroup;\r\n\t\t\t\t\t\tif (that.currentChatGroup.chatGroupStatus == 2) {\r\n\t\t\t\t\t\t\tthis.forbidFlag = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.forbidFlag = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//console.log(\"群信息\", that.currentChatGroup);\r\n\t\t\t\t\t\tif(historyMsgLoadFlag){\r\n\t\t\t\t\t\t\tconsole.log(\"需要重新加载历史记录\");\r\n\t\t\t\t\t\t\tthat.getHistoryMessage();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"群信息获取失败\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//主动关闭websocket\r\n\t\t\tcloseWebScoket: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.timmer) {\r\n\t\t\t\t\tconsole.log(\"清除心跳机制\");\r\n\t\t\t\t\tclearInterval(that.timmer);\r\n\t\t\t\t};\r\n\t\t\t\tthat.wsOnlion = false;\r\n\t\t\t\tif (!that.socketTask) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.socketTask.close({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tthat.wsOnlion = false;\r\n\t\t\t\t\t\tconsole.log(\"聊天界面websocket关闭成功\", res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log(\"聊天界面websocket关闭失败\", err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 重连\r\n\t\t\treconnect: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.wsOnlion) {\r\n\t\t\t\t\tthat.reconnFlag = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.reConnTips = \"断线重连中...\";\r\n\t\t\t\tthat.reConntask = setTimeout(function() {\r\n\t\t\t\t\tthat.wsOnlion = false;\r\n\t\t\t\t\tthat.reconnFlag = true;\r\n\t\t\t\t\tthat.initWebScoket(that.url);\r\n\t\t\t\t}, 3000);\r\n\t\t\t},\r\n\t\t\t//初始话websocket服务\r\n\t\t\tinitWebScoket: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet userId = that.vuex_userInfo.id;\r\n\t\t\t\tlet chatGroupId = that.currentChatGroup.id;\r\n\t\t\t\tlet url = WEBSOCKET_SERVICE + userId + \"/\" + chatGroupId;\r\n\t\t\t\tthat.closeWebScoket();\r\n\t\t\t\tconsole.log(\"webSocket链接地址:\" + url);\r\n\t\t\t\tthat.socketTask = uni.connectSocket({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tsuccess(data) {\r\n\t\t\t\t\t\tconsole.log(\"聊天长连接已建立完成\");\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tthat.socketTask.onOpen(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket连接已打开！');\r\n\t\t\t\t\tthat.wsOnlion = true;\r\n\t\t\t\t\tthat.sendPingPong();\r\n\t\t\t\t\tif (that.reConntask) {\r\n\t\t\t\t\t\tthat.scrollIntoView = \"\";\r\n\t\t\t\t\t\tthat.pageNum == 1;\r\n\t\t\t\t\t\tthat.getChatGroupInfo(true); //重新拉群数据信息,\r\n\t\t\t\t\t\tthat.reConnTips = \"数据加载中...\";\r\n\t\t\t\t\t\tthat.reconnFlag = false;\r\n\t\t\t\t\t\tclearTimeout(that.reConntask);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthat.socketTask.onMessage(function(res) {\r\n\t\t\t\t\t\tif (res.data == \"pang\") {\r\n\t\t\t\t\t\t\t//console.log(\"收到心跳回复信息\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//console.log(\"有收到新的后台信息\", res);\r\n\t\t\t\t\t\t\t//delayFn(res);\r\n\t\t\t\t\t\t\tthat.msgToScreen(res);\r\n\t\t\t\t\t\t\tthat.sendLoading = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthat.socketTask.onError(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket链接异常,请检查！');\r\n\t\t\t\t\tthat.closeWebScoket();\r\n\t\t\t\t\t//异常断开,重连服务;\r\n\t\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t\tthat.hideDrawer();\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tthat.reconnect();\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t});\r\n\t\t\t\tthat.socketTask.onClose(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket 已关闭！');\r\n\t\t\t\t\tthat.wsOnlion = false;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendPingPong: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.timmer = setInterval(function() {\r\n\t\t\t\t\tif (that.wsOnlion == true) {\r\n\t\t\t\t\t\tthat.socketTask.send({\r\n\t\t\t\t\t\t\tdata: 'ping',\r\n\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t//console.log(\"webscoket发送[心跳]信息成功\");\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t//console.log(\"webscoket发送[心跳]信息失败\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 10000);\r\n\t\t\t},\r\n\t\t\t//获取历史消息,带分页\r\n\t\t\tgetHistoryMessage: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.messageList = [];\r\n\t\t\t\tthat.globalUtil.utilLoading(\"页面加载中...\");\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tchatGroupId: that.currentChatGroup.id,\r\n\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\tpageSize: that.pageSize,\r\n\t\t\t\t};\r\n\t\t\t\tthat.$u.api.chatGroup.getChatGroupHistoryMessage(param).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\t\t\tlet contentType = data[i].contentType;\r\n\t\t\t\t\t\t\t\tif (contentType == 4) {\r\n\t\t\t\t\t\t\t\t\tdata[i].anmitionPlay = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//console.log(\"信息列表\",data);\r\n\t\t\t\t\t\t\tthat.messageList = data.reverse();\r\n\t\t\t\t\t\t\t//渲染完成以后让滚动到底部\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tthat.scrollIntoView = \"msg_\" + that.messageList[that.messageList\r\n\t\t\t\t\t\t\t\t\t.length -\r\n\t\t\t\t\t\t\t\t\t1].id;\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"群信息获取失败\");\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//向上滑动加载更多历史信息数据\r\n\t\t\tloadMoreHistoryMsg: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t/* 防止滑动太快,导致记录重复 */\r\n\t\t\t\tif (that.loadingmMore) {\r\n\t\t\t\t\tthat.loadingmMore = false;\r\n\t\t\t\t\tconsole.log(\"=========防止滑动太快,导致记录重复=============\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.pageNum++;\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tchatGroupId: that.currentChatGroup.id,\r\n\t\t\t\t\tpageNum: that.pageNum,\r\n\t\t\t\t\tpageSize: that.pageSize,\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(\"上划加载更多历史数据分页参数\", param);\r\n\t\t\t\tlet oldScrollViewId = that.messageList[0].id;\r\n\t\t\t\tthat.loadingmMore = true;\r\n\t\t\t\tthat.$u.api.chatGroup.getChatGroupHistoryMessage(param).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null && data.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\t\t\tlet contentType = data[i].contentType;\r\n\t\t\t\t\t\t\t\tif (contentType == 4) {\r\n\t\t\t\t\t\t\t\t\tdata[i].anmitionPlay = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet moreData = data.reverse();\r\n\t\t\t\t\t\t\tthat.messageList = moreData.concat(that.messageList);\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tthat.scrollIntoView = \"msg_\" + oldScrollViewId;\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\tthat.loadingmMore = false;\r\n\t\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.pageNum--;\r\n\t\t\t\t\t\t\tthat.loadingmMore = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.pageNum--;\r\n\t\t\t\t\t\tthat.loadingmMore = false;\r\n\t\t\t\t\t\t//that.globalUtil.utilAlert(\"暂无更多信息记录\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//操作项\r\n\t\t\tshowToolTip: function(e, index) {\r\n\t\t\t\tif (this.forbidFlag) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.toolTipX = e.touches[0].clientX;\r\n\t\t\t\tthis.toolTipY = e.touches[0].clientY;\r\n\t\t\t\tthis.toolTipFlag = !this.toolTipFlag;\r\n\t\t\t\tthis.currentHandleMsg = this.messageList[index];\r\n\t\t\t\tconsole.log(\"this.currentHandleMsg\", this.currentHandleMsg);\r\n\t\t\t\tthis.currentHandleMsg.msgIndex = index;\r\n\t\t\t\tlet contentType = this.currentHandleMsg.contentType;\r\n\t\t\t\tif (this.currentHandleMsg.meFlag == false) {\r\n\t\t\t\t\tthis.toolTipData = [{\r\n\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\ticon: '/static/image/chat/copy.png',\r\n\t\t\t\t\t\t\ttitle: '复制',\r\n\t\t\t\t\t\t\tdisabled: (contentType != 1)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\t\ticon: '/static/image/chat/zhuanfa.png',\r\n\t\t\t\t\t\t\ttitle: '转发',\r\n\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\t\ticon: '/static/image/chat/revert.png',\r\n\t\t\t\t\t\t\ttitle: '多选',\r\n\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\t\ticon: '/static/image/chat/collection.png',\r\n\t\t\t\t\t\t\ttitle: '收藏',\r\n\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet sendTimeMills = this.globalUtil.parseTime(this.currentHandleMsg.createTime).getTime();\r\n\t\t\t\t\tlet nowTimeMills = new Date().getTime();\r\n\t\t\t\t\tlet diff = nowTimeMills - sendTimeMills;\r\n\t\t\t\t\tconsole.log(\"diff\", diff);\r\n\t\t\t\t\tlet twoMinutes = 60 * 1000 * 2; //2分钟\r\n\t\t\t\t\t//let twoMinutes = 60 * 1000 * 60 * 24 * 30; //30天\r\n\t\t\t\t\tif (diff > twoMinutes) {\r\n\t\t\t\t\t\tconsole.log(\"不能撤回\");\r\n\t\t\t\t\t\tthis.toolTipData = [{\r\n\t\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/copy.png',\r\n\t\t\t\t\t\t\t\ttitle: '复制',\r\n\t\t\t\t\t\t\t\tdisabled: (contentType != 1)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/zhuanfa.png',\r\n\t\t\t\t\t\t\t\ttitle: '转发',\r\n\t\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/checkbox.png',\r\n\t\t\t\t\t\t\t\ttitle: '多选',\r\n\t\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/collection.png',\r\n\t\t\t\t\t\t\t\ttitle: '收藏',\r\n\t\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t/* \t{id:3,icon:'/static/image/chat/revert.png', title:'撤回',disabled:true}, */\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toolTipData = [{\r\n\t\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/copy.png',\r\n\t\t\t\t\t\t\t\ttitle: '复制',\r\n\t\t\t\t\t\t\t\tdisabled: (contentType != 1)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/zhuanfa.png',\r\n\t\t\t\t\t\t\t\ttitle: '转发',\r\n\t\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/revert.png',\r\n\t\t\t\t\t\t\t\ttitle: '撤回',\r\n\t\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/checkbox.png',\r\n\t\t\t\t\t\t\t\ttitle: '多选',\r\n\t\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\t\t\ticon: '/static/image/chat/collection.png',\r\n\t\t\t\t\t\t\t\ttitle: '收藏',\r\n\t\t\t\t\t\t\t\tdisabled: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttapPopup(e) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(\" that.currentHandleMsg\", that.currentHandleMsg);\r\n\t\t\t\t//console.log(\"操作选项\",e);\r\n\t\t\t\tif (e.title == \"撤回\") {\r\n\t\t\t\t\tthat.revertMsg();\r\n\t\t\t\t}\r\n\t\t\t\tif (e.title == \"复制\") {\r\n\t\t\t\t\tlet content = that.currentHandleMsg.content;\r\n\t\t\t\t\tif (content.length > 0) {\r\n\t\t\t\t\t\tlet copyContent = JSON.parse(content).text;\r\n\t\t\t\t\t\tconsole.log(\"复制的内容\", copyContent);\r\n\t\t\t\t\t\tlet formatStr = this.replaceReseverEmoji(copyContent);\r\n\t\t\t\t\t\tconsole.log(\"复制转义后的内容\", formatStr);\r\n\t\t\t\t\t\tthat.globalUtil.uniCopy({\r\n\t\t\t\t\t\t\tcontent: formatStr,\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terror: (e) => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: e,\r\n\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.toolTipFlag = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.title == \"转发\") {\r\n\t\t\t\t\tthat.toolTipFlag = false;\r\n\t\t\t\t\tthat.$u.route({\r\n\t\t\t\t\t\turl: '/pages/chat/chatGroup/msgForward',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tmsgList:encodeURIComponent(JSON.stringify([that.currentHandleMsg])),\r\n\t\t\t\t\t\t\tsendType: 1, //1 单条转发 2多条转发\r\n\t\t\t\t\t\t\tfromChatGroupId: that.currentChatGroup.id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (e.title == \"多选\") {\r\n\t\t\t\t\tthat.toolTipFlag = false;\r\n\t\t\t\t\tthat.$u.route({\r\n\t\t\t\t\t\turl: '/pages/chat/chatting/chatting-checkbox',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tgroupId: that.currentChatGroup.id,\r\n\t\t\t\t\t\t\tpageNum: that.pageNum,\r\n\t\t\t\t\t\t\tselectMsgId: that.currentHandleMsg.id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (e.title == \"收藏\") {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"已添加到收藏\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//判断是否可以撤回信息,根据时间推算\r\n\t\t\trevertMsg() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.toolTipFlag = false;\r\n\t\t\t\tthat.delPopUpObj.isShow = true;\r\n\t\t\t\tthat.$refs.delPopup.open();\r\n\t\t\t},\r\n\r\n\t\t\tdelPopConfirm: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(\"打开删除消息弹框\", that.currentHandleMsg);\r\n\t\t\t\tthat.$u.api.chatGroup.revertMessageById(that.currentHandleMsg).then(res => {\r\n\t\t\t\t\tconsole.log(\"撤回消息成功\", res);\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tconsole.log(\"撤回消息成功\", delIndex);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"撤回信息失败!\");\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tthat.delPopCancel();\r\n\t\t\t\t}, 500)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tdelPopCancel: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.delPopUpObj.isShow = false;\r\n\t\t\t\tthat.$refs.delPopup.close();\r\n\t\t\t\tthat.currentHandleMsg = {};\r\n\t\t\t\tthat.toolTipFlag = false;\r\n\t\t\t},\r\n\r\n\t\t\t/*----------------------------------------------------录音相关 start-------------------------------------- */\r\n\t\t\t//准备开始录音\r\n\t\t\tstartVoice(e) {\r\n\t\t\t\tif (!this.Audio.paused) {\r\n\t\t\t\t\t//如果音频正在播放 先暂停。\r\n\t\t\t\t\tthis.stopAudio(this.AudioExam)\r\n\t\t\t\t}\r\n\t\t\t\tthis.recording = true;\r\n\t\t\t\tthis.isStopVoice = false;\r\n\t\t\t\tthis.canSend = true;\r\n\t\t\t\tthis.voiceIconText = \"正在录音...\"\r\n\t\t\t\tthis.PointY = e.touches[0].clientY;\r\n\t\t\t\tthis.Recorder.start({\r\n\t\t\t\t\tformat: 'mp3'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//录音已经开始\r\n\t\t\tbeginVoice() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.isStopVoice) {\r\n\t\t\t\t\tthat.Recorder.stop();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.voiceTitle = '松开 结束'\r\n\t\t\t\tthat.voiceInterval = setInterval(() => {\r\n\t\t\t\t\tconsole.log(\"that.voiceTime\", that.voiceTime);\r\n\t\t\t\t\tif (that.voiceTime > 49) {\r\n\t\t\t\t\t\tthat.voiceIconText = \"录音结束倒计时[\" + (60 - that.voiceTime) + \"]s\";\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (that.voiceTime == 60) {\r\n\t\t\t\t\t\tclearInterval(that.voiceInterval);\r\n\t\t\t\t\t\tthat.endVoice();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.voiceTime++;\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\t//move 正在录音中\r\n\t\t\tmoveVoice(e) {\r\n\t\t\t\tconst PointY = e.touches[0].clientY;\r\n\t\t\t\tconst slideY = this.PointY - PointY;\r\n\t\t\t\tif (slideY > uni.upx2px(120)) {\r\n\t\t\t\t\tthis.canSend = false;\r\n\t\t\t\t\tthis.voiceIconText = '松开手指 取消发送 '\r\n\t\t\t\t} else if (slideY > uni.upx2px(60)) {\r\n\t\t\t\t\tthis.canSend = true;\r\n\t\t\t\t\tthis.voiceIconText = '手指上滑 取消发送 '\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.voiceIconText = '正在录音... '\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//结束录音\r\n\t\t\tendVoice() {\r\n\t\t\t\tthis.isStopVoice = true; //加锁 确保已经结束录音并不会录制\r\n\t\t\t\tthis.Recorder.stop();\r\n\t\t\t\tthis.voiceTitle = '按住 说话'\r\n\t\t\t},\r\n\t\t\t//录音被打断\r\n\t\t\tcancelVoice(e) {\r\n\t\t\t\tconsole.log(\"路由被打断\", e);\r\n\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\tthis.voiceTitle = '按住 说话';\r\n\t\t\t\tthis.canSend = false;\r\n\t\t\t\tthis.Recorder.stop();\r\n\t\t\t},\r\n\t\t\t//处理录音文件\r\n\t\t\thandleRecorder({\r\n\t\t\t\ttempFilePath,\r\n\t\t\t\tduration\r\n\t\t\t}) {\r\n\t\t\t\tif (this.voiceTime < 1) {\r\n\t\t\t\t\tthis.voiceIconText = \"说话时间过短\";\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.recording = false;\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet contentDuration = this.voiceTime;\r\n\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tclearInterval(this.voiceInterval);\r\n\t\t\t\t//文件放在自己的服务器\r\n\t\t\t\tlet uploadFileUrl = this.$u.api.multipartAddress.updload + \"/chattingFiles\";\r\n\t\t\t\t//文件放在阿里云oss\r\n\t\t\t\t//let uploadFileUrl= this.$u.api.multipartAddress.uploadAliYun+\"/chattingAudio\";\r\n\t\t\t\tlet voiceFile = {\r\n\t\t\t\t\ttype: 4, //信息内容类型   1-文本 2-图片 3-视频  4-语音信息 5-文件 6-其他\r\n\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\tuploadUrl: uploadFileUrl,\r\n\t\t\t\t\tcontentDuration: Math.ceil(contentDuration)\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"语音文件\", voiceFile);\r\n\t\t\t\tif (this.canSend) {\r\n\t\t\t\t\tthis.uploadFile(voiceFile);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"=====已经取消发送语音信息====\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//控制播放还是暂停音频文件\r\n\t\t\thandleAudio(item) {\r\n\t\t\t\tthis.AudioExam = item;\r\n\t\t\t\tthis.Audio.paused ? this.playAudio(item) : this.stopAudio(item);\r\n\t\t\t},\r\n\t\t\t//播放音频\r\n\t\t\tplayAudio(item) {\r\n\t\t\t\tthis.Audio.src = JSON.parse(item.content).url;\r\n\t\t\t\tthis.Audio.hasBeenSentId = item.id;\r\n\t\t\t\tthis.Audio.play();\r\n\t\t\t\titem.anmitionPlay = true;\r\n\t\t\t},\r\n\t\t\t//停止音频\r\n\t\t\tstopAudio(item) {\r\n\t\t\t\titem.anmitionPlay = false;\r\n\t\t\t\tthis.Audio.src = '';\r\n\t\t\t\tthis.Audio.stop();\r\n\t\t\t},\r\n\t\t\t//关闭动画\r\n\t\t\tcloseAnmition() {\r\n\t\t\t\tconst hasBeenSentId = this.Audio.hasBeenSentId;\r\n\t\t\t\tconst item = this.messageList.find(it => it.id == hasBeenSentId);\r\n\t\t\t\titem.anmitionPlay = false;\r\n\t\t\t},\r\n\t\t\t/*-------------------------------------录音相关方法块  end---------------------------------------------------*/\r\n\t\t\t//添加表情\r\n\t\t\taddEmoji(em) {\r\n\t\t\t\tthis.sendStr += em.alt;\r\n\t\t\t},\r\n\t\t\t//输入框失去焦点事件\r\n\t\t\tonBlur: function(event) {\r\n\t\t\t\t//console.log(\"失去焦点\",event);\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet text = event.target.value;\r\n\t\t\t\tconsole.log(\"文字输入事件\", text);\r\n\t\t\t\tif (text.length < 1 && this.fileRemarkObj.showFlag) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '是否清除附件',\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthat.fileRemarkObj.showFlag = false;\r\n\t\t\t\t\t\t\t\tthat.fileRemarkObj.fileInfo = null;\r\n\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tconfirmSendText: function(e) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.sendText();\r\n\t\t\t},\r\n\r\n\t\t\t//发送文本信息\r\n\t\t\tsendText: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.sendStr.length < 1) {\r\n\t\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t\tthat.globalUtil.utilAlert(\"不能发送空字符串\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//如果文字中有表情,需要转换处理\r\n\t\t\t\tlet formatStr = this.replaceEmoji(this.sendStr);\r\n\t\t\t\tlet content = {\r\n\t\t\t\t\t\"text\": formatStr, //文本内容\r\n\t\t\t\t}\r\n\t\t\t\t//判断是不是图文结合的\r\n\t\t\t\tlet showFlag = this.fileRemarkObj.showFlag;\r\n\t\t\t\tlet fileInfo = this.fileRemarkObj.fileInfo;\r\n\t\t\t\tif (showFlag && fileInfo) {\r\n\r\n\t\t\t\t\tthat.sendComponentMsg(formatStr);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.sendMsg(1, 1, content);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tdelSendStr: function() {\r\n\t\t\t\tif (this.sendStr.length > 0) {\r\n\t\t\t\t\tthis.sendStr = this.sendStr.substring(0, this.sendStr.length - 4);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\treplaceEmoji(str) {\r\n\t\t\t\tlet replacedStr = str.replace(/\\[([^(\\]|\\[)]*)\\]/g, (item, index) => {\r\n\t\t\t\t\tfor (let i = 0; i < this.faceList.length; i++) {\r\n\t\t\t\t\t\tlet row = this.faceList[i];\r\n\t\t\t\t\t\tfor (let j = 0; j < row.length; j++) {\r\n\t\t\t\t\t\t\tlet EM = row[j];\r\n\t\t\t\t\t\t\tif (EM.alt == item) {\r\n\t\t\t\t\t\t\t\t//在线表情路径，图文混排必须使用网络路径，请上传一份表情到你的服务器后再替换此路径\r\n\t\t\t\t\t\t\t\t//比如你上传服务器后，你的100.gif路径为https://www.xxx.com/emoji/100.gif 则替换onlinePath填写为https://www.xxx.com/emoji/\r\n\t\t\t\t\t\t\t\t// let onlinePath = 'https://s2.ax1x.com/2019/04/12/'\r\n\t\t\t\t\t\t\t\t// let imgstr = '<img alt=\"'+EM.alt+'\" src=\"'+onlinePath+this.onlineEmoji[EM.url]+'\">';\r\n\t\t\t\t\t\t\t\tlet imgstr = \"face\" + EM.alt;\r\n\t\t\t\t\t\t\t\tconsole.log(\"imgstr: \" + imgstr);\r\n\t\t\t\t\t\t\t\treturn imgstr;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//console.log(\"replacedStr\", replacedStr);\r\n\t\t\t\treturn replacedStr;\r\n\t\t\t},\r\n\r\n\t\t\treplaceReseverEmoji: function(str) {\r\n\t\t\t\tlet replacedStr = str.replace(/face\\[([^\\s\\[\\]]+?)]/g, function(face) {\r\n\t\t\t\t\tlet alt = face.replace(/^face/g, '');\r\n\t\t\t\t\treturn alt;\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(\"replacedStr\", replacedStr);\r\n\t\t\t\treturn replacedStr;\r\n\t\t\t},\r\n\r\n\t\t\t//发送消息\r\n\t\t\tsendMsg: function(msgType, contentType, contentObj) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.autoBackToBottom=true;\r\n\t\t\t\tthat.$u.api.sys.checkLoginStatus({}).then(res => {\r\n\t\t\t\t\t//console.log(\"登录状态\",res);\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\t\tmessageType: msgType == null ? 1 : msgType, //信息类型0:系统信息   1表示用户信息\r\n\t\t\t\t\t\t\tfromUserId: that.vuex_userInfo.id, //发送信息的人\r\n\t\t\t\t\t\t\tchatGroupId: that.currentChatGroup.id, //聊天群聊id\r\n\t\t\t\t\t\t\tplatFrom: 1, //手机端\r\n\t\t\t\t\t\t\tcontentType: contentType, //信息内容类型   1-文本 2-图片 3-视频  4-语音信息 5-文件 6-其他\r\n\t\t\t\t\t\t\tcontent: JSON.stringify(contentObj),\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (that.wsOnlion == true) {\r\n\t\t\t\t\t\t\tthat.socketTask.send({\r\n\t\t\t\t\t\t\t\tdata: JSON.stringify(msg),\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"webscoket发送信息成功\");\r\n\t\t\t\t\t\t\t\t\tthat.sendStr = \"\";\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"网络不佳,发送失败\");\r\n\t\t\t\t\t\t\t\t\tthat.sendLoading = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"websocket已经掉线\");\r\n\t\t\t\t\t\t\tif (that.connError == true) {\r\n\t\t\t\t\t\t\t\tthat.sendLoading = false;\r\n\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"您已被退出群聊!\");\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"信息发送失败\");\r\n\t\t\t\t\t\t\tthat.reconnect();\r\n\t\t\t\t\t\t\tthat.sendLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.sendLoading = false;\r\n\t\t\t\t\t\tthat.loginOut();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//接收到信息,渲染到信息面板上去,\r\n\t\t\t// 不能滚动到底部\r\n\t\t\tmsgToScreen: function(res) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (res != null && res.data != null && res.data.length > 0) {\r\n\t\t\t\t\tlet msgFromServer = JSON.parse(res.data);\r\n\t\t\t\t\tconsole.log(\"收到服务端的信息\",msgFromServer);\r\n\t\t\t\t\t//群聊被解散\r\n\t\t\t\t\tif (msgFromServer.messageType == -1) {\r\n\t\t\t\t\t\tthat.closeWebScoket();\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"群聊已经被解散\");\r\n\t\t\t\t\t\tthat.$u.route({\r\n\t\t\t\t\t\t\turl: \"pages/chat/chatGroupList\",\r\n\t\t\t\t\t\t\ttype: 'switchTab'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (msgFromServer.contentType == 4) {\r\n\t\t\t\t\t\tmsgFromServer.anmitionPlay = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmsgFromServer.msgType = msgFromServer.messageType;\r\n\t\t\t\t\t//这里对sendStr进行置空\r\n\t\t\t\t\tif (msgFromServer.meFlag == true) {\r\n\t\t\t\t\t\tthat.sendStr = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet msgType = msgFromServer.msgType;\r\n\t\t\t\t\tlet content = msgFromServer.content;\r\n\t\t\t\t\t//系统消息\r\n\t\t\t\t\tif (msgType == 2) {\r\n\t\t\t\t\t\tlet contentObj = JSON.parse(content);\r\n\t\t\t\t\t\tlet currentUserId = that.vuex_userInfo.id;\r\n\t\t\t\t\t\tconsole.log(\"系统消息\", contentObj);\r\n\t\t\t\t\t\tif (contentObj.contentType == 2 && contentObj.delMember == currentUserId) {\r\n\t\t\t\t\t\t\tcontentObj.text = \"您已经被剔除群聊!\";\r\n\t\t\t\t\t\t\tmsgFromServer.content = JSON.stringify(contentObj);\r\n\t\t\t\t\t\t\tthat.messageList.push(msgFromServer);\r\n\t\t\t\t\t\t\tthat.closeWebScoket();\r\n\t\t\t\t\t\t\tthat.connError = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//红包信息\r\n\t\t\t\t\t\tif (contentObj.contentType == 7||contentObj.contentType==14) {\r\n\t\t\t\t\t\t\tconsole.log(\"收到红包信息了\", msgFromServer);\r\n\t\t\t\t\t\t\tthat.messageList.push(msgFromServer);\r\n\t\t\t\t\t\t\tlet messageId=contentObj.messageId;\r\n\t\t\t\t\t\t\tlet redBagContent=contentObj.redBagContent;\r\n\t\t\t\t\t\t\tif(messageId!=null&&redBagContent!=null&&redBagContent!=undefined){\r\n\t\t\t\t\t\t\t\tthat.messageList.map(function(item){\r\n\t\t\t\t\t\t\t\t\tlet mid= item.id;\r\n\t\t\t\t\t\t\t\t\tif(mid==messageId){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"原来的红包\",item);\r\n\t\t\t\t\t\t\t\t\t\titem.content=JSON.stringify(redBagContent);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//撤回信息\r\n\t\t\t\t\t\tif (contentObj.optionType == -2) {\r\n\t\t\t\t\t\t\tlet revertMsg = contentObj.delMsg;\r\n\t\t\t\t\t\t\tlet delIndex = -1;\r\n\t\t\t\t\t\t\tconsole.log(\"有人撤回了一条信息\", contentObj);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < that.messageList.length; i++) {\r\n\t\t\t\t\t\t\t\tlet messageItem = that.messageList[i];\r\n\t\t\t\t\t\t\t\tif (revertMsg.id == messageItem.id) {\r\n\t\t\t\t\t\t\t\t\tdelIndex = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (delIndex != -1) {\r\n\t\t\t\t\t\t\t\tthat.messageList.splice(delIndex, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet userName = msgFromServer.meFlag ? \"我\" : contentObj.optionUserName;\r\n\t\t\t\t\t\t\tmsgFromServer.userName = userName;\r\n\t\t\t\t\t\t\tmsgFromServer.content = JSON.stringify(contentObj);\r\n\t\t\t\t\t\t\tthat.messageList.push(msgFromServer);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//禁言\r\n\t\t\t\t\t\tif (contentObj.optionType == -3) {\r\n\t\t\t\t\t\t\tconsole.log(\"群主已禁言\", msgFromServer);\r\n\t\t\t\t\t\t\tthat.messageList.push(msgFromServer);\r\n\t\t\t\t\t\t\t//that.forbidFlag = true;\r\n\t\t\t\t\t\t\tif(that.currentChatGroup.memberType==0){\r\n\t\t\t\t\t\t\t\tthat.forbidFlag=true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (contentObj.optionType == -4) {\r\n\t\t\t\t\t\t\tconsole.log(\"解除全体禁言\", msgFromServer);\r\n\t\t\t\t\t\t\tthat.messageList.push(msgFromServer);\r\n\t\t\t\t\t\t\tthat.forbidFlag = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet userName = msgFromServer.meFlag ? \"我\" :msgFromServer.userName;\r\n\t\t\t\t\t\tmsgFromServer.userName = userName;\r\n\t\t\t\t\t\tthat.saveLocal(msgFromServer);\r\n\t\t\t\t\t\tthat.messageList.push(msgFromServer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet fromUserId = msgFromServer.fromUserId;\r\n\t\t\t\t\tlet chatGroupId = msgFromServer.chatGroupId;\r\n\t\t\t\t\tif (fromUserId != that.vuex_userInfo.id) {\r\n\t\t\t\t\t\tthat.globalUtil.palyMsgTipSelected(that, chatGroupId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (msgFromServer.msgType == 2) {\r\n\t\t\t\t\t\tlet that = this;\r\n\t\t\t\t\t\tlet param = {\r\n\t\t\t\t\t\t\tchatGroupId: that.currentChatGroup.id\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthat.$u.api.chatGroup.getChatGroupInfo(param).then(res => {\r\n\t\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\t\t\tthat.currentChatGroup = data.imGroup;\r\n\t\t\t\t\t\t\t\tif (that.currentChatGroup.chatGroupStatus == 2&&that.currentChatGroup.memberType==0) {\r\n\t\t\t\t\t\t\t\t\tthat.forbidFlag = true;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat.forbidFlag = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"获取最新群信息失败\");\r\n\t\t\t\t\t\t\t\t//return;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(that.autoBackToBottom==true){\r\n\t\t\t\t\t\tthat.$nextTick(function() {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tthat.scrollIntoView = \"msg_\" + msgFromServer.id;\r\n\t\t\t\t\t\t\t\tconsole.log(\"that.scrollIntoView\", that.scrollIntoView);\r\n\t\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t/* \tthat.$nextTick(function() {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tthat.scrollIntoView = \"msg_\" + msgFromServer.id;\r\n\t\t\t\t\t\t\tconsole.log(\"that.scrollIntoView\", that.scrollIntoView);\r\n\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t}) */\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//格式化信息内容\r\n\t\t\tparseContent: function(item) {\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet msgType = item.msgType; //1用户信息 2系统信息\r\n\t\t\t\tlet contentType = item.contentType;//文本信息\r\n\t\t\t\tif (contentType == 1) {\r\n\t\t\t\t\t//防止json解析失败\r\n\t\t\t\t\tif(msgType==2){\r\n\t\t\t\t\t\t//console.log(\"===================\",item.content.indexOf(\"\\\\n\"));\r\n\t\t\t\t\t\titem.content=item.content.replace(/\\s+/g,\" \");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet content = JSON.parse(item.content);\r\n\t\t\t\t\tlet msgStr = content.text;\r\n\t\t\t\t\tlet sysType = content.contentType;\r\n\t\t\t\t\tlet optionType = content.optionType;\r\n\t\t\t\t\tif (sysType != null && sysType != undefined && sysType == 1) {\r\n\t\t\t\t\t\tif (msgStr.length > 0) {\r\n\t\t\t\t\t\t\treturn \"群主发布了新的公告\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"群主作废了群公告\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (optionType == -2) {\r\n\t\t\t\t\t\treturn item.userName + \":撤回了一条消息\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (sysType == 7) {\r\n\t\t\t\t\t\tif (this.currentChatGroup.chatGroupType == 0) {\r\n\t\t\t\t\t\t\tif (item.fromUserId != this.vuex_userInfo.id) {\r\n\t\t\t\t\t\t\t\treturn item.userName + \"领取了你的红包\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (item.fromUserId != this.vuex_userInfo.id) {\r\n\t\t\t\t\t\t\t\treturn item.userName + \"领取了红包\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn \"你领取了红包\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(msgType!=2){\r\n\t\t\t\t\t\tlet transText = this.globalUtil.transform(msgStr, \"\", \"\");\r\n\t\t\t\t\t\treturn transText;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t//console.log(\"系统信息\",msgStr);\r\n\t\t\t\t\t\treturn msgStr;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//图片信息\r\n\t\t\t\telse if (contentType == 2) {\r\n\t\t\t\t\tlet msgId= item.id;\r\n\t\t\t\t\tlet localSrc= uni.getStorageSync(\"image\"+msgId);\r\n\t\t\t\t\tif(localSrc){\r\n\t\t\t\t\t\treturn localSrc;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet url = JSON.parse(item.content).url;\r\n\t\t\t\t\tif (url) {\r\n\t\t\t\t\t\tif(previewSrcArr.indexOf(url)==-1){\r\n\t\t\t\t\t\t\tpreviewSrcArr.unshift(url);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthat.saveLocal(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn url;\r\n\t\t\t\t} else if (contentType == 3) {\r\n\t\t\t\t\tlet msgId= item.id;\n\t\t\t\t\tlet localSrc= uni.getStorageSync(\"image\"+msgId);\n\t\t\t\t\tif(localSrc){\n\t\t\t\t\t\treturn localSrc;\n\t\t\t\t\t};\n\t\t\t\t\tlet videoContent = JSON.parse(item.content);\n\t\t\t\t\tlet subImgInfo = videoContent.subImgInfo;\n\t\t\t\t\tif (subImgInfo) {\n\t\t\t\t\t\tthat.saveLocal(item);\n\t\t\t\t\t\treturn subImgInfo.url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn JSON.parse(item.content).url;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tparseVideoContent: function(item) {\r\n\t\t\t\tlet content = JSON.parse(item.content);\r\n\t\t\t\tlet totalTime = content.totalTime;\r\n\t\t\t\tif (totalTime == 0) {\r\n\t\t\t\t\treturn \"通话未接通\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet timeDuring = this.globalUtil.formatSeconds(totalTime);\r\n\t\t\t\t\treturn \"通话时长 \" + timeDuring;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//格式化组合信息内容\r\n\t\t\tformatComponetContent: function(item, type) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (type == 1) {\r\n\t\t\t\t\tlet msgStr = JSON.parse(item.content).textDesc;\r\n\t\t\t\t\tlet transText = this.globalUtil.transform(msgStr, \"\", \"\");\r\n\t\t\t\t\treturn transText;\r\n\t\t\t\t}\r\n\t\t\t\tif (type == 2) {\r\n\t\t\t\t\tlet content = JSON.parse(item.content);\r\n\t\t\t\t\tif (item.contentType == 12) {\r\n\t\t\t\t\t\tlet subImgInfo = content.fileInfo.subImgInfo;\r\n\t\t\t\t\t\tif (subImgInfo) {\r\n\t\t\t\t\t\t\treturn subImgInfo.url;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.contentType == 11) {\r\n\t\t\t\t\t\tlet url= content.url;\r\n\t\t\t\t\t\tif(previewSrcArr.indexOf(url)==-1){\r\n\t\t\t\t\t\t\tpreviewSrcArr.unshift(url);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn content.url;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tshowNotice: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(\"查看群公告\");\r\n\t\t\t},\r\n\r\n\t\t\tparseShowTime: function(item) {\r\n\t\t\t\tif (item.createTime == null) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tlet crteateTimeStr = item.createTime.replace(/-/g, \"/\"); //时间转换\r\n\t\t\t\tlet createTime = new Date(crteateTimeStr).getTime();\r\n\t\t\t\tlet nowTime = new Date().getTime();\r\n\t\t\t\tlet during = nowTime - createTime;\r\n\t\t\t\tif (during > 1000 * 60 * 3) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t//Date.now()-new Date(create_time)>3*60*60*1000\r\n\r\n\t\t\t},\r\n\r\n\t\t\t//内容转换(暂时不用)\r\n\t\t\ttransformContent: function(message) {\r\n\t\t\t\tlet contentStr = message.content;\r\n\t\t\t\tlet contentObj = JSON.parse(contentStr);\r\n\t\t\t\tlet text = contentObj.text;\r\n\t\t\t\tlet fileSuffix = contentObj.fileSuffix;\r\n\t\t\t\tlet fileSize = contentObj.fileSize;\r\n\t\t\t\t//信息内容转换\r\n\t\t\t\tlet transText = this.globalUtil.transform(text, fileSize, fileSuffix);\r\n\t\t\t\tcontentObj.text = transText;\r\n\t\t\t\tmessage.content = JSON.stringify(contentObj);\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\tparseImgSize: function(item, type) {\r\n\t\t\t\tif (type == \"h\") {\r\n\t\t\t\t\tlet height = JSON.parse(item.content).height;\r\n\t\t\t\t\tif (item.contentType == 11 || item.contentType == 12) {\r\n\t\t\t\t\t\theight = JSON.parse(item.content).fileInfo.height;\r\n\t\t\t\t\t\t//console.log(\"附件高度\",height);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (height == null || height == undefined) {\r\n\t\t\t\t\t\treturn \"auto\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn height * 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet width = JSON.parse(item.content).width;\r\n\t\t\t\t\tif (item.contentType == 11 || item.contentType == 12) {\r\n\t\t\t\t\t\twidth = JSON.parse(item.content).fileInfo.width;\r\n\t\t\t\t\t\t//console.log(\"附件宽度\",width);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (width == null || width == undefined) {\r\n\t\t\t\t\t\treturn 300;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn width * 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//切换语音或者键盘方式\r\n\t\t\tswitchChatType(type) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.connError) {\r\n\t\t\t\t\tthat.globalUtil.utilAlert(\"您已被踢出群聊\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.chatType = type;\r\n\t\t\t\t//底部菜单隐藏\r\n\t\t\t\tif (this.showFunBtn == true) {\r\n\t\t\t\t\tthis.showFunBtn = false;\r\n\t\t\t\t\tthat.scrollViewHeight = that.$u.sys().windowHeight - 150;\r\n\t\t\t\t}\r\n\t\t\t\t//表情弹窗\r\n\t\t\t\tif (this.showEmojiBox == true) {\r\n\t\t\t\t\tthis.showEmojiBox = false;\r\n\t\t\t\t\tthat.scrollViewHeight = that.$u.sys().windowHeight - 150;\r\n\t\t\t\t}\r\n\t\t\t\tif (type == \"voice\") {\r\n\t\t\t\t\tthis.inputFocusFlag = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (uni.getSystemInfoSync().platform == \"android\") {\r\n\t\t\t\t\t\tpermission.requestAndroid(\"android.permission.RECORD_AUDIO\"); //Android请求录音权限\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpermission.requestIOS(\"record\"); //ios请求录音权限\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//切换功能性按钮\r\n\t\t\tchangeDrawer() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.showEmojiBox = false;\r\n\t\t\t\tthat.showFunBtn = !that.showFunBtn;\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\tif (that.showFunBtn) {\r\n\t\t\t\t\tthat.scrollViewHeight = that.$u.sys().windowHeight - 350;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.scrollViewHeight = that.$u.sys().windowHeight - 150;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//表情弹窗\r\n\t\t\tchangeEmojiBox: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.showFunBtn = false;\r\n\t\t\t\tthat.showEmojiBox = !that.showEmojiBox;\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\tif (that.showEmojiBox) {\r\n\t\t\t\t\tthis.chatType = \"voice\";\r\n\t\t\t\t\tthat.scrollViewHeight = that.$u.sys().windowHeight - 350;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.scrollViewHeight = that.$u.sys().windowHeight - 150;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscrollViewScrolling: function(e) {\r\n\t\t\t\tthis.toolTipFlag = false;\r\n\t\t\t\t//console.log(\"监听到滚动了---scrollTop-------\",e.detail.scrollTop);\r\n\t\t\t\t//console.log(\"监听到滚动了---scrollHeight-------\",e.detail.scrollHeight);\r\n\t\t\t\tlet scrollTop= e.detail.scrollTop;\r\n\t\t\t\tlet scrollHeight=e.detail.scrollHeight;\r\n\t\t\t\tlet precent=(scrollTop/scrollHeight).toFixed(2);\r\n\t\t\t\t//console.log(\"precent\",Number(precent));\r\n\t\t\t\tif(Number(precent)<0.5){\r\n\t\t\t\t\tthis.autoBackToBottom=false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.autoBackToBottom=true;\r\n\t\t\t\t}\r\n\t\t\t\t//this.$forceUpdate();\r\n\t\t\t},\r\n\t\t\t//触摸页面\r\n\t\t\thideDrawer() {\r\n\t\t\t\tthis.toolTipFlag = false;\r\n\t\t\t\tif (this.showFunBtn == true) {\r\n\t\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t\tthis.showFunBtn = false;\r\n\t\t\t\t\tthis.scrollViewHeight = this.$u.sys().windowHeight - 150;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showEmojiBox == true) {\r\n\t\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t\tthis.showEmojiBox = false;\r\n\t\t\t\t\tthis.scrollViewHeight = this.$u.sys().windowHeight - 150;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//点击宫格时触发\r\n\t\t\tclickGrid(index) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.connError) {\r\n\t\t\t\t\tthat.globalUtil.utilAlert(\"您已被踢出群聊\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet id = that.funList[index].id;\r\n\t\t\t\tthat.inputFocusFlag = false;\r\n\t\t\t\t//组合方式清楚\r\n\t\t\t\tthat.fileRemarkObj.showFlag = false;\r\n\t\t\t\tthat.fileRemarkObj.fileInfo = null;\r\n\t\t\t\tthat.fileRemarkObj.tag = \"\";\r\n\t\t\t\tif (id == 1) {\r\n\t\t\t\t\tthis.chooseImage();\r\n\t\t\t\t} else if (id == 2) {\r\n\t\t\t\t\tthis.chooseVideo();\r\n\t\t\t\t} else if (id == 3) {\r\n\t\t\t\t\tlet chatGroupType = that.currentChatGroup.chatGroupType;\r\n\t\t\t\t\tif (chatGroupType == 0) {\r\n\t\t\t\t\t\tthat.launchSingleCalling(2);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.globalUtil.utilAlert(\"功能尚未开放!\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t/* this.$u.route({\r\n\t\t\t\t\t\t\turl: '/pages/chattingroom/videoCalling',\r\n\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t'userId':that.vuex_userInfo.mobile+\"_\"+that.vuex_userInfo.id,\r\n\t\t\t\t\t\t\t\t'userSign':that.vuex_userInfo.userSign\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}) */\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (id == 4) {\r\n\t\t\t\t\tconsole.log(\"位置\");\r\n\t\t\t\t\t//去选择所在位置\r\n\t\t\t\t\tlet that = this;\r\n\t\t\t\t\tuni.chooseLocation({\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tthat.addressObj = res;\r\n\t\t\t\t\t\t\tthat.addressObj.chooseFlag = true;\r\n\t\t\t\t\t\t\tthat.sendLocation(that.addressObj);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\tthat.address = {};\r\n\t\t\t\t\t\t\tthat.address.chooseFlag = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (id == 5) {\r\n\t\t\t\t\tlet chatGroupType = that.currentChatGroup.chatGroupType;\r\n\t\t\t\t\tif (chatGroupType == 0) {\r\n\t\t\t\t\t\tthis.$u.route({\r\n\t\t\t\t\t\t\turl: '/pages/chat/redbag/redbag',\r\n\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\tchatGroupId: this.currentChatGroup.id\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tanimationType: 'slide-in-bottom'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$u.route({\r\n\t\t\t\t\t\t\turl: '/pages/chat/redbag/redbagForGroup',\r\n\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\tcurrentChatGroup: JSON.stringify(this.currentChatGroup)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tanimationType: 'slide-in-bottom'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (id == 6) {\r\n\t\t\t\t\t//console.log(\"转账\");\r\n\t\t\t\t\t//this.globalUtil.utilAlert(\"功能尚未开放!\");\r\n\t\t\t\t\tthis.$u.route({\r\n\t\t\t\t\t\turl: '/pages/chat/chatGroup/forwardFriendToGroup',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tcurrentChatGroupId: this.currentChatGroup.id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tanimationType: 'slide-in-bottom'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (id == 7) {\r\n\t\t\t\t\tconsole.log(\"语音通话\");\r\n\t\t\t\t\tlet chatGroupType = that.currentChatGroup.chatGroupType;\r\n\t\t\t\t\tif (chatGroupType == 0) {\r\n\t\t\t\t\t\tthat.launchSingleCalling(1);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.globalUtil.utilAlert(\"功能尚未开放!\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t/* this.$u.route({\r\n\t\t\t\t\t\t\turl: '/pages/chattingroom/videoCalling',\r\n\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t'userId':that.vuex_userInfo.mobile+\"_\"+that.vuex_userInfo.id,\r\n\t\t\t\t\t\t\t\t'userSign':that.vuex_userInfo.userSign\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}) */\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (id == 8) {\r\n\t\t\t\t\tthis.chooseFile();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"功能尚未开放!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//单聊发起音视频通话  type 1:语音通话 2视频通话\r\n\t\t\tlaunchSingleCalling: function(type) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet remoteUserIds = [];\r\n\t\t\t\tlet chatGroupId = that.currentChatGroup.id;\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tchatGroupId: that.currentChatGroup.id\r\n\t\t\t\t};\r\n\t\t\t\tthat.$u.api.chatGroup.getChatGroupTrcMembers(param).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tlet groupMemberList = res.data;\r\n\t\t\t\t\t\tif (groupMemberList.length > 0) {\r\n\t\t\t\t\t\t\tfor (let i = 0; i < groupMemberList.length; i++) {\r\n\t\t\t\t\t\t\t\tlet trcUserId = groupMemberList[i].trcRemoteUserId;\r\n\t\t\t\t\t\t\t\tremoteUserIds.push(trcUserId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(\"remoteUserIds\", remoteUserIds);\r\n\t\t\t\t\t\tlet callResult= this.trcApi.singleCall(remoteUserIds[0],type);\r\n\t\t\t\t\t\tthat.trcApi.listenCallStatus({\r\n\t\t\t\t\t\t\tonError:function(res){\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonCallReceived:function(res){\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonCallCancelled:function(res){\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonCallBegin:function(res){\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonCallEnd:function(res){\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"音视频通话远程用户信息获取失败\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tonCallEnd: function(res) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet result = \"\";\r\n\t\t\t\tlet callRole = \"\";\r\n\t\t\t\tif (that.platos == \"ios\") {\r\n\t\t\t\t\tresult = res.data;\r\n\t\t\t\t\tcallRole = result[3];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = res;\r\n\t\t\t\t\tcallRole = res.callRole;\r\n\t\t\t\t}\r\n\t\t\t\tif (callRole == 0) {\r\n\t\t\t\t\tlet param = {\r\n\t\t\t\t\t\troomID: '',\r\n\t\t\t\t\t\ttype: '1', //1是音频 2是视频\r\n\t\t\t\t\t\ttotalTime: 0, //通话时长\r\n\t\t\t\t\t\ttargetUserID: '', //对方userId\r\n\t\t\t\t\t\tfromUserId: '',\r\n\t\t\t\t\t\tcallRole: 0, //0 是主叫 1被叫\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that.platos == \"ios\") {\r\n\t\t\t\t\t\tparam.totalTime = result[4];\r\n\t\t\t\t\t\tparam.callRole = result[3];\r\n\t\t\t\t\t\tparam.type = result[2];\r\n\t\t\t\t\t\tparam.roomID = result[1];\r\n\t\t\t\t\t\tparam.targetUserID = result[0][0];\r\n\t\t\t\t\t\tparam.fromUserId = that.vuex_userInfo.id;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tparam.totalTime = result.totalTime;\r\n\t\t\t\t\t\tparam.callRole = result.callRole;\r\n\t\t\t\t\t\tparam.type = result.type;\r\n\t\t\t\t\t\tparam.roomID = result.roomID;\r\n\t\t\t\t\t\tparam.targetUserID = result.userIDs[0];\r\n\t\t\t\t\t\tparam.fromUserId = that.vuex_userInfo.id;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(\"音视频通话记录保存\", param);\r\n\t\t\t\t\tthat.videoMsgFlag = false;\r\n\t\t\t\t\tlet videoMsgTimmer = setTimeout(function() {\r\n\t\t\t\t\t\tthat.videoMsgFlag = true;\r\n\t\t\t\t\t\tclearTimeout(videoMsgTimmer);\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t//that.sendMsg(1, 13, param);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//发送位置\r\n\t\t\tsendLocation: function(addressObj) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(\"that.address\", that.addressObj);\r\n\t\t\t\tthat.sendMsg(1, 9, that.addressObj);\r\n\t\t\t},\r\n\t\t\t//重置复合信息\r\n\t\t\tresetComponentInfo: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.fileRemarkObj.fileInfo = null;\r\n\t\t\t\tthat.fileRemarkObj.showFlag = false;\r\n\t\t\t\tthat.fileRemarkObj.tag = \"\";\r\n\r\n\t\t\t},\r\n\t\t\t//选照片 or 拍照\r\n\t\t\tchooseImage() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 6,\r\n\t\t\t\t\tsizeType: ['original'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tfor (let i = 0; i < res.tempFilePaths.length; i++) {\r\n\t\t\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\t\t\tsrc: res.tempFilePaths[i],\r\n\t\t\t\t\t\t\t\tsuccess: (image) => {\r\n\t\t\t\t\t\t\t\t\timage.type = 2; ///信息内容类型   1-文本 2-图片 3-视频  4-语音信息 5-文件 6-其他\r\n\t\t\t\t\t\t\t\t\timage.filePath = image.path;\r\n\t\t\t\t\t\t\t\t\t//文件放在自己服务器\r\n\t\t\t\t\t\t\t\t\tlet uploadFileUrl = this.$u.api.multipartAddress.updload;\r\n\t\t\t\t\t\t\t\t\t//文件放在阿里云oss\r\n\t\t\t\t\t\t\t\t\t//let uploadFileUrl= this.$u.api.multipartAddress.uploadAliYun;\r\n\t\t\t\t\t\t\t\t\timage.uploadUrl = uploadFileUrl + \"/chattingFiles\";\r\n\t\t\t\t\t\t\t\t\tlet maxW = uni.upx2px(350); //350是定义消息图片最大宽度\r\n\t\t\t\t\t\t\t\t\tlet maxH = uni.upx2px(350); //350是定义消息图片最大高度\r\n\t\t\t\t\t\t\t\t\tif (image.width > maxW || image.height > maxH) {\r\n\t\t\t\t\t\t\t\t\t\tlet scale = image.width / image.height;\r\n\t\t\t\t\t\t\t\t\t\timage.width = scale > 1 ? maxW : maxH * scale;\r\n\t\t\t\t\t\t\t\t\t\timage.height = scale > 1 ? maxW / scale : maxH;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t//如果是多张直接发送\r\n\t\t\t\t\t\t\t\t\tif (res.tempFilePaths.length > 1) {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tthat.uploadFile(image);\r\n\t\t\t\t\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t//如果只有一张,提示是否加备注\r\n\t\t\t\t\t\t\t\t\t\t//图片信息\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '是否立即发送?',\r\n\t\t\t\t\t\t\t\t\t\t\tconfirmText: '立即发送',\r\n\t\t\t\t\t\t\t\t\t\t\tcancelText: '图文发送',\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击确定');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.uploadFile(image);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.fileRemarkObj.showFlag = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.fileRemarkObj.fileInfo = image;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.fileRemarkObj.tag = \"图片\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.inputFocusFlag = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.log(\"选择图片上传发送异常\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//选择视频或者 拍摄视频\r\n\t\t\tchooseVideo() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.chooseVideo({\r\n\t\t\t\t\tsourceType: ['camera', 'album'],\r\n\t\t\t\t\tcompressed:false,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet video = JSON.parse(JSON.stringify(res));\r\n\t\t\t\t\t\tdelete video.errMsg;\r\n\t\t\t\t\t\tlet tempFilePath = video.tempFilePath;\r\n\t\t\t\t\t\tconsole.log(\"tempFilePath\", tempFilePath);\r\n\t\t\t\t\t\tif (!tempFilePath) {\r\n\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"失败!\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//获取视频第一帧图片\r\n\t\t\t\t\t\tif (that.platos == 'ios') {\r\n\t\t\t\t\t\t\tthat.globalUtil.iosCreateVideoThumbnail(that, {\r\n\t\t\t\t\t\t\t\ttempFilePath: tempFilePath,\r\n\t\t\t\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"获取到视频的第一帧信息\", result);\r\n\t\t\t\t\t\t\t\t\tvideo.subImgInfo = result.result;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(result) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"ios获取视频第一帧信息失败\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (that.platos == 'android') {\r\n\t\t\t\t\t\t\t//console.log(\"安卓获取视频第一帧\");\r\n\t\t\t\t\t\t\tthat.globalUtil.androidCreateVideoThumbnail(that, {\r\n\t\t\t\t\t\t\t\ttempFilePath: tempFilePath,\r\n\t\t\t\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"安卓获取视频第一帧信息\", result);\r\n\t\t\t\t\t\t\t\t\tvideo.subImgInfo = result.result;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(result) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"安卓获取视频第一帧信息失败\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.sendVideoMsg(video, tempFilePath)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//发送视频信息\r\n\t\t\tsendVideoMsg: function(video, tempFilePath) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t//处理视频\r\n\t\t\t\tlet maxW = uni.upx2px(350); //350是定义消息图片最大宽度\r\n\t\t\t\tlet maxH = uni.upx2px(350); //350是定义消息图片最大高度\r\n\t\t\t\tif (video.width > maxW || video.height > maxH) {\r\n\t\t\t\t\tlet scale = video.width / video.height;\r\n\t\t\t\t\tvideo.width = scale > 1 ? maxW : maxH * scale;\r\n\t\t\t\t\tvideo.height = scale > 1 ? maxW / scale : maxH;\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(\"选择的视频结果\",video);\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\ttype: \"video\",\r\n\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\tsavePath: \"/chattingFiles\" //文件存放目录\r\n\t\t\t\t}\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '是否立即发送?',\r\n\t\t\t\t\tconfirmText: '立即发送',\r\n\t\t\t\t\tcancelText: '视频图文发送',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tconsole.log('用户点击确定');\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\ttitle: '视频处理中',\r\n\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.globalUtil.globalUpload(that, {\r\n\t\t\t\t\t\t\t\tparam: obj,\r\n\t\t\t\t\t\t\t\tsuccess: (res1) => {\r\n\t\t\t\t\t\t\t\t\t//console.log(\"上传视频成功\",res1);\r\n\t\t\t\t\t\t\t\t\tif (res1.code == 1) {\r\n\t\t\t\t\t\t\t\t\t\tvideo = Object.assign(video, res1.result);\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"发送视频信息对象\", video);\r\n\t\t\t\t\t\t\t\t\t\tthat.sendMsg(1, 3, video);\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: (res1) => {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"上传视频失败!\");\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"上传视频失败\", res1);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcomplete: (res1) => {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"上传视频失败!\");\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"上传视频完成\", res1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\tobj = Object.assign(video, obj);\r\n\t\t\t\t\t\t\tthat.fileRemarkObj.showFlag = true;\r\n\t\t\t\t\t\t\tthat.fileRemarkObj.fileInfo = obj;\r\n\t\t\t\t\t\t\tthat.fileRemarkObj.tag = \"视频\";\r\n\t\t\t\t\t\t\tthat.inputFocusFlag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//发送图文或者视频图文的信息\r\n\t\t\tsendComponentMsg: function(textDesc) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet tag = that.fileRemarkObj.tag;\r\n\t\t\t\tlet fileInfo = that.fileRemarkObj.fileInfo;\r\n\t\t\t\tlet tempFilePath = fileInfo.filePath;\r\n\t\t\t\tif (tempFilePath == null || tempFilePath == undefined || tempFilePath.length < 1) {\r\n\t\t\t\t\tconsole.log(\"组合信息文件丢失\", tempFilePath);\r\n\t\t\t\t\tthat.resetComponentInfo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.resetComponentInfo();\r\n\t\t\t\tthat.sendStr = \"\";\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t\ttitle: '发送中',\r\n\t\t\t\t})\r\n\t\t\t\tif (fileInfo.type == 2) {\r\n\t\t\t\t\tdelete fileInfo.orientation;\r\n\t\t\t\t\tdelete fileInfo.errMsg;\r\n\t\t\t\t\tdelete fileInfo.path;\r\n\t\t\t\t}\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\ttextDesc: textDesc,\r\n\t\t\t\t\tfileInfo: fileInfo\r\n\t\t\t\t}\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\ttype: fileInfo.type,\r\n\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\tsavePath: \"/chattingFiles\" //文件存放目录\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"上传组合信息的文件,参数\", param);\r\n\t\t\t\tthat.globalUtil.globalUpload(that, {\r\n\t\t\t\t\tparam: param,\r\n\t\t\t\t\tsuccess: (res1) => {\r\n\t\t\t\t\t\tif (res1.code == 1) {\r\n\t\t\t\t\t\t\tobj = Object.assign(obj, res1.result);\r\n\t\t\t\t\t\t\tconsole.log(\"发送组合信息\", obj);\r\n\t\t\t\t\t\t\tif (obj.type == 2) {\r\n\t\t\t\t\t\t\t\tthat.sendMsg(1, 11, obj); //图文\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.sendMsg(1, 12, obj); //视频图文\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.resetComponentInfo();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res1) => {\r\n\t\t\t\t\t\tthat.resetComponentInfo();\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"发送失败!\");\r\n\t\t\t\t\t\tconsole.log(\"组合信息上传文件失败\", res1);\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: (res1) => {\r\n\t\t\t\t\t\tthat.resetComponentInfo();\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"发送失败!\");\r\n\t\t\t\t\t\tconsole.log(\"组合信息上传文件失败\", res1);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//选择文件\r\n\t\t\tchooseFile() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.$u.route({\r\n\t\t\t\t\turl: '/pages/chat/chooseFileList/chooseFileList',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tchatGroupId: that.currentChatGroup.id\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//上传文件到服务器\r\n\t\t\tuploadFile(obj) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(\"上传文件的参数\", obj);\r\n\t\t\t\tif (that.connError) {\r\n\t\t\t\t\tthat.globalUtil.utilAlert(\"您已被踢出群聊\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet uploadUrl = obj.uploadUrl;\r\n\t\t\t\tlet filePath = obj.filePath;\r\n\t\t\t\tlet isSuccess = false;\r\n\t\t\t\tlet sizeError = 0;\r\n\t\t\t\tif (uploadUrl && filePath) {\r\n\t\t\t\t\tlet msg = {};\r\n\t\t\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\t\t\turl: uploadUrl,\r\n\t\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\t\tname: 'fileName',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t\t\t\t\t\t'TOKEN_OA': that.vuex_token,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (uploadFileRes) => {\r\n\t\t\t\t\t\t\tif (uploadFileRes.statusCode == 200 && uploadFileRes.data.length > 0) {\r\n\t\t\t\t\t\t\t\tlet resObj = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\t\t\t\tconsole.log(\"文件上传响应回调数据\", resObj);\r\n\t\t\t\t\t\t\t\tif (resObj.code == 200) {\r\n\t\t\t\t\t\t\t\t\t//文件放在自己的服务器\r\n\t\t\t\t\t\t\t\t\tlet _url = that.$u.api.multipartAddress.getFileByPath + resObj.data;\r\n\t\t\t\t\t\t\t\t\t//文件放在阿里云服务器\r\n\t\t\t\t\t\t\t\t\t// let _url=resObj.data;\r\n\t\t\t\t\t\t\t\t\tmsg.url = _url;\r\n\t\t\t\t\t\t\t\t\tlet suffix = resObj.data.substring(resObj.data.lastIndexOf('.') + 1, resObj\r\n\t\t\t\t\t\t\t\t\t\t.data.length);\r\n\t\t\t\t\t\t\t\t\tmsg.fileSuffix = suffix;\r\n\t\t\t\t\t\t\t\t\tmsg.fileName = resObj.data;\r\n\t\t\t\t\t\t\t\t\tif (obj.type == 2) {\r\n\t\t\t\t\t\t\t\t\t\tmsg.width = obj.width;\r\n\t\t\t\t\t\t\t\t\t\tmsg.height = obj.height;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (obj.type == 4) {\r\n\t\t\t\t\t\t\t\t\t\tmsg.contentDuration = obj.contentDuration;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tisSuccess = true;\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthat.sendMsg(1, obj.type, msg);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"发送失败!\");\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"发送异常!\");\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\tif (isSuccess == false && sizeError == 1) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示:',\r\n\t\t\t\t\t\t\t\t\tconfirmText: '我知道了',\r\n\t\t\t\t\t\t\t\t\tcancelText: '重新上传',\r\n\t\t\t\t\t\t\t\t\tconfirmColor: '#007AFF',\r\n\t\t\t\t\t\t\t\t\tcancelColor: '#48CC94',\r\n\t\t\t\t\t\t\t\t\tcontent: \"【失败! 文件上传不允许超出300M...】\",\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击确认按钮');\r\n\t\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"取消上传\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"文件上传异常\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuploadTask.onProgressUpdate((res) => {\r\n\t\t\t\t\t\tif (res.totalBytesExpectedToSend > 314572800) {\r\n\t\t\t\t\t\t\tsizeError = 1;\r\n\t\t\t\t\t\t\tuploadTask.abort();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmsg.fileSize = this.globalUtil.byteConvert(res.totalBytesExpectedToSend);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"上传文件的参数丢失\");\r\n\t\t\t\t\tconsole.log(\"上传文件的参数丢失\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenLocation: function(item) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet contentObj = JSON.parse(item.content);\r\n\t\t\t\tuni.openLocation({\r\n\t\t\t\t\tlatitude: contentObj.latitude,\r\n\t\t\t\t\tlongitude: contentObj.longitude,\r\n\t\t\t\t\tname: contentObj.name,\r\n\t\t\t\t\taddress: contentObj.address,\r\n\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\tconsole.log('success');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshowTimeJudge: function(item, index) {\r\n\t\t\t\tlet dayTime = item.createTime.substring(5, 10);\r\n\t\t\t\tlet firstTime = this.messageList[0].createTime.substring(5, 10);\r\n\t\t\t\tif (firstTime == dayTime) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif (this.messageList.length > 0 && index > 0) {\r\n\t\t\t\t\tlet lastDayTime = this.messageList[index - 1].createTime.substring(5, 10);\r\n\t\t\t\t\tif (dayTime == lastDayTime) {\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenRedBag: function(item, index) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet conentStr = this.messageList[index].content;\r\n\t\t\t\tlet contentObj = JSON.parse(conentStr);\r\n\t\t\t\tconsole.log(\"item\", item);\r\n\t\t\t\tconsole.log(\"contentObj\", contentObj);\r\n\t\t\t\tif (contentObj.redBagType == 0) {\r\n\t\t\t\t\tthis.openSingleGroupRedBag(item, contentObj, index);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.openGroupRedBag(item, contentObj, index);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//领取单聊的红包\r\n\t\t\topenSingleGroupRedBag: function(item, contentObj, index) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (contentObj.fromUser == this.vuex_userInfo.id) {\r\n\t\t\t\t\tconsole.log(\"自己不能领取自己发出的红包\");\r\n\t\t\t\t\tcontentObj.avatar = item.userAvatar;\r\n\t\t\t\t\tthat.showRedPopFlag = true;\r\n\t\t\t\t\tthat.currentRedBag = contentObj;\r\n\t\t\t\t\tthat.currentRedBag.redBagNums = 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (contentObj.receiveAllFlag == false) {\r\n\t\t\t\t\t\tthat.$u.api.chatGroup.receviceRedBag(item).then(res => {\r\n\t\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"红包已被领取\");\r\n\t\t\t\t\t\t\t\tcontentObj.receiveAllFlag = true;\r\n\t\t\t\t\t\t\t\tthis.messageList[index].content = JSON.stringify(contentObj);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"红包已经被领取\");\r\n\t\t\t\t\t\tcontentObj.avatar = item.userAvatar;\r\n\t\t\t\t\t\tthis.showRedPop(contentObj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//是否领取过\r\n\t\t\tisReceive: function(item) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet contentObj = JSON.parse(item.content);\r\n\t\t\t\tlet receiveUsers = contentObj.receiveUsers;\r\n\t\t\t\tif (receiveUsers != null && receiveUsers != undefined) {\r\n\t\t\t\t\tfor (var i = 0; i < receiveUsers.length; i++) {\r\n\t\t\t\t\t\tlet receiveInfo = receiveUsers[i];\r\n\t\t\t\t\t\tlet receiveUserId = receiveInfo.userId;\r\n\t\t\t\t\t\tif (receiveUserId == that.vuex_userInfo.id) {\r\n\t\t\t\t\t\t\t//that.globalUtil.utilAlert(\"您已经领取过红包~\");\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\t//领取群聊红包\r\n\t\t\topenGroupRedBag: function(item, contentObj, index) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet receiveUsers = contentObj.receiveUsers;\r\n\t\t\t\tif (receiveUsers != null && receiveUsers != undefined) {\r\n\t\t\t\t\tfor (var i = 0; i < receiveUsers.length; i++) {\r\n\t\t\t\t\t\tlet receiveInfo = receiveUsers[i];\r\n\t\t\t\t\t\tlet receiveUserId = receiveInfo.userId;\r\n\t\t\t\t\t\tif (receiveUserId == that.vuex_userInfo.id) {\r\n\t\t\t\t\t\t\tcontentObj.avatar = item.userAvatar;\r\n\t\t\t\t\t\t\tthis.showRedPop(contentObj);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (contentObj.receiveAllFlag == false) {\r\n\t\t\t\t\tthat.$u.api.chatGroup.receviceRedBagForGroup(item).then(res => {\r\n\t\t\t\t\t\tconsole.log(\"领取群聊红包结果\", res);\r\n\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\tif (res.data == 1) {\r\n\t\t\t\t\t\t\t\t//contentObj.receiveAllFlag=true;\r\n\t\t\t\t\t\t\t\tif (contentObj.receiveUsers != null && contentObj.receiveUsers != undefined) {\r\n\t\t\t\t\t\t\t\t\tcontentObj.receiveUsers.push({\r\n\t\t\t\t\t\t\t\t\t\tuserId: this.vuex_userInfo.id\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcontentObj.receiveUsers = [{\r\n\t\t\t\t\t\t\t\t\t\tuserId: this.vuex_userInfo.id\r\n\t\t\t\t\t\t\t\t\t}];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.messageList[index].content = JSON.stringify(contentObj);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.data == -1) {\r\n\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"您已经领取过红包~\");\r\n\t\t\t\t\t\t\t\tcontentObj.receiveAllFlag = true;\r\n\t\t\t\t\t\t\t\tthis.messageList[index].content = JSON.stringify(contentObj);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.data == -2 || res.data == -3) {\r\n\t\t\t\t\t\t\t\tif (res.data == -2) {\r\n\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"手速太慢,红包已被领完~\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcontentObj.receiveAllFlag = true;\r\n\t\t\t\t\t\t\t\tthis.messageList[index].content = JSON.stringify(contentObj);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"手速太慢.红包已经被领完\");\r\n\t\t\t\t\t//that.globalUtil.utilAlert(\"手速太慢.红包已经被领完\");\r\n\t\t\t\t\tcontentObj.avatar = item.userAvatar;\r\n\t\t\t\t\tthis.showRedPop(contentObj);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tshowRedPop: function(contentObj) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t//that.globalUtil.utilAlert(\"您已经领取过红包~\");\r\n\t\t\t\tthat.receiveRedBagList = [];\r\n\t\t\t\tthat.currentRedBag = {};\r\n\t\t\t\tthat.$u.api.chatGroup.getRedBagReceiveList(contentObj).then(res => {\r\n\t\t\t\t\tconsole.log(\"获取红包领取记录\", res);\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tthat.showRedPopFlag = true;\r\n\t\t\t\t\t\tthat.currentRedBag = contentObj;\r\n\t\t\t\t\t\tconsole.log(\"currentRedBag.avatar\", that.currentRedBag.avatar);\r\n\t\t\t\t\t\tthat.receiveRedBagList = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tpreviewFile: function(item) {\r\n\t\t\t\tlet fileObj = JSON.parse(item.content);\r\n\t\t\t\tlet url = fileObj.url\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tconsole.log(\"url\", url);\r\n\t\t\t\t\tif (fileObj.fileType == \"img\") {\r\n\t\t\t\t\t\tuni.previewImage({\r\n\t\t\t\t\t\t\turls: [url],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (fileObj.fileSuffix === 'mp4') {\r\n\t\t\t\t\t\tthis.previewVideoSrc = url;\r\n\t\t\t\t\t\tthis.previewVideoFlag = true;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tvar filePath = res.tempFilePath;\r\n\t\t\t\t\t\t\t\tuni.openDocument({\r\n\t\t\t\t\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\t\t\t\t\tshowMenu: true,\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('打开文档成功');\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror: function(error) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"文件打开失败\", error);\r\n\t\t\t\t\t\t\t\t\t\tthis.globalUtil.utilAlert(\"暂不支持查看\");\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tshowPic(item) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t//console.log(\"item\",item);\r\n\t\t\t\tlet content = JSON.parse(item.content);\r\n\t\t\t\tlet src = content.url;\r\n\t\t\t\t//console.log(\"src\", src);\r\n\t\t\t\tlet subType = content.subContentType;\r\n\t\t\t\tif (subType) {\r\n\t\t\t\t\tuni.previewImage({\r\n\t\t\t\t\t\turls: [src],\r\n\t\t\t\t\t\tlongPressActions: {\r\n\t\t\t\t\t\t\titemList: ['保存图片', '识别二维码'],\r\n\t\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\t\t//console.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\r\n\t\t\t\t\t\t\t\tif (data.tapIndex == 0) {\r\n\t\t\t\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\t\t\t\turl: src, //仅为示例，并非真实的资源\r\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('下载成功', res.tempFilePath);\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet filePath = res.tempFilePath;\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"保存成功\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomplete: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"保存到相册结果\", res)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (data.tapIndex == 1) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"识别二维码\", content);\r\n\t\t\t\t\t\t\t\t\tlet qrInfo = content.qrInfo;\r\n\t\t\t\t\t\t\t\t\tif (qrInfo && qrInfo.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tlet qrObj = JSON.parse(qrInfo);\r\n\t\t\t\t\t\t\t\t\t\tlet businessCode = qrObj.businessCode;\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"businessCode\", businessCode);\r\n\t\t\t\t\t\t\t\t\t\tlet valueInfo = qrObj.qrValue;\r\n\t\t\t\t\t\t\t\t\t\tif (businessCode) {\r\n\t\t\t\t\t\t\t\t\t\t\t//这里识别到二维码信息\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"这里识别到二维码信息\", valueInfo);\r\n\t\t\t\t\t\t\t\t\t\t\t//这里关闭\r\n\t\t\t\t\t\t\t\t\t\t\tuni.closePreviewImage({\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.qrModelInfo = qrObj;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.qrModelFlag = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"无效的二维码!\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthat.globalUtil.utilAlert(\"无效的二维码!\");\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\tconsole.log(err.errMsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.previewImage({\r\n\t\t\t\t\t\turls: previewSrcArr.length > 0 ? previewSrcArr : [src], //[src]\r\n\t\t\t\t\t\tcurrent: src,\r\n\t\t\t\t\t\tloop: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//播放视频\r\n\t\t\tboFangVideo: function(item) {\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet msgId= item.id;\r\n\t\t\t\tlet localSrc= uni.getStorageSync(\"video\"+msgId);\r\n\t\t\t\tif(localSrc){\r\n\t\t\t\t\tconsole.log(\"视频本地缓存\",localSrc);\r\n\t\t\t\t\tthis.previewVideoSrc=localSrc;\r\n\t\t\t\t\tthis.previewVideoFlag=true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet videoContent = JSON.parse(item.content);\r\n\t\t\t\t\tlet videoSrc= videoContent.url;\r\n\t\t\t\t\tthis.previewVideoSrc=videoSrc;\r\n\t\t\t\t\tthis.messageApi.setVideoLocalSrc(videoSrc,msgId);\r\n\t\t\t\t\tthis.previewVideoFlag=true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//关闭播放视频\r\n\t\t\tstopPlayVideo: function() {\r\n\t\t\t\tthis.previewVideoFlag = false;\r\n\t\t\t},\r\n\r\n\t\t\t//查看群成员信息\r\n\t\t\tshowPersonalInfo: function(item) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet groupUserId = item.fromUserId;\r\n\t\t\t\tconsole.log(\"群成员信息\", item);\r\n\t\t\t\tif (item.meFlag == true) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//根据userId去查询是否是好友\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tgroupUserId: groupUserId\r\n\t\t\t\t}\r\n\t\t\t\tthat.$u.api.imUser.getGroupMemberInfo(param).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tlet groupUserInfo = res.data;\r\n\t\t\t\t\t\tconsole.log(\"查询群成员信息结果\", groupUserInfo);\r\n\t\t\t\t\t\tif (groupUserInfo.isFriend) {\r\n\t\t\t\t\t\t\tthat.$u.route({\r\n\t\t\t\t\t\t\t\turl: 'pages/chat/friends/friendHome',\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tfriendId: groupUserId\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"不是朋友关系\");\r\n\t\t\t\t\t\t\tthis.$u.route({\r\n\t\t\t\t\t\t\t\turl: 'pages/chat/friends/newFriendInfo',\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tnewFriendInfo: encodeURIComponent(JSON.stringify(groupUserInfo)),\r\n\t\t\t\t\t\t\t\t\tfromPage: 1\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tformatForwardUserInfo: function(item) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet forwardUser = JSON.parse(item.content);\r\n\t\t\t\tlet currentUserId = that.vuex_userInfo.id;\r\n\t\t\t\tif (forwardUser.id == currentUserId) {\r\n\t\t\t\t\treturn \"我\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn forwardUser.userName;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//解析聊天记录类型的标题\r\n\t\t\tparseChatRecordTitle: function(item) {\r\n\t\t\t\t//console.log(\"item\",item);\r\n\t\t\t\tlet title = \"聊天记录\";\r\n\t\t\t\tlet titleSet = new Set();\r\n\t\t\t\tlet obj = JSON.parse(item.content);\r\n\t\t\t\tfor (let i = 0; i < obj.length; i++) {\r\n\t\t\t\t\tlet userName = obj[i].userName;\r\n\t\t\t\t\ttitleSet.add(userName);\r\n\t\t\t\t}\r\n\t\t\t\tlet userNames = Array.from(titleSet);\r\n\t\t\t\tif (userNames.length < 3) {\r\n\t\t\t\t\treturn userNames.join(\"与\") + \"的聊天记录\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn title;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//解析群聊记录\r\n\t\t\tparseChatRecord: function(content) {\r\n\t\t\t\tlet userName = content.userName;\r\n\t\t\t\tlet contentType = content.contentType;\r\n\t\t\t\tlet innerContent = content.content;\r\n\t\t\t\tlet str = userName + \": [不可识别的信息类型]\";\r\n\t\t\t\tswitch (contentType) {\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tlet text = JSON.parse(innerContent).text;\r\n\t\t\t\t\t\ttext = text.replace(/face/g, '');\r\n\t\t\t\t\t\t//let transText= this.globalUtil.transform(text, \"\", \"\");\r\n\t\t\t\t\t\tstr = userName + \": \" + text;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tstr = userName + \": [图片]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tstr = userName + \": [视频]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tstr = userName + \": [语音]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\tstr = userName + \": [文件]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 7:\r\n\t\t\t\t\t\tstr = userName + \": [红包]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\tstr = userName + \": [名片]\";\r\n\t\t\t\t\tcase 9:\r\n\t\t\t\t\t\tstr = userName + \": [位置]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 10:\r\n\t\t\t\t\t\tstr = userName + \": [聊天记录]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 11:\r\n\t\t\t\t\t\tstr = userName + \": [图文信息]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 12:\r\n\t\t\t\t\t\tstr = userName + \": [视频文字混合]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t},\r\n\t\t\t//查看聊天记录\r\n\t\t\topenChatRecord: function(item, index) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet navbarTitle = this.parseChatRecordTitle(item);\r\n\t\t\t\tconsole.log(\"查看聊天记录\", item);\r\n\t\t\t\tthat.$u.route({\r\n\t\t\t\t\turl: '/pages/chat/chatting/chat-record-content',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tchatRecordContentObj: encodeURIComponent(JSON.stringify(item)),\r\n\t\t\t\t\t\tnavbarTitle: navbarTitle\r\n\t\t\t\t\t},\r\n\t\t\t\t\tanimationType: 'slide-in-bottom'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\tshowUserInfoFromForward: function(item) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(\"群成员信息\", item);\r\n\t\t\t\tlet fromUserId = item.fromUserId;\r\n\t\t\t\tlet groupUserId = JSON.parse(item.content).id;\r\n\t\t\t\t//如果是自己,就不用处理了\r\n\t\t\t\tif (fromUserId == groupUserId) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet currentUserId = that.vuex_userInfo.id;\r\n\t\t\t\tif (groupUserId == currentUserId) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tgroupUserId: groupUserId\r\n\t\t\t\t}\r\n\t\t\t\t//根据userId去查询是否是好友\r\n\t\t\t\tthat.$u.api.imUser.getGroupMemberInfo(param).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tlet groupUserInfo = res.data;\r\n\t\t\t\t\t\tconsole.log(\"查询群成员信息结果\", groupUserInfo);\r\n\t\t\t\t\t\tif (groupUserInfo.isFriend) {\r\n\t\t\t\t\t\t\tthat.$u.route({\r\n\t\t\t\t\t\t\t\turl: 'pages/chat/friends/friendHome',\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tfriendId: groupUserId\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"不是朋友关系\");\r\n\t\t\t\t\t\t\tthis.$u.route({\r\n\t\t\t\t\t\t\t\turl: '/pages/chat/friends/newFriendInfo',\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tnewFriendInfo: encodeURIComponent(JSON.stringify(groupUserInfo)),\r\n\t\t\t\t\t\t\t\t\tfromPage: 1\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tcloseAdvFlag: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tchatGroupId: that.currentChatGroup.id,\r\n\t\t\t\t\thiddenFlag: 0\r\n\t\t\t\t}\r\n\t\t\t\tthat.$u.api.chatGroup.updateMyChatGroupInfo(param).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tconsole.log(\"关闭公告\");\r\n\t\t\t\t\t\tthat.currentChatGroup.advShowFlag = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.globalUtil.utilAlert(\"error\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tloginOut: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.closeWebScoket();\r\n\t\t\t\t//调用service请求后台的接口\r\n\t\t\t\tthis.$u.api.sys.loginOut({}).then(res => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tthis.globalUtil.clearVuex(that);\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tthat.$u.route({\r\n\t\t\t\t\t\t\t\ttype: 'reLaunch',\r\n\t\t\t\t\t\t\t\turl: \"/pages/index/login\",\r\n\t\t\t\t\t\t\t\tparams: {}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//密码错误提示\r\n\t\t\t\t\t\tthis.globalUtil.utilAlert(res.message, \"none\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(res => {\r\n\t\t\t\t\tthis.globalUtil.utilAlert(\"后台请求失败,请联系管理员!\");\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tcloseQRModel: function() {\r\n\t\t\t\tthis.qrModelInfo = {};\r\n\t\t\t\tthis.qrModelFlag = false;\r\n\t\t\t},\r\n\t\t\t//将图片，视频信息放入缓存中\n\t\t\tsaveLocal:function(messageObj){\n\t\t\t\tlet that=this;\n\t\t\t\tlet msgId= messageObj.id;\n\t\t\t\tlet contentType= messageObj.contentType;\n\t\t\t\tlet contentObj=JSON.parse(messageObj.content);\n\t\t\t\tswitch (contentType+''){\n\t\t\t\t\tcase \"2\":\n\t\t\t\t\t\tlet url =contentObj.url;\n\t\t\t\t\t\tthat.messageApi.setImageLocalSrc(url,msgId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"3\":\n\t\t\t\t\t\tlet subImgInfo = contentObj.subImgInfo;\n\t\t\t\t\t\tif (subImgInfo) {\n\t\t\t\t\t\t\tlet url= subImgInfo.url;\n\t\t\t\t\t\t\tthat.messageApi.setImageLocalSrc(url,msgId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"4\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"11\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"12\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t};\n\t\t\t},\t\t\t\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t@import './chatting.scss';\r\n\r\n\t.chatting-container {\r\n\t\t.custom-navbar {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex: 1;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 0 30rpx;\r\n\r\n\t\t\t.nav-left {}\r\n\r\n\t\t\t.nav-center {\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\t\t\t.nav-right {}\r\n\t\t}\r\n\r\n\t\t.msg-container {\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t.msg-box-scroller {\r\n\r\n\t\t\t\t/* direction: rtl;\r\n\t\t\t\tmax-height: 100%;\r\n\t\t\t\ttransform:rotate(180deg);\r\n\t\t\t\t-ms-transform:rotate(180deg);\r\n\t\t\t\t-moz-transform:rotate(180deg);\r\n\t\t\t\t-webkit-transform:rotate(180deg);\r\n\t\t\t\t-o-transform:rotate(180deg); */\r\n\t\t\t\t::-webkit-scrollbar {\r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t\theight: 0;\r\n\t\t\t\t\twidth: 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.message {\r\n\t\t\t\t\tpadding: 13rpx 20rpx;\r\n\t\t\t\t\t/* direction: ltr;transform:rotate(180deg);\r\n\t\t\t\t\t\t-ms-transform:rotate(180deg);\r\n\t\t\t\t\t\t-moz-transform:rotate(180deg);\r\n\t\t\t\t\t\t-webkit-transform:rotate(180deg);\r\n\t\t\t\t\t\t-o-transform:rotate(180deg); */\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.message-item {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tcolor: #000000;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t\talign-items: flex-start;\r\n\t\t\t\t\talign-content: flex-start;\r\n\t\t\t\t\tflex-wrap: nowrap;\r\n\t\t\t\t\tflex-direction: row;\r\n\r\n\t\t\t\t\t.marginLeft-100 {\r\n\t\t\t\t\t\tmargin-right: 110rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.margentRight-100 {\r\n\t\t\t\t\t\tmargin-left: 110rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.img {\r\n\t\t\t\t\t\twidth: 80rpx;\r\n\t\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t\t\tborder-radius: 5rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.content {\r\n\t\t\t\t\t\tpadding: 25rpx 20rpx;\r\n\t\t\t\t\t\tmax-width: 500rpx;\r\n\t\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\tword-break: break-word;\r\n\r\n\t\t\t\t\t\t//margin-top: 10rpx;\r\n\t\t\t\t\t\t.richTextImg {\r\n\r\n\t\t\t\t\t\t\t//border: 1px solid red;\r\n\t\t\t\t\t\t\t.emoji {\r\n\t\t\t\t\t\t\t\t//border: 1px solid black;\r\n\t\t\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\t\t\ttop: 10rpx;\r\n\t\t\t\t\t\t\t\twidth: 26px;\r\n\t\t\t\t\t\t\t\theight: 26px;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 语音\r\n\t\t\t\t\t.contentType2 {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t\t.voice_icon {\r\n\t\t\t\t\t\t\theight: 34rpx;\r\n\t\t\t\t\t\t\twidth: 34rpx;\r\n\t\t\t\t\t\t\tbackground-repeat: no-repeat;\r\n\t\t\t\t\t\t\tbackground-size: 100%;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.voice_icon_right {\r\n\t\t\t\t\t\t\tbackground-image: url(@/static/voice-left-3.png);\r\n\t\t\t\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.voice_icon_left {\r\n\t\t\t\t\t\t\tbackground-image: url(@/static/voice-right-3.png);\r\n\t\t\t\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.voice_icon_right_an {\r\n\t\t\t\t\t\t\tanimation: voiceAn_right 1s linear alternate infinite;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.voice_icon_left_an {\r\n\t\t\t\t\t\t\tanimation: voiceAn_left 1s linear alternate infinite;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t@keyframes voiceAn_right {\r\n\t\t\t\t\t\t\t0% {\r\n\t\t\t\t\t\t\t\tbackground-image: url(@/static/voice-left-1.png);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t50% {\r\n\t\t\t\t\t\t\t\tbackground-image: url(@/static/voice-left-2.png);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\tbackground-image: url(@/static/voice-left-3.png);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t@keyframes voiceAn_left {\r\n\t\t\t\t\t\t\t0% {\r\n\t\t\t\t\t\t\t\tbackground-image: url(@/static/voice-right-1.png);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t50% {\r\n\t\t\t\t\t\t\t\tbackground-image: url(@/static/voice-right-2.png);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\tbackground-image: url(@/static/voice-right-3.png);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//图片\r\n\t\t\t\t\t.contentType3 {\r\n\t\t\t\t\t\tpadding: 0;\r\n\t\t\t\t\t\tborder-radius: 2rpx;\r\n\t\t\t\t\t\tbackground-color: transparent !important;\r\n\t\t\t\t\t\tborder: 1rpx solid #e4e7ed;\r\n\r\n\t\t\t\t\t\t.img {\r\n\t\t\t\t\t\t\twidth: 200rpx;\r\n\t\t\t\t\t\t\theight: auto;\r\n\t\t\t\t\t\t\tmax-width: 300rpx;\r\n\t\t\t\t\t\t\tmax-height: 400rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.contentType3::after {\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\tdisplay: none !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.contentType5 {\r\n\t\t\t\t\t\twidth: 450rpx;\r\n\t\t\t\t\t\tpadding: 0;\r\n\t\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\t\t//background-color: transparent !important;\r\n\t\t\t\t\t\tborder: 1rpx solid #e4e7ed;\r\n\t\t\t\t\t\tbackground-color: #ffffff !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.contentType3::after {\r\n\t\t\t\t\t\tborder-top: 10rpx solid transparent;\r\n\t\t\t\t\t\tborder-bottom: 10rpx solid transparent;\r\n\t\t\t\t\t\tborder-left: 16rpx solid #ffffff !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.contentType-fixed {\r\n\t\t\t\t\t\tpadding: 20;\r\n\t\t\t\t\t\tborder-radius: 6rpx;\r\n\t\t\t\t\t\tbackground-color: #95ec69 !important;\r\n\t\t\t\t\t\tborder: 1rpx solid #e4e7ed;\r\n\t\t\t\t\t\tmax-width: 400rpx;\r\n\r\n\t\t\t\t\t\t.img {\r\n\t\t\t\t\t\t\twidth: 200rpx;\r\n\t\t\t\t\t\t\theight: auto;\r\n\t\t\t\t\t\t\tmax-width: 300rpx;\r\n\t\t\t\t\t\t\tmax-height: 400rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.contentType-fixed::after {\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\tdisplay: none !important;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t.contentType6 {\r\n\t\t\t\t\t\tpadding: 20rpx 30rpx;\r\n\t\t\t\t\t\tpadding-bottom: 6rpx;\r\n\t\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\t\tbackground-color: #f29100;\r\n\t\t\t\t\t\tcolor: #ffffff;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.contentType9 {\r\n\t\t\t\t\t\twidth: 500rpx;\r\n\t\t\t\t\t\tpadding: 0rpx 10rpx;\r\n\t\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\t\tborder: 1rpx solid #e4e7ed;\r\n\t\t\t\t\t\tbackground-color: #ffffff !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.content-type-right {\r\n\t\t\t\t\t\tflex-direction: row-reverse;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.right {\r\n\t\t\t\t\t\tflex-direction: row-reverse;\r\n\r\n\t\t\t\t\t\t.content {\r\n\t\t\t\t\t\t\tbackground-color: #95ec69;\r\n\t\t\t\t\t\t\tmargin-right: 28rpx;\r\n\t\t\t\t\t\t\tword-break: break-all;\r\n\t\t\t\t\t\t\tline-height: 36rpx;\r\n\t\t\t\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\t\t\twidth: 0;\r\n\t\t\t\t\t\t\t\theight: 0;\r\n\t\t\t\t\t\t\t\tborder-top: 10rpx solid transparent;\r\n\t\t\t\t\t\t\t\tborder-bottom: 10rpx solid transparent;\r\n\t\t\t\t\t\t\t\tborder-left: 16rpx solid #95ec69;\r\n\t\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\t\tright: -16rpx;\r\n\t\t\t\t\t\t\t\ttop: 30rpx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.contentType5 {\r\n\t\t\t\t\t\t\tbackground-color: #ffffff !important;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tborder-left: 16rpx solid #fff !important;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.contentType9 {\r\n\t\t\t\t\t\t\tbackground-color: #ffffff !important;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tborder-left: 16rpx solid #fff !important;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.contentType6 {\r\n\t\t\t\t\t\t\tbackground-color: #f29100;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tborder-left: 16rpx solid #f29100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.left {\r\n\t\t\t\t\t\t.content {\r\n\t\t\t\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t\t\t\t\tmargin-left: 28rpx;\r\n\t\t\t\t\t\t\tword-break: break-all;\r\n\t\t\t\t\t\t\tline-height: 36rpx;\r\n\t\t\t\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\t\t\twidth: 0;\r\n\t\t\t\t\t\t\t\theight: 0;\r\n\t\t\t\t\t\t\t\tborder-top: 10rpx solid transparent;\r\n\t\t\t\t\t\t\t\tborder-bottom: 10rpx solid transparent;\r\n\t\t\t\t\t\t\t\tborder-right: 16rpx solid #ffffff;\r\n\t\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\t\tleft: -16rpx;\r\n\t\t\t\t\t\t\t\ttop: 30rpx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.contentType6 {\r\n\t\t\t\t\t\t\tbackground-color: #f29100;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tborder-right: 16rpx solid #f29100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.contentType9 {\r\n\t\t\t\t\t\t\tbackground-color: #ffffff !important;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tborder-right: 16rpx solid #ffffff !important;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.textArea-box {\r\n\t\t\twidth: 100%;\r\n\t\t\tbackground-color: #FFFFFF;\r\n\t\t\tborder-radius: 10upx;\r\n\t\t\t//padding-left: 30upx;\r\n\t\t\tmin-height: 70upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\ttextarea {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.inputScroll {\r\n\t\t\tmax-height: 180upx;\r\n\t\t}\r\n\r\n\t\t.bongfang {\r\n\t\t\tbackground-color: transparent;\r\n\t\t}\r\n\r\n\r\n\r\n\t}\r\n\r\n\t.showRedPopScrollView {\r\n\r\n\t\t//border: 1px solid red;\r\n\t\t::-webkit-scrollbar {\r\n\t\t\tdisplay: none;\r\n\t\t\theight: 0;\r\n\t\t\twidth: 0;\r\n\t\t}\r\n\t}\r\n</style>\r\n<style>\r\n\tpage {\r\n\t\tbackground-color: #f1f1f1;\r\n\t}\r\n</style>\r\n","import { render, staticRenderFns, recyclableRender, components } from \"./ls-loading.vue?vue&type=template&id=39e67dfa&scoped=true&\"\nvar renderjs\nimport script from \"./ls-loading.vue?vue&type=script&lang=js&\"\nexport * from \"./ls-loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ls-loading.vue?vue&type=style&index=0&id=39e67dfa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39e67dfa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/ls-loading/components/ls-loading/ls-loading.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ls-loading.vue?vue&type=template&id=39e67dfa&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ls-loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ls-loading.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view\r\n\t\tclass=\"loading-wrapper\"\r\n\t\t:class=\"{ 'loading-wrapper-embed': embed }\"\r\n\t\t:style=\"{ top: topSize, bottom: bottomSize }\"\r\n\t\thover-stop-propagation\r\n\t\t@tap.stop.prevent=\"defThouch\"\r\n\t\t@touchmove.stop.prevent=\"defMove\"\r\n\t> \r\n\t\t<!-- 文字闪烁动画类型 twinkle-->\r\n\t\t<comb-loader :text=\"text\" :font-size=\"fontSize\" animation-type=\"twinkle\" v-if=\"animation == 'twinkle'\" />\r\n\t\t<!-- 文字聚焦动画类型 focus -->\r\n\t\t<comb-loader :text=\"text\" :font-size=\"fontSize\" animation-type=\"focus\" v-else-if=\"animation == 'focus'\" />\r\n\t\t<!-- 模拟水位上涨画类型 rise-loader -->\r\n\t\t<rise-loader :text=\"text\" :font-size=\"fontSize\" :under-color=\"underColor\" :highlight-color=\"highlightColor\" v-else-if=\"animation == 'rise'\" />\r\n\t\t<!-- 水平进度加载动画类型 progress -->\r\n\t\t<progress-loader :text=\"text\" :font-size=\"fontSize\" :under-color=\"underColor\" :highlight-color=\"highlightColor\" v-else-if=\"animation == 'progress'\" />\r\n\t\t<!-- 文字跳动动画类型 -->\r\n\t\t<jump-loader :text=\"text\" :font-size=\"fontSize\" v-else-if=\"animation == 'jump'\"/>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * ls-loading 页面加载等待loading\r\n * 插件地址：https://ext.dcloud.net.cn/plugin?id=3497\r\n * @description 通常用于页面数据需要异步加载时，为避免出现数据加载完毕之前页面上出现空数据的尴尬情况，显示loading层作为页面载入过渡\r\n * @tutorial lsl\r\n * @property {Boolean} nav 是否预留出标题栏的高度,通常在自定义导航栏页面中需要设置为true （默认：false）\r\n * @property {Boolean} tab 是否预留出tabBar的高度,通常在自定义tabBar的页面中需要设置为true （默认：false）\r\n * @property {Boolean} embed 是否为嵌入模式 （默认：false）\r\n * @property {String} text 加载中的文字 （默认：正在加载）\r\n * @property {String|Number} fontSize 加载中文字大小 （默认：58, 单位rpx）\r\n * @property {String} animation 动画类型 twinkle|focus|rise|jump|progress 详见uniapp插件市场说明\r\n * @property {String} underColor 底层文字颜色 仅在animation为 jump|rise|progress下有效\r\n * @property {String} highlightColor 高亮文字颜色 仅在animation为rise|progress下有效\r\n * @example <ls-loading v-if=\"pageLoading\"></ls-loading>\r\n */\r\n\r\nimport combLoader from './components/comb-loader.vue';\r\nimport riseLoader from './components/rise-loader.vue';\r\nimport progressLoader from './components/progress-loader.vue';\r\nimport jumpLoader from './components/jump-loader.vue';\r\nexport default {\r\n\tname: 'ls-loading',\r\n\tcomponents: { combLoader, riseLoader, progressLoader, jumpLoader },\r\n\tprops: {\r\n\t\t// 是否预留出标题栏的高度\r\n\t\tnav: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 是否预留出tabBar的高度\r\n\t\ttab: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 加载中的文字\r\n\t\ttext: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '正在加载'\r\n\t\t},\r\n\t\t// embed 是否为嵌入模式\r\n\t\tembed: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 加载中文字大小\r\n\t\tfontSize: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: 58\r\n\t\t},\r\n\t\t// 动画类型 twinkle|focus|rise|jump|progress\r\n\t\tanimation: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'twinkle'\r\n\t\t},\r\n\t\t// 底层颜色\r\n\t\tunderColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#e8e7e8'\r\n\t\t},\r\n\t\t// 高亮部分颜色\r\n\t\thighlightColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#00bfff'\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttopSize: ''\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tbottomSize() {\r\n\t\t\treturn this.tab ? '50px' : '0';\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst res = uni.getSystemInfoSync();\r\n\t\t\tthis.topSize = this.nav ? `${res.statusBarHeight + 44}px` : `0px`;\r\n\t\t}, 1);\r\n\t},\r\n\tmethods: {\r\n\t\tdefThouch(e) {\r\n\t\t\t// 阻止点击穿透\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\te.stopPropagation();\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tdefMove(e) {\r\n\t\t\t// 阻止滚动穿透\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\te.stopPropagation();\r\n\t\t\t// #endif\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.loading-wrapper {\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tz-index: 997;\r\n\tbackground-color: #ffffff;\r\n\t/* #ifdef APP-NVUE */\r\n\tflex: 1;\r\n\t/* #endif */\r\n\t/* #ifndef APP-NVUE */\r\n\tdisplay: flex;\r\n\t/* #endif */\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\toverflow: hidden;\r\n}\r\n\r\n.loading-wrapper-embed {\r\n\tflex: 1;\r\n\tposition: relative;\r\n\tmargin-top: 0;\r\n\tmargin-right: 0;\r\n\tmargin-bottom: 0;\r\n\tmargin-left: 0;\r\n\ttext-align: center;\r\n\tbackground-color: transparent;\r\n\tz-index: 1;\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ls-loading.vue?vue&type=style&index=0&id=39e67dfa&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ls-loading.vue?vue&type=style&index=0&id=39e67dfa&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682612662066\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatting.vue?vue&type=style&index=0&id=790d187c&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatting.vue?vue&type=style&index=0&id=790d187c&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682612670378\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatting.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatting.vue?vue&type=style&index=1&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682612668828\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}